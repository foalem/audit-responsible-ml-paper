title,body
fix: numpy deprecated aliases,"### replace old numpy aliases with the new ones.
code currently breaks with the latest numpy release.
https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations"
Python 3 support,"Hi, 

the docs refer that this project is based on python 2.7. Did you test it already on python 3 and it should run there also?"
apex dependency in the age of PyTorch 1.6,"I'm seeing [this exception](https://github.com/HewlettPackard/dlcookbook-dlbs/blob/10f379be926907c784778fd1c79bb696b383f1a1/python/pytorch_benchmarks/benchmarks.py#L43) when running dlbs with PyTorch 1.6.  Supposedly, much of apex's functionality was rolled into [PyTorch 1.6](https://github.com/NVIDIA/apex/issues/502#issuecomment-535674172).  If so, this dependency can likely be removed?"
Support for new Docker runtime (Docker 19.03),"I went through https://hewlettpackard.github.io/dlcookbook-dlbs/#/runtimes/runtimes?id=runtimes and noticed that the new `docker run --gpus all` format for Docker 19.03 is not supported. 

Is there any plans to modify your code to support that? Thanks.

Reference:
https://github.com/NVIDIA/nvidia-docker"
singularity support,"DL benchmarks could also get executed within HPC environments.
Often singularity is the container engine used within HPC therefore singularity should be supported.

https://sylabs.io/singularity/"
remove deprecated parameter shared_param,"In the latest version of apex, shared_param is no longer supported as an option.

Error message:
```
Critical error while running benchmarks (shared_param is no longer supported as an option.  It was misleadingly named from the start.  It turns out overlapping communication with computation should work fine with shared parameters.  If you still wish to delay communication to the end of the backward pass, use delay_allreduce=True|False instead.). See stacktrace below.
Traceback (most recent call last):
  File ""dlcookbook-dlbs/python/pytorch_benchmarks/benchmarks.py"", line 411, in main
    model_title, times = benchmark(opts)
  File ""dlcookbook-dlbs/python/pytorch_benchmarks/benchmarks.py"", line 93, in benchmark
    return benchmark_training(model, opts)
  File ""dlcookbook-dlbs/python/pytorch_benchmarks/benchmarks.py"", line 213, in benchmark_training
    model = DDP(model, shared_param=True)
  File ""/opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6.egg/apex/parallel/distributed.py"", line 190, in __init__
    raise ValueError(""shared_param is no longer supported as an option.  It was misleadingly named from the start.  It turns out overlapping communication with computation should work fine with shared parameters.  If you still wish to delay communication to the end of the backward pass, use delay_allreduce=True|False instead."")
```"
SW/HW configuration: replica batch size problem,"Hello!!

I'm using ubuntu 18.04, and I followed Quick Start from https://hewlettpackard.github.io/dlcookbook-dlbs/#/. But it didn't work.  I already changed replica batch size to 1 and also num_batches to 1.
How can I solve this problem?

command:
![image](https://user-images.githubusercontent.com/17540844/52535115-e826b400-2d8d-11e9-8639-66147893e7e6.png)

error:
![image](https://user-images.githubusercontent.com/17540844/52532576-f6170d80-2d6a-11e9-8e7c-45ea6f43b222.png)

Thank you."
validation,"Hi,
I am trying to run validation bench marking for inference and accuracy.Following are my configuration.
Sytsem: CPU- Ubuntu 16.04
Framework: tensorflow: 
model: alexnet
Action: validation inference time and accuracy

After running the experimenter.py , I got following error.I put some log to check that but tensorflow.launcher is getting as KeyError.

Below is the line of code that is getting error in launcher.py
```
 framework_key = 'exp.framework_family'
            if framework_key not in experiment:
                framework_key = 'exp.framework'
                print((experiment[framework_key]))
            command = [experiment['%s.launcher' % (experiment[framework_key])]]
```
following are the command and log.
```


python python/dlbs/experimenter.py run --log-level=error -Pexp.num_warmup_batches=10 -Pexp.num_batches=100 -Pexp.framework='""tensorflow""' -Pexp.docker=true -Pexp.replica_batch=16 -Pexp.gpus='""""' -Vexp.model='[""alexnet""]' -Pexp.docker_image='""hpe/tensorflow:cpu""' -Vexp.phase='[""training""]' -Pexp.log_file='""./benchmarks/my_experiment/tf.log""' 

--------------------------------------------------------------
Experimenter pid 15397. Run this to gracefully terminate me:
	kill -USR1 15397
I will terminate myself as soon as current benchmark finishes.
--------------------------------------------------------------
Traceback (most recent call last):
  File ""python/dlbs/experimenter.py"", line 368, in <module>
    experimenter.execute()
  File ""python/dlbs/experimenter.py"", line 337, in execute
    Launcher.run(self.plan, self.__progress_file)
  File ""/home/brgupta/workspace/dlbs/python/dlbs/launcher.py"", line 198, in run
    command = [experiment['%s.launcher' % (experiment[framework_key])]]
KeyError: u'tensorflow.launcher'

```

It's very common error in python when key doesn't exist but here in command line I am giving correct.Please let me understand on this error.

Thanks in advance."
"SyntaxError: invalid syntax in File ""/workspace/mxnet_benchmarks/benchmarks.py"", line 390","hi,Here I come again.I used the mxnet framework, there was a syntax error.
my  command：
```
 python $experimenter run --log-level=warning -Pexp.framework='""mxnet""' -Pexp.gpus='0'  \
-Pexp.docker=true -Pmonitor.frequency=0.1 -Vexp.replica_batch='[16]' -Pexp.num_warmup_batches=10\
-Pexp.num_batches=10 -Pmxnet.cudnn_autotune='""false""' -Vexp.model='[""alexnet""]' \
-Pexp.phase='""training""'  \
-Pexp.log_file='""${BENCH_ROOT}/mxnet/${exp.model}_${exp.effective_batch}.log""'\
-Pmxnet.docker_image='""nvcr.io/nvidia/mxnet:18.11-py3""'
```

error:
```
__results.start_time__= ""2018-12-18:08:54:20:839""
  File ""/workspace/mxnet_benchmarks/benchmarks.py"", line 390
    except Exception, e:
                    ^
SyntaxError: invalid syntax
```
@sergey-serebryakov "
add --save_file argument to save image,"- added option to save file instead of display
- this option helps to save an image for documentation as well as working on a headless machine

Signed-off-by: Insop Song <insop.song@gmail.com>"
InvalidArgumentError (see above for traceback): Cannot assign a device for operation 'fp32_vars/dense/bias/Momentum',"@sergey-serebryakov   hi , I've successfully tried GPU benchmarking by using the TensorFlow image, so I wanted to try CPU benchmarking. Additionally, I have successfully tested caffe's CPU benchmark.
My command line：
`python ./python/dlbs/experimenter.py run  -Pexp.framework='""nvtfcnn""'  -Pexp.gpus='""""' -Vexp.docker=true  -Pexp.log_file='""./benchmarks/my_experiment/tf_${exp.model}_${exp.replica_batch}.log""' -Vexp.model='[""alexnet"", ""googlenet""]' -Vexp.replica_batch='[2, 4]'  -Ptensorflow.docker_image='""tensorflow/tensorflow:latest""' -Pexp.docker_launcher='""nvidia-docker""'`

My mirror list is as follows:
```
docker images
REPOSITORY                           TAG                            IMAGE ID            CREATED             SIZE
registry.docker-cn.com/nvidia/cuda   latest                         1cc6f1613121        3 weeks ago         2.24GB
nvidia/cuda                          9.0-cudnn7-devel-ubuntu16.04   afc5ab1e9a0d        3 weeks ago         2.59GB
tensorflow/tensorflow                latest                         2054925f3b43        4 weeks ago         1.34GB
nvcr.io/nvidia/tensorflow            18.07-py3                      8289b0a3b285        5 months ago        3.34GB
bvlc/caffe                           cpu                            0b577b836386        7 months ago        1.64GB
hpe/intel_caffe                      cpu                            0b577b836386        7 months ago        1.64GB
bvlc/caffe                           gpu                            ba28bcb1294c        7 months ago        3.38GB
hpe/bvlc_caffe                       cuda9-cudnn7                   ba28bcb1294c        7 months ago        3.38GB
```

error:

```
InvalidArgumentError (see above for traceback): Cannot assign a device for operation 'fp32_vars/dense/bias/Momentum': Operation was explicitly assigned to /device:GPU:0 but available devices are [ /job:localhost/replica:0/task:0/device:CPU:0, /job:localhost/replica:0/task:0/device:XLA_CPU:0, /job:localhost/replica:0/task:0/device:XLA_GPU:0 ]. Make sure the device specification refers to a valid device.
         [[Node: fp32_vars/dense/bias/Momentum = VariableV2[_class=[""loc:@fp32_vars/dense/bias""], container="""", dtype=DT_FLOAT, shape=[1000], shared_name="""", _device=""/device:GPU:0""]()]]

-------------------------------------------------------
Primary job  terminated normally, but 1 process returned
a non-zero exit code. Per user-direction, the job has been aborted.
-------------------------------------------------------
--------------------------------------------------------------------------
mpiexec detected that one or more processes exited with non-zero status, thus causing
the job to be terminated. The first process to do so was:

  Process name: [[14086,1],3]
  Exit code:    1
--------------------------------------------------------------------------
__results.end_time__= ""2018-12-04:02:46:45:780""
__results.proc_pid__= 7988
__exp.model_title__=""GoogleNet""
__exp.status__=""failure""
__exp.status_msg__=""No results have been found in this log file""
```

When I remove the argument ""-Pexp.docker_launcher='""nvidia-docker""'"", new error is as follows:
`python: can't open file '.py': [Errno 2] No such file or directory`"
Plan has not been validated. See reason (s) above.,"I tried the following command, but got no result.
```
python ./python/dlbs/experimenter.py run\
             -Pexp.framework='""tensorflow""'\
             -Pexp.gpus='""0""'\
             -Vexp.docker=true\
             -Pexp.log_file='""./benchmarks/my_experiment/tf_${exp.model}_${exp.replica_batch}.log""'\
             -Vexp.model='[""alexnet"", ""googlenet""]'\
             -Vexp.replica_batch='[2, 4]'\
             -Ptensorflow.docker_image='""hpe/tensorflow:cuda9-cudnn7""'
```
```
WARNING:root:Module 'matplotlib' cannot be imported, certain system information will not be available
INFO:root:Plan was built with 4 experiments
Plan was built with 4 experiments
====================== VALIDATION REPORT =======================
=========================== MESSAGES ===========================
[
    {
        ""check_name"": ""CanRunDocker"", 
        ""output"": ""Docker version 18.09.0, build 4d60db4\n"", 
        ""cmd"": ""nvidia-docker --version"", 
        ""retcode"": 0
    }
]
======================== FRAMEWORK STATS =======================
{
    ""tensorflow"": {
        ""num_disabled"": 0, 
        ""docker_images"": [
            ""hpe/tensorflow:cuda9-cudnn7""
        ], 
        ""num_exps"": 4, 
        ""num_cpu_exps"": 0, 
        ""num_gpu_exps"": 4, 
        ""num_host_exps"": 0, 
        ""num_docker_exps"": 4
    }
}
============================ ERRORS ============================
Other errors:
[
    {
        ""check_name"": ""DockerImageExists"", 
        ""output"": ""[]\n Error: No such image: hpe/tensorflow:cuda9-cudnn7\n"", 
        ""cmd"": ""docker inspect --type=image hpe/tensorflow:cuda9-cudnn7"", 
        ""retcode"": 1
    }
]
========================= PLAN SUMMARY =========================
Is plan OK ................................ False
Total number of experiments (plan size).....4
Number of disabled experiments ............ 0
Number of active experiments .............. 4
Log files collisions ...................... NO
================================================================
WARNING:root:Plan has not been validated. See reason (s) above.
Plan has not been validated. See reason (s) above.
WARNING:root:If you believe validator is wrong, rerun experimenter with `--no-validation` flag.
If you believe validator is wrong, rerun experimenter with `--no-validation` flag.

```

My PC environment is as follows:
Ubuntu16.04
Docker version 18.09.0
NVIDIA 1080Ti

$ docker images:
```
REPOSITORY                           TAG                 IMAGE ID            CREATED             SIZE
registry.docker-cn.com/nvidia/cuda   latest              1cc6f1613121        2 weeks ago         2.24GB
nvcr.io/nvidia/tensorflow            18.07-py3           8289b0a3b285        5 months ago        3.34GB
```"
Change model.evaluation() to model.eval(); Signed-off-by: Robert Engelmann rengelma@uni-potsdam.de,"I think there was a typo here, since model.evaluation() does not exist, however it works fine with model.eval(), which corresponds to model.train().
Signed-off-by: Robert Engelmann rengelma@uni-potsdam.de"
Embrace containers,"Really like the idea of having a set of benchmark for DL use-cases. In fact a lot of people I talk to like the idea.
Couple of things: 
- how about embracing containerizing the workflow, so that the python scripts are also put in a container?
- getting rid of nvidia-docker and use houdini instead (shameless plug: https://github.com/qnib/moby/blob/houdini/HOUDINI.md, derived from: https://dockercon2018.hubs.vidyard.com/watch/TMeRmzQ7WibaSy8PQ6w7UN)"
Fixed link to Advanced Introduction.,"The relative link ./intro does not work when accessed via a symbolic link from the root of the project.

Currently reading the README.md produces a 404 looking for ./intro/advanced_intro.md"
Fix spelling for benchmarking,
Feature request: Add PyTorch support,"Through some customer conversations, it's becoming apparent that we'll want PyTorch support sooner or later. How much of a lift would it be to add PyTorch support?"
Issue running ResNet models,"Hello again! I'm having difficulties running ResNet models at the moment. No matter which model I use, I always get a `ValueError` that the dimensions must be equal, but I can't quite track down where the discrepancy is coming from, with the exception that some of the [convolutions](https://github.com/HewlettPackard/dlcookbook-dlbs/blob/master/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py#L268) are giving results of different dimensions. Not sure if you guys have run into this before. Here is the end of the output of my log:

```
BenchmarkCNN::__init__ time=0.061035 ms
TensorFlow:  1.4
Model:       resnet50
Mode:        training
Batch size:  16 global
             16 per device
Devices:     ['/cpu:0']
Data format: NHWC
Optimizer:   sgd
Variables:   replicated
Use NCCL:    False
==========
__exp.model_title__=""ResNet50""
Generating model
Adding preprocessing for resnet50
Traceback (most recent call last):
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1454, in <module>
    tf.app.run()
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/platform/app.py"", line 48, in run
    _sys.exit(main(_sys.argv[:1] + flags_passthrough))
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1450, in main
    bench.run()
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 995, in run
    self._benchmark_cnn()
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1035, in _benchmark_cnn
    (enqueue_ops, fetches) = self._build_model()
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1208, in _build_model
    gpu_grad_stage_ops)
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1358, in add_forward_pass_and_gradients
    self.model_conf.add_inference(network)
  File ""/root/dlbs/python/tf_cnn_benchmarks/resnet_model.py"", line 78, in add_inference
    dim_match=False, bottle_neck=bottle_neck)
  File ""/root/dlbs/python/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 527, in residual_unit
    self.top_layer = tf.nn.relu(shortcut + res)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py"", line 894, in binary_op_wrapper
    return func(x, y, name=name)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/ops/gen_math_ops.py"", line 183, in add
    ""Add"", x=x, y=y, name=name)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py"", line 787, in _apply_op_helper
    op_def=op_def)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py"", line 2958, in create_op
    set_shapes_for_outputs(ret)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py"", line 2209, in set_shapes_for_outputs
    shapes = shape_func(op)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/ops.py"", line 2159, in call_with_requiring
    return call_cpp_shape_fn(op, require_shape_fn=True)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.py"", line 627, in call_cpp_shape_fn
    require_shape_fn)
  File ""/usr/lib/python2.7/site-packages/tensorflow/python/framework/common_shapes.py"", line 691, in _call_cpp_shape_fn_impl
    raise ValueError(err.message)
ValueError: Dimensions must be equal, but are 54 and 52 for 'v0/tower_0/add' (op: 'Add') with input shapes: [16,54,55,256], [16,52,55,256].
__results.end_time__= ""2018-01-19:16:21:20:504""
__results.proc_pid__= 5009
```"
No devices for CPU-only run,"I am having some issues with a CPU-only run of the benchmark suite on one of my GPU-less nodes. I am trying to use the Tensorflow framework for my test, but I get an error in the log (see below). Looking at the code it appears (from my angle at least) that `tf_cnn_benchmarks.py` is looking for GPU devices, which I have none, causing `self.devices` to be zero, hence the divide by zero error. Perhaps I am off-base though?

I looked at several of the CPU-only commands in the Wiki guide, but none of them have been successful - most still require a GPU it appears in my testing.

Environment: `CentOS 7.4 64-bit`
Docker Build: `hpe/tensorflow:cpu`
Framework: `Tensorflow`
Command:
```
python python/dlbs/experimenter.py run -Pexp.framework='""tensorflow""' -Pexp.env='""docker""' -Pexp.phase='""training""' -Pexp.gpus='""""' -Pexp.model='""alexnet""' -Pexp.device_batch='""16""' -Pexp.log_file='""./benchmarks/my_experiment/tf.log""' -Ptensorflow.docker.image='""hpe/tensorflow:cpu""' -Pexp.device='""cpu""'
```

```bash
----------------------------
Starting framework launcher.
----------------------------
01-04-18 17:55:58 [INFO]    /root/dlbs/scripts/launchers/tensorflow_hpm.sh
__exp.framework_title__= ""TensorFlow""
__tensorflow.version__= ""1.0.1""
__results.start_time__= ""2018-01-04:23:56:01:230""
PYTHONPATH=/workspace/tf_cnn_benchmarks:/workspace/tf_cnn_benchmarks: CUDA_VISIBLE_DEVICES=
BenchmarkCNN::__init__ time=0.056028 ms
TensorFlow:  1.0
Model:       alexnet
Mode:        training
Batch size:  0 global
Traceback (most recent call last):
  File ""/workspace/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1454, in <module>
    tf.app.run()
  File ""/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py"", line 44, in run
    _sys.exit(main(_sys.argv[:1] + flags_passthrough))
  File ""/workspace/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 1449, in main
    bench.print_info()
  File ""/workspace/tf_cnn_benchmarks/tf_cnn_benchmarks.py"", line 970, in print_info
    log_fn('             %s per device' % (self.batch_size / len(self.devices)))
ZeroDivisionError: integer division or modulo by zero
__results.end_time__= ""2018-01-04:23:56:02:826""
__results.proc_pid__= 44072
```

Thanks for putting this together by the way! I'm really excited to take a deeper dive into it once I get this issue resolved. Let me know if you need any additional information."
dm-control mujoco tasks use A LOT of cpu's,"[Potentially related to this post](https://github.com/google-deepmind/mujoco/issues/203). I was wondering why my code slows down when running a few seeds at a time. When I looked, the CPU's are being throttled by running multiple instances of the MuJoCo environments (specifically I was checking with walker-walk). Using just one environment was maxing out several cores. Is there a way to stop this? I compared with hopper/half-cheetah from the Gymnasium implementations and they use just a single CPU per environment. Do I need to change some setting in dm-control to fix this? 

If any more information is needed (e.g. resource usage from the terminal), then please let me know what else I can add. "
How to fix a part of joints of the model in simulation?,"Hi,

I'm a student and I'm trying to use MuJoCo for simulation.

I'm trying to fix a part of joints of my model in simulation, so that a part of my model won't move. Is there any way to do this?"
Difference between the linear velocity returned by physics.data.sensordata and physics.data.object_velocity,What's the difference between the linear velocities in physics.data.sensordata and physics.data.object_velocity? They seem to be different. Thank you for the help.
Pretrained model for the multi-agent soccer,"Are there pretrained models for the multi-agent soccer, so that the game become fully cooperative (e.g., we only control one team, and the other team loads the pretrained model and become part of the environment)? Thank you for the help."
How to get all physics.named.data objects,"Hello,
I am trying to test if two geoms are in contact.
I was thinking of something like physics.named.data.""contact"" but that is not available.
Is there maybe any method of checking that.

The overarching question is:
What physics.named.data.(...) objects are available. This would hopefully help for my current problem and for all future ones too.
Is there any way to print all (...) if they are dynamic based on the model loaded?"
How to get the velocity of each joint in the global coordinate system ,"We can get the (x, y, z) positions in the global coordinate system by physics.data.geom_xpos. How can we get the the velocity of each joint in the global coordinate system? Thank you for the help."
How to default to EGL on GPU and OSMESA on CPU?,"Right now, the preference order is glfw > egl > osmesa. In the common scenario of training an RL agent on a GPU machine, this means windows will pop up, which is typically not desired. I could also pin `os.environ['MUJOCO_GL'] = 'egl'` in my code to avoid this behavior. However, then the code will crash when running on a CPU-only machine.

Is there any way to set up my RL training code so that it will do headless rendering on GPU but osmesa on CPU, skipping the glfw backend? The goal here is for my RL training code to work out of the box when other people run it, without them having to set up their own env variable.

The potential workarounds I can think of all have their own downsides:
- Detecting whether the machine has a GPU by asking the deep learning framework, to only set the backend to EGL if a GPU is available: This would require importing JAX inside the env processes and hog GPU memory.
- Detecting whether the machine has a GPU by checking for common executable like nvcc or nvidia-smi: This doesn't work in many server environments (including internally at Google), where those binaries aren't available at runtime.

If DMC would just allow specifying a preference order for the backends or change the default to favor EGL over GLFW, that would simplify things a lot."
PyMJCF nested include tags relative to base model,"PyMJCF does not support nested include tags the same way as the MuJoCo compiler. No matter how deep the include tag is, MuJoCo expects all included models and their assets to be given as paths to the corresponding file **relative to the input file parent directory**. However, the current implementation of PyMJCF checks paths relative to the current file's parent directory, which MuJoCo does not support.

In the attached [scenes.zip](https://github.com/deepmind/dm_control/files/12268186/scenes.zip) file are 3 scenes.

- my_scene1/scene.xml includes a file in an inner directory that includes another file in yet another inner directory. The internal include tag uses a path relative to the top-level model directory (my_scene1/). This is supported by MuJoCo but PyMJCF fails to parse the scene:
```python
>>> mjcf.Physics.from_xml_path('my_scene1/scene.xml')  # parse using mujoco directly
<dm_control.mjcf.physics.Physics object at 0x7fd0d191b0d0>

>>> mjcf.Physics.from_mjcf_model(mjcf.from_path('my_scene1/scene.xml'))  # parse with PyMJCF then convert to physics
FileNotFoundError: [Errno 2] No such file or directory: 'my_scene1/inner/inner/inner-inner/include.xml'
```
- my_scene2/scene.xml is the same as my_scene1/scene.xml but the inner include path is given relative to the current model directory (my_scene2/inner/). PyMJCF supports this but it does not compile natively using MuJoCo.
```python
>>> mjcf.Physics.from_xml_path('my_scene2/scene.xml')  # parse using mujoco directly
ValueError: XML Error: Could not open file 'my_scene2/inner-inner/include.xml'
Element 'include', line 0

>>> mjcf.Physics.from_mjcf_model(mjcf.from_path('my_scene2/scene.xml'))  # parse with PyMJCF then convert to physics
<dm_control.mjcf.physics.Physics object at 0x7fc61f1a6700>
```
- my_scene3/scene.xml specifies mesh and texture files in an included file to show that MuJoCo expects these files to be specified relative to the top-level model directory as well.
```python
>>> mjcf.Physics.from_xml_path('my_scene3/scene.xml')  # parse using mujoco directly
<dm_control.mjcf.physics.Physics object at 0x7fc61f1a6f10>

>>> mjcf.Physics.from_mjcf_model(mjcf.from_path('my_scene2/scene.xml'))  # parse with PyMJCF then convert to physics
FileNotFoundError: Line 4: error while parsing element <mesh>: during initialization of attribute 'file' of element <mesh>: [Errno 2] No such file or directory: 'my_scene3/inner/meshes/banana.stl'
```

In conclusion, models with nested include tags or external assets in included files are parsed differently with MuJoCo than with PyMJCF."
PyMJCF nested include tags relative to base model,Addresses #418 
AttributeError: module 'mujoco' has no attribute 'mjDISABLESTRING',"After `pip install dm_control`, I have this error when I import mujoco.
`Python 3.8.16 (default, Mar  2 2023, 03:21:46) 
[GCC 11.2.0] :: Anaconda, Inc. on linux
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> from dm_control import mujoco
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/engine.py"", line 42, in <module>
    from dm_control.mujoco import index
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/index.py"", line 88, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 18, in <module>
    from dm_control.mujoco.wrapper import mjbindings
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/wrapper/mjbindings/__init__.py"", line 29, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/an/.conda/envs/star/lib/python3.8/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 25, in <module>
    mjDISABLESTRING = mujoco.mjDISABLESTRING
AttributeError: module 'mujoco' has no attribute 'mjDISABLESTRING'`"
Problems with egl rendering,"I am working on a mujoco simulation inside a docker container (using nvidia-docker for GPU access). My simulation use egl for hardware rendering and on my local machine works perfectly. I would like to run my simulation on a server with 3 NVIDIA A40. 
When I run this script in the same docker image but on the server
```python
import os
os.environ[""MUJOCO_GL""]=""egl""
os.environ[""MUJOCO_EGL_DEVICE_ID""] = ""1""
from dm_control import mujoco
```
I get this error:
```
ImportError: Cannot initialize a headless EGL display.
```

Server:
Nvidia Driver Version: 525.85.12    CUDA Version: 12.0  

Local Machine:
Nvidia Driver Version: 525.116.04   CUDA Version: 12.0  

If I use osmesa (`os.environ[""MUJOCO_GL""]=""egl""`) everything works correctly. But I would like to use egl. 
I tried to install libnvidia-gl (`apt install libnvidia-gl-525`) as in #214 and #365. but I get the same error. 

I should also add that I do not use NVIDIA Multi-Instance GPU.  
Am I doing something wrong here? 
Thank you in advance for the support!


"
Memory Ram Issue,I wonder if everyone else has the same problem. Environments like cheetah run or walker need way more RAM than other environments like the ball in the cup. Perhaps three times more ram consumption.
Question about the damping setting of joint,"After reading your code and document, I am confused of the setting of the joint.
In cheetah.xml, the default joint is set as :

`<joint limited=""true"" damping="".01"" armature="".1"" stiffness=""8"" type=""hinge"" axis=""0 1 0""/>`

In humaniod.cml, the default joint is set as :

```
<default class=""body"">
      <geom  type=""capsule"" condim=""1"" friction="".7"" solimp="".9 .99 .003"" solref="".015 1"" material=""self""/>
      <joint type=""hinge"" damping="".2"" stiffness=""1"" armature="".01"" limited=""true"" solimplimit=""0 .99 .01""/>
      <default class=""big_joint"">
        <joint damping=""5"" stiffness=""10""/>
        <default class=""big_stiff_joint"">
          <joint stiffness=""20""/>
```

And there are many other examples you provide. So I am confused about how to choose these parameters for my robot? Is there any computation or estimation method for these parameters? Or is there any method for choosing these parameters?"
PyMJCF enable attachment without wrapping body,"- `attach` method now has an additional argument `exclude_wrapper_body`.
  - set to `False` for previous behavior
  - set to `True` for new behavior
- internal elements of attachment are positioned and rotated relative to the attachment site.
- aggregated rotation converters to quaternions for relative rotation
- implemented `xyaxes_to_quat` conversion method
- improved implementation of `euler_to_rmat` that handles all supported eulerseq values
- implemented generic function wrapper for `mju` rotation conversions that 

resolves #407"
Reward is always 0 in Hopper,"In Hopper, reward is always 0 independent of the action. The problem is that this code which is used in reward calculation in hopper.py get_reward(self, physics) function, always return 0 as the value of standing: 
`standing = rewards.tolerance(physics.height(), (_STAND_HEIGHT, 2))`

When I check `env._physics.height()` after environment reset, I saw that the height is initialized as a negative value always. Therefore it is impossible for this code fragment `rewards.tolerance(physics.height(), (_STAND_HEIGHT, 2))` to return 1, since _STAND_HEIGHT is defined as 0.6 for Hopper."
Bump scipy from 1.7.3 to 1.10.0,"Bumps [scipy](https://github.com/scipy/scipy) from 1.7.3 to 1.10.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/scipy/scipy/releases"">scipy's releases</a>.</em></p>
<blockquote>
<h1>SciPy 1.10.0 Release Notes</h1>
<p>SciPy <code>1.10.0</code> is the culmination of <code>6</code> months of hard work. It contains
many new features, numerous bug-fixes, improved test coverage and better
documentation. There have been a number of deprecations and API changes
in this release, which are documented below. All users are encouraged to
upgrade to this release, as there are a large number of bug-fixes and
optimizations. Before upgrading, we recommend that users check that
their own code does not use deprecated SciPy functionality (to do so,
run your code with <code>python -Wd</code> and check for <code>DeprecationWarning</code> s).
Our development attention will now shift to bug-fix releases on the
1.10.x branch, and on adding new features on the main branch.</p>
<p>This release requires Python <code>3.8+</code> and NumPy <code>1.19.5</code> or greater.</p>
<p>For running on PyPy, PyPy3 <code>6.0+</code> is required.</p>
<h1>Highlights of this release</h1>
<ul>
<li>A new dedicated datasets submodule (<code>scipy.datasets</code>) has been added, and is
now preferred over usage of <code>scipy.misc</code> for dataset retrieval.</li>
<li>A new <code>scipy.interpolate.make_smoothing_spline</code> function was added. This
function constructs a smoothing cubic spline from noisy data, using the
generalized cross-validation (GCV) criterion to find the tradeoff between
smoothness and proximity to data points.</li>
<li><code>scipy.stats</code> has three new distributions, two new hypothesis tests, three
new sample statistics, a class for greater control over calculations
involving covariance matrices, and many other enhancements.</li>
</ul>
<h1>New features</h1>
<h1><code>scipy.datasets</code> introduction</h1>
<ul>
<li>A new dedicated <code>datasets</code> submodule has been added. The submodules
is meant for datasets that are relevant to other SciPy submodules ands
content (tutorials, examples, tests), as well as contain a curated
set of datasets that are of wider interest. As of this release, all
the datasets from <code>scipy.misc</code> have been added to <code>scipy.datasets</code>
(and deprecated in <code>scipy.misc</code>).</li>
<li>The submodule is based on <a href=""https://www.fatiando.org/pooch/latest/"">Pooch</a>
(a new optional dependency for SciPy), a Python package to simplify fetching
data files. This move will, in a subsequent release, facilitate SciPy
to trim down the sdist/wheel sizes, by decoupling the data files and
moving them out of the SciPy repository, hosting them externally and</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/scipy/scipy/commit/dde50595862a4f9cede24b5d1c86935c30f1f88a""><code>dde5059</code></a> REL: 1.10.0 final [wheel build]</li>
<li><a href=""https://github.com/scipy/scipy/commit/7856f281b016c585b82d03723c4494bcdbdcd4a5""><code>7856f28</code></a> Merge pull request <a href=""https://redirect.github.com/scipy/scipy/issues/17696"">#17696</a> from tylerjereddy/treddy_110_final_prep</li>
<li><a href=""https://github.com/scipy/scipy/commit/205b6243c6d075d05695e7ac6d007e0f03bfbf42""><code>205b624</code></a> DOC: add missing author</li>
<li><a href=""https://github.com/scipy/scipy/commit/1ab9f1b10145f0a974d5531700e72d1fb4229b76""><code>1ab9f1b</code></a> DOC: update 1.10.0 relnotes</li>
<li><a href=""https://github.com/scipy/scipy/commit/ac2f45fbe1e39a8f52c1ea2e68764009f02973c0""><code>ac2f45f</code></a> MAINT: integrate._qmc_quad: mark as private with preceding underscore</li>
<li><a href=""https://github.com/scipy/scipy/commit/3e0ae1a21f51ebee3a77733c42700d87a0c35d7d""><code>3e0ae1a</code></a> REV: integrate.qmc_quad: delay release to SciPy 1.11.0</li>
<li><a href=""https://github.com/scipy/scipy/commit/34cdf05c86548de1c4ca1b2798cdc23885af807b""><code>34cdf05</code></a> MAINT: FFT pybind11 fixups</li>
<li><a href=""https://github.com/scipy/scipy/commit/843500aabde17aaf1eec65c589d50bd12ee35039""><code>843500a</code></a> Merge pull request <a href=""https://redirect.github.com/scipy/scipy/issues/17689"">#17689</a> from mdhaber/gh17686</li>
<li><a href=""https://github.com/scipy/scipy/commit/089924b61012a106ffa4f58939b0180124051a0b""><code>089924b</code></a> REL: integrate.qmc_quad: remove from release notes</li>
<li><a href=""https://github.com/scipy/scipy/commit/3e47110f10e3267d228e9da84174f3cee325e7c3""><code>3e47110</code></a> REL: 1.10.0rc3 unreleased</li>
<li>Additional commits viewable in <a href=""https://github.com/scipy/scipy/compare/v1.7.3...v1.10.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=scipy&package-manager=pip&previous-version=1.7.3&new-version=1.10.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Initial QPOS,"Dear dm_control developers, first of all, thanks a lot for such an amazing package. I'm writing you because I'm creating a custom model and would like to set my robot's joints to an initial position.

Could you please show an example of how to do that in Composer?

Thanks a lot"
set_state() not working in walker,"Hello,

I believe the `set_state()` function does not work for the walker environment.
The walker environment (https://github.com/deepmind/dm_control/blob/main/dm_control/suite/walker.py) defines its own Physics class, that extends the mujoco.Physics class, but does not extend the set_state() function.
I tried implementing the extra functions needed on my own but I believe I would need to build the repo, and that is not possible.
Am I missing something?
If not, can the extra functionality be added?
"
PyMJCF Attachment frame extra body breaks compilation of freejoint object attachments,"### Description:
Attaching one PyMJCF model (the ""source"") to another (the ""destination"") adds the content of the source's worldbody into a newly generated body element in the destination worldbody. So if we want to add a robot whose model name is ""robot1"" to some scene, then all the contents of its worldbody will be inside a body named  ""robot1/"" and all its children's names will be ""robot1/{original_name}"". The issue is that if ""robot1"" has a freejoint in its root body (the one direct child of worldbody), the resulting merged model cannot be loaded with MuJoCo because the freejoint element is now inside the base element which is inside the newly generated body ""robot1/"".

### Error Message:
```Error: free joint can only be used on top level```

### Reproduce:
A simple example to recreate the error message using the [MuJoCo menagerie](https://github.com/deepmind/mujoco_menagerie/). This works with any free-moving robot (has a freejoint in the base). In the ""scene.xml"" file, we comment the `<include/>` line to avoid loading the robot this way, and only attach it with MJCF
```python
from dm_control import mjcf

scene_model = mjcf.from_path('mujoco_menagerie/robotis_op3/scene.xml')  # <include/> tag is commented
robot_model = mjcf.from_path('mujoco_menagerie/robotis_op3/op3.xml')

scene_model.attach(robot_model)

physics = mjcf.Physics.from_mjcf_model(scene_model)

```

### Suggested Solution:
My preferred solution would be to add an argument in the `attach` method that will exclude the outer ""wrapper"" body. We can still avoid name ambiguity by renaming the source model's components as before (""robot1/base"", ""robot1/wrist"", etc)."
Why is dynamic friction coefficient not constant?,"Hello, I am a Ph.D student studying MuJoCo.

I simulated sliding an object on the table (the object is moved by mocap body). I calculated normal force and frictional force, and found that the frictional force is different from what I expected. I thought the frictional force is proportional to the normal force until the object stopped, but it was not (attached figure). 

![friction](https://github.com/deepmind/dm_control/assets/56387317/4764ddfb-7be0-47e1-ba3a-3606981bd65a)
![normal](https://github.com/deepmind/dm_control/assets/56387317/e54a06d0-88a3-4b87-b8d8-d8b21d5b60a2)

I checked the frictional force divided by the normal force, which is maybe friction coefficient, and found the value is not constant. This value should be constant, but not constant in the simulation. Why is friction coefficient not constant??

![coefficient](https://github.com/deepmind/dm_control/assets/56387317/e2c8712f-2c34-4ef9-9b4b-d52fd80721f7)

The code is attached.
[friction_sample.py.zip](https://github.com/deepmind/dm_control/files/11870261/friction_sample.py.zip)

Thank you very much."
How do I get the orientation of the top-most parent body or geom?,"I was only able to get its xpos (global coords):
```python
class CreatureObservables(composer.Observables):

    @composer.observable
    def base_position(self):
        base = self._entity.mjcf_model.find('geom', 'baseg')
        return observable.MJCFFeature('xpos', base)
```
And then in:
```python
def get_reward(self, physics):
    x, y, z = physics.named.data.xpos['tripod/base']
```
But I would not mind having its orientation to punish the agent for tipping over."
UI. A way to zero an actuator in simulate,"Not very important.

There is a ""Clear all"" button in simulate to zero all actuators, but I sometimes find it frustrating that there is no way to zero a particular actuator, and I have to try to click as close to 0 as possible, and it is not helpful, as even the smallest value results in movement. This would be useful for manual tests.

![Screenshot from 2023-06-18 11-49-12](https://github.com/deepmind/dm_control/assets/33939307/a8b20703-29ab-44f6-8c7c-a9679131786c)
"
expose skin group to python,As per title
Musculoskeletal dog creation,As per title
Bump requests from 2.28.2 to 2.31.0,"Bumps [requests](https://github.com/psf/requests) from 2.28.2 to 2.31.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/psf/requests/releases"">requests's releases</a>.</em></p>
<blockquote>
<h2>v2.31.0</h2>
<h2>2.31.0 (2023-05-22)</h2>
<p><strong>Security</strong></p>
<ul>
<li>
<p>Versions of Requests between v2.3.0 and v2.30.0 are vulnerable to potential
forwarding of <code>Proxy-Authorization</code> headers to destination servers when
following HTTPS redirects.</p>
<p>When proxies are defined with user info (<a href=""https://user:pass@proxy:8080"">https://user:pass@proxy:8080</a>), Requests
will construct a <code>Proxy-Authorization</code> header that is attached to the request to
authenticate with the proxy.</p>
<p>In cases where Requests receives a redirect response, it previously reattached
the <code>Proxy-Authorization</code> header incorrectly, resulting in the value being
sent through the tunneled connection to the destination server. Users who rely on
defining their proxy credentials in the URL are <em>strongly</em> encouraged to upgrade
to Requests 2.31.0+ to prevent unintentional leakage and rotate their proxy
credentials once the change has been fully deployed.</p>
<p>Users who do not use a proxy or do not supply their proxy credentials through
the user information portion of their proxy URL are not subject to this
vulnerability.</p>
<p>Full details can be read in our <a href=""https://github.com/psf/requests/security/advisories/GHSA-j8r2-6x86-q33q"">Github Security Advisory</a>
and <a href=""https://nvd.nist.gov/vuln/detail/CVE-2023-32681"">CVE-2023-32681</a>.</p>
</li>
</ul>
<h2>v2.30.0</h2>
<h2>2.30.0 (2023-05-03)</h2>
<p><strong>Dependencies</strong></p>
<ul>
<li>
<p>⚠️ Added support for urllib3 2.0. ⚠️</p>
<p>This may contain minor breaking changes so we advise careful testing and
reviewing <a href=""https://urllib3.readthedocs.io/en/latest/v2-migration-guide.html"">https://urllib3.readthedocs.io/en/latest/v2-migration-guide.html</a>
prior to upgrading.</p>
<p>Users who wish to stay on urllib3 1.x can pin to <code>urllib3&lt;2</code>.</p>
</li>
</ul>
<h2>v2.29.0</h2>
<h2>2.29.0 (2023-04-26)</h2>
<p><strong>Improvements</strong></p>
<ul>
<li>Requests now defers chunked requests to the urllib3 implementation to improve
standardization. (<a href=""https://redirect.github.com/psf/requests/issues/6226"">#6226</a>)</li>
<li>Requests relaxes header component requirements to support bytes/str subclasses. (<a href=""https://redirect.github.com/psf/requests/issues/6356"">#6356</a>)</li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/psf/requests/blob/main/HISTORY.md"">requests's changelog</a>.</em></p>
<blockquote>
<h2>2.31.0 (2023-05-22)</h2>
<p><strong>Security</strong></p>
<ul>
<li>
<p>Versions of Requests between v2.3.0 and v2.30.0 are vulnerable to potential
forwarding of <code>Proxy-Authorization</code> headers to destination servers when
following HTTPS redirects.</p>
<p>When proxies are defined with user info (<a href=""https://user:pass@proxy:8080"">https://user:pass@proxy:8080</a>), Requests
will construct a <code>Proxy-Authorization</code> header that is attached to the request to
authenticate with the proxy.</p>
<p>In cases where Requests receives a redirect response, it previously reattached
the <code>Proxy-Authorization</code> header incorrectly, resulting in the value being
sent through the tunneled connection to the destination server. Users who rely on
defining their proxy credentials in the URL are <em>strongly</em> encouraged to upgrade
to Requests 2.31.0+ to prevent unintentional leakage and rotate their proxy
credentials once the change has been fully deployed.</p>
<p>Users who do not use a proxy or do not supply their proxy credentials through
the user information portion of their proxy URL are not subject to this
vulnerability.</p>
<p>Full details can be read in our <a href=""https://github.com/psf/requests/security/advisories/GHSA-j8r2-6x86-q33q"">Github Security Advisory</a>
and <a href=""https://nvd.nist.gov/vuln/detail/CVE-2023-32681"">CVE-2023-32681</a>.</p>
</li>
</ul>
<h2>2.30.0 (2023-05-03)</h2>
<p><strong>Dependencies</strong></p>
<ul>
<li>
<p>⚠️ Added support for urllib3 2.0. ⚠️</p>
<p>This may contain minor breaking changes so we advise careful testing and
reviewing <a href=""https://urllib3.readthedocs.io/en/latest/v2-migration-guide.html"">https://urllib3.readthedocs.io/en/latest/v2-migration-guide.html</a>
prior to upgrading.</p>
<p>Users who wish to stay on urllib3 1.x can pin to <code>urllib3&lt;2</code>.</p>
</li>
</ul>
<h2>2.29.0 (2023-04-26)</h2>
<p><strong>Improvements</strong></p>
<ul>
<li>Requests now defers chunked requests to the urllib3 implementation to improve
standardization. (<a href=""https://redirect.github.com/psf/requests/issues/6226"">#6226</a>)</li>
<li>Requests relaxes header component requirements to support bytes/str subclasses. (<a href=""https://redirect.github.com/psf/requests/issues/6356"">#6356</a>)</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/psf/requests/commit/147c8511ddbfa5e8f71bbf5c18ede0c4ceb3bba4""><code>147c851</code></a> v2.31.0</li>
<li><a href=""https://github.com/psf/requests/commit/74ea7cf7a6a27a4eeb2ae24e162bcc942a6706d5""><code>74ea7cf</code></a> Merge pull request from GHSA-j8r2-6x86-q33q</li>
<li><a href=""https://github.com/psf/requests/commit/302225334678490ec66b3614a9dddb8a02c5f4fe""><code>3022253</code></a> test on pypy 3.8 and pypy 3.9 on windows and macos (<a href=""https://redirect.github.com/psf/requests/issues/6424"">#6424</a>)</li>
<li><a href=""https://github.com/psf/requests/commit/b639e66c816514e40604d46f0088fbceec1a5149""><code>b639e66</code></a> test on py3.12 (<a href=""https://redirect.github.com/psf/requests/issues/6448"">#6448</a>)</li>
<li><a href=""https://github.com/psf/requests/commit/d3d504436ef0c2ac7ec8af13738b04dcc8c694be""><code>d3d5044</code></a> Fixed a small typo (<a href=""https://redirect.github.com/psf/requests/issues/6452"">#6452</a>)</li>
<li><a href=""https://github.com/psf/requests/commit/2ad18e0e10e7d7ecd5384c378f25ec8821a10a29""><code>2ad18e0</code></a> v2.30.0</li>
<li><a href=""https://github.com/psf/requests/commit/f2629e9e3c7ce3c3c8c025bcd8db551101cbc773""><code>f2629e9</code></a> Remove strict parameter (<a href=""https://redirect.github.com/psf/requests/issues/6434"">#6434</a>)</li>
<li><a href=""https://github.com/psf/requests/commit/87d63de8739263bbe17034fba2285c79780da7e8""><code>87d63de</code></a> v2.29.0</li>
<li><a href=""https://github.com/psf/requests/commit/51716c4ef390136b0d4b800ec7665dd5503e64fc""><code>51716c4</code></a> enable the warnings plugin (<a href=""https://redirect.github.com/psf/requests/issues/6416"">#6416</a>)</li>
<li><a href=""https://github.com/psf/requests/commit/a7da1ab3498b10ec3a3582244c94b2845f8a8e71""><code>a7da1ab</code></a> try on ubuntu 22.04 (<a href=""https://redirect.github.com/psf/requests/issues/6418"">#6418</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/psf/requests/compare/v2.28.2...v2.31.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=requests&package-manager=pip&previous-version=2.28.2&new-version=2.31.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Rendering the viewer with substeps (aka. physical timestep) instead of steps (aka. control timestep),"I made my own task in dm_control, but unfortunately, the action of my task is not only the actuator control values but also an unfixed control duration. For every control step, my agent will decide how long this control period is, and the time vary from 0.02 to 0.1 seconds (the details are just setting the timestep before every step). 

I would like to render my dm_control env under the 'viewer' module your package provided.

How can I implement it in this situation?"
update inverse kinematics to support multiple sites,I have updated the inverse kinematics script to support multiple sites. It still supports the previous script and all the tests run correctly. There is also a new visualise script that just visualise the output position in the humanoid.
pyproject.toml Out of Lockstep with Mujoco Versioning,"Hi,

Just spent a couple hours resolving this for myself, so thought I should mention it here as well. When you all bump the dm_control versions up you also have been bumping the inequality for mujoco version in requirements.txt and setup.py, but not in pyproject.toml. 

As of right now requirements will not pull the most recent version and the other two will. You can reproduce my issue by pulling any one of the versioning update commits, like [this](https://github.com/deepmind/dm_control/tree/f3ae36a7a7d1aa139cda04956dffb6687c633743) one. When you pip install the build will 'succeed', but the bindings will be improperly built and fail the mjbindings_test. As far as I can tell this is because the build level and python env versions of mujoco will be different. 

Can you add the same equality constraint on mujoco that's in requirements.txt to pyproject.toml to make this more clear for backwards compatibility sake? "
"[Question] Computing the action jacobian of the dynamics (dF(x, a)/da) in dm_control environments?","Other than manually implementing a finite-difference computation, is it possible to get the jacobian of the environment dynamics with respect to the action evaluated at a given state-action pair in the dm_control RL envionrments?"
ubuntu22 pip install fail,"FileNotFoundError: [Errno 2] No such file or directory: 'cmake': 'cmake'
    
    The above exception was the direct cause of the following exception:"
question regarding segmentation map's values,"Hi,

I'm trying to use `Camera.render()` to render a segmentation map to check if an object is in a camera's view. I noticed that the segmentation map might contain very few incorrect geom id values on the border of an object. Below is an example (the segmentation maps are 64x64 but nearest-neighbor scaled for visibility):

![Screen Shot 2023-03-28 at 8 08 17 PM](https://user-images.githubusercontent.com/51248379/228416658-1c61cb57-23ab-4b82-a707-479922e09e48.png)

![Screen Shot 2023-03-28 at 8 08 25 PM](https://user-images.githubusercontent.com/51248379/228416673-57d16aa6-5be9-4d3b-82bd-8c55dfcd2d91.png)


Basically the first figure is the returned segmentation map, after mapping each geom id to a random color. The view is from a robot camera and the two vertical bars are its two grippers which we can ignore here. If we look at the ""basket"" on the ground we can see that there are  7 different colors (geom ids). However, the basket is expected to only have 5 geoms/colors (one bottom and four sides). 

The second figure is after I mapped the geom ids to their object indices, and we can see that there are four pixels at the bottom are thought to come from another object (behind the camera). 

This observation occurs even for higher-resolution maps, although in that case the incorrect geom id values are more difficult to be observable. For example, I found that someone else's result at https://github.com/openai/mujoco-py/issues/516 seems to also have this border issue. 

My question is, is this behavior expected? How is the segmentation map generated intuitively? 

(This issue is critical because I'd like to use a low resolution segmentation map to determine if an object is in the view, which is much more computationally efficient than a high resolution one. However, this border issue makes using small segmentation maps difficult.)
"
Fixed pip install git URL,"Original URL with `git+git` fails as shown
```
> pip install git+git://github.com/deepmind/dm_control.git
Collecting git+git://github.com/deepmind/dm_control.git
  Cloning git://github.com/deepmind/dm_control.git to /tmp/pip-req-build-p9lzhp7w
  Running command git clone --filter=blob:none --quiet git://github.com/deepmind/dm_control.git /tmp/pip-req-build-p9lzhp7w
  fatal: unable to connect to github.com:
  github.com[0: 140.82.113.4]: errno=Connection timed out
```

Successfully installs with `git+https`
```
> pip install git+https://github.com/deepmind/dm_control.git
Collecting git+https://github.com/deepmind/dm_control.git
  Cloning https://github.com/deepmind/dm_control.git to /tmp/pip-req-build-3qzfvyvw
  Running command git clone --filter=blob:none --quiet https://github.com/deepmind/dm_control.git /tmp/pip-req-build-3qzfvyvw
  Resolved https://github.com/deepmind/dm_control.git to commit 5dec8898a4539589d4989f6553673e588e6a6b06
  Installing build dependencies ... done
  ...
```
"
Get Soccer players orientation,"Hi, Im running the multi agent soccer environment and I want to get the coordinate system of each player with respect to the world. Is that possible? if it is, how can i do it?
Regards"
Colab: OpenGL.raw.EGL._errors,"When I tried to run the Colab Notebook, the following error occurred at 2-v-2 Boxhead soccer.

```
Exception ignored in: <function MjrContext.__del__ at 0x7f3c08a77700>
Traceback (most recent call last):
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/mujoco/wrapper/core.py"", line 633, in __del__
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/mujoco/wrapper/core.py"", line 624, in free
  File ""/usr/lib/python3.9/contextlib.py"", line 119, in __enter__
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/base.py"", line 135, in make_current
RuntimeError: Cannot make context <dm_control._render.pyopengl.egl_renderer.EGLContext object at 0x7f3bf1c92490> current on thread <Thread(_colab_inspector_thread, started daemon 139895867696896)>: this context is already current on another thread <_MainThread(MainThread, started 139896762632000)>.
Exception ignored in: <function ContextBase.__del__ at 0x7f3c20187820>
Traceback (most recent call last):
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/base.py"", line 118, in __del__
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/base.py"", line 115, in _free_unconditionally
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/executor/render_executor.py"", line 144, in terminate
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/base.py"", line 96, in _free_on_executor_thread
  File ""/usr/local/lib/python3.9/dist-packages/dm_control/_render/pyopengl/egl_renderer.py"", line 125, in _platform_make_current
  File ""/usr/local/lib/python3.9/dist-packages/OpenGL/error.py"", line 230, in glCheckError
OpenGL.raw.EGL._errors.EGLError: EGLError(
	err = EGL_BAD_ACCESS,
	baseOperation = eglMakeCurrent,
	cArguments = (
		<OpenGL._opaque.EGLDisplay_pointer object at 0x7f3c200be440>,
		<OpenGL._opaque.EGLSurface_pointer object at 0x7f3c201314c0>,
		<OpenGL._opaque.EGLSurface_pointer object at 0x7f3c201314c0>,
		<OpenGL._opaque.EGLContext_pointer object at 0x7f3bf1d189c0>,
	),
	result = 0
)
```

Please let me know how to fix it."
soccer player doesn't move,"I run the simulator as follows:

```
python3 dm_control/dm_control/locomotion/soccer/explore.py
```
The image is as follows:

![Screenshot from 2023-03-24 17-30-56](https://user-images.githubusercontent.com/23301778/227467836-ae758d26-43ef-4702-a207-f94a94c30854.png)

But it didn't move at all.
Please let me know how to move the player.
"
"I installed it without -e option, but I got cannot import name 'constants' error.","I tried to install this repository as follows:

```
git clone https://github.com/deepmind/dm_control.git
cd dm_control/
pip3 install -r requirements.txt 
```

But, after running the command, the following error occurred.

```
python3 ./dm_control/locomotion/soccer/explore.py
ImportError: cannot import name 'constants' from partially initialized module 'dm_control.mujoco.wrapper.mjbindings' (most likely due to a circular import) (/home/dl/DM_Control2/dm_control/dm_control/mujoco/wrapper/mjbindings/__init__.py)
```

Please let me know how to avoid it."
Mujoco Soccer Observation Space,"Hi! i am doing a research with mujoco soccer and right now im having trouble understanding the observation space orientation, the observations given by dm_control are in a (x, y, z) or in a (z, x, y) orientation? 
Regards!"
Changing HField geometry at runtime - visualization not working,"I'd like to change the geometry of a HField at runtime. I am using the following code:
```python
hfield = physics.bind(self._hfield_chunks[geom_idx])
res = hfield.nrow

# Generate terrain in a 2D numpy array bounded to [0, 1]...

start_idx = hfield.adr
physics.model.hfield_data[start_idx:start_idx + res**2] = terrain.ravel()

with physics.contexts.gl.make_current() as ctx:
    ctx.call(mjlib.mjr_uploadHField,
             physics.model.ptr,
             physics.contexts.mujoco.ptr,
             hfield.element_id)
```
Unfortunately, while the physics model seems to change as expected, the visualization is not updating to match. In case it's relevant, I'm using dm_control and the above code is called by the `after_step()` callback."
pymjcf: assets dict is too big,"I decomposed my model into many pieces of convexhall meshes (about 2k), then tried to load it into pymjcf, with API `mjcf.Physics.from_mjcf_model`, it raised a `ValueError: assets dict is too big`. whether load them with .xml or python's for loop will trigger that Error. But load them with `mujoco.Physics.from_xml_string` goes all right. I don't know if this is a bug in pymjcf or it has some way to avoid. I really loves pymjcf to build my envirment.
[IssuesExample.zip](https://github.com/deepmind/dm_control/files/10979961/IssuesExample.zip)
"
Cannot see corridor side planes,"When I set `visible_side_planes = True` in `corridor_arenas.EmptyCorridor(visible_side_planes = True)`, I still cannot see the planes when I render the environment. But if I modify
```
self._left_plane = self._mjcf_root.worldbody.add(
        'geom', type='plane', xyaxes=[1, 0, 0, 0, 0, 1], size=[1, 1, 1],
        rgba=[1, 0, 0, alpha], group=_SIDE_WALLS_GEOM_GROUP)
```
to
```
self._left_plane = self._mjcf_root.worldbody.add(
        'geom', type='plane', xyaxes=[1, 0, 0, 0, 0, 1], size=[1, 1, 1],
        rgba=[1, 0, 0, alpha])
```
I can see them. How can I tackle this problem?
"
Physical meaning of state and observation in each task,"From the paper: https://arxiv.org/pdf/2006.12983.pdf, we only know the dimensions of state, observation, and action in each task. Is there a documentation where we can get the physical meaning of state and observations? "
Adding skin file to mjcf model,"Hello,
I'm relatively new to Mujoco and the dm_control package.
I've encountered the following issue, that I am not able to solve on my own.

At first I wanted to add a skin file via the mjcf interface of dm_control but this didn't work and the following error appeared.
```
│ ~/.pyenv/versions/3.8.10/lib/python3.8/site-packages/dm_control/mjcf/skin.py:85 in     │
│ serialize                                                                                        │
│                                                                                                  │
│   82   out.write(skin.texcoords.astype('<f4').tobytes())                                         │
│   83   out.write(skin.faces.astype('<i4').tobytes())                                             │
│   84   for bone in skin.bones:                                                                   │
│ ❱ 85 │   body_bytes = bone.body().full_identifier.encode('utf-8')                                │
│   86 │   if len(body_bytes) > MAX_BODY_NAME_LENGTH:                                              │
│   87 │     raise ValueError(                                                                     │
│   88 │   │     'body name is longer than  permitted by the skin file format '    
AttributeError: 'NoneType' object has no attribute 'full_identifier'

```

To make sure this is not due to my wrong way of using the library I created a minimal xml file that works in the basic mujoco viewer. The skin file will be displayed correctly. Here is the minimal xml file

```
<mujoco model=""Banjuu"">
  <asset>
    <skin file=""niku_skin.skn"" />
  </asset>

  <worldbody>
            <body name=""nagahosoiB1"" pos=""0 0 0.1""> 
             <composite prefix=""nagahosoi"" type=""rope"" count=""3 1 1"" spacing=""0.04"" offset=""0 0 2"">
               <joint kind=""main"" damping=""0.025"" stiffness=""0.0""/>
               <geom type=""capsule"" size="".008 .013"" rgba="".8 .2 .1 1"" mass=""0.004"" />
             </composite>
            </body> 
  </worldbody>
</mujoco>

```
If I'm running this minimal script and loading the above minimal.xml I get the same exception as before even though the same xml file worked in mujoco.viewer.launch
```

from dm_control import composer
from dm_control import viewer
from dm_control import mjcf


class Environment(composer.Entity):

    def _build(self, environment_xml: str):
        self._model = mjcf.from_path(environment_xml)

    @property
    def mjcf_model(self):
        return self._model

class ExampleTask(composer.Task):

    def __init__(self, environment_xml: str):
        super().__init__()
        self._root_entity = Environment(environment_xml)
        self._task_observables = {}

    @property
    def root_entity(self):
        return self._root_entity

    @property
    def task_observables(self):
        return self._task_observables

    def get_reward(self, physics):
        return 0

def create_and_view(environment_xml: str):
    task= ExampleTask(environment_xml)
    env = composer.Environment(task)
    env.reset()
    viewer.launch(env)

if __name__ == ""__main__"":
    create_and_view(""minimal.xml"")

```
Commenting out the `<skin file=""` will fix the error and I see the composite displayed correctly but adding the file attribute seems to mess things up. If there is some way to circumvent that please let me know "
Can the viewer work properly on WSL2?,"Hello,

I am trying to call the `viewer` on WSL2 (ubuntu20.04 with WSLg) and followed the example:

```python
    env = suite.load(domain_name=""humanoid"", task_name=""stand"")
    action_spec = env.action_spec()

    # Define a uniform random policy.
    def random_policy(time_step):
        del time_step  # Unused.
        return np.random.uniform(low=action_spec.minimum,
                                high=action_spec.maximum,
                                size=action_spec.shape)
    viewer.launch(
        env, policy=random_policy,
    )
```

However, I got an error:

  `OpenGL.error.Error: Attempt to retrieve context when no valid context`


<details>
<summary>Error info</summary>

```python3
Traceback (most recent call last):
  File ""test_gym.py"", line 64, in <module>
    dmc_rollout(""humanoid_run"")
  File ""test_gym.py"", line 57, in dmc_rollout
    viewer.launch(
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/__init__.py"", line 39, in launch
    app = application.Application(title=title, width=width, height=height)
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/application.py"", line 187, in __init__
    self._window = gui.RenderWindow(width, height, title)
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/gui/glfw_gui.py"", line 196, in __init__
    self._fullscreen_quad = ctx.call(self._glfw_setup, self._context.window)
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/_render/executor/render_executor.py"", line 138, in call
    return func(*args, **kwargs)
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/gui/glfw_gui.py"", line 204, in _glfw_setup
    return fullscreen_quad.FullscreenQuadRenderer()
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/gui/fullscreen_quad.py"", line 66, in __init__
    self._init_shaders()
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/dm_control/viewer/gui/fullscreen_quad.py"", line 95, in _init_shaders
    GL.glVertexAttribPointer(
  File ""src/latebind.pyx"", line 51, in OpenGL_accelerate.latebind.Curry.__call__
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/OpenGL/GL/VERSION/GL_2_0.py"", line 469, in glVertexAttribPointer
    contextdata.setValue( key, array )
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/OpenGL/contextdata.py"", line 59, in setValue
    context = getContext( context )
  File ""/home/yan/miniconda3/envs/RL/lib/python3.8/site-packages/OpenGL/contextdata.py"", line 38, in getContext
    context = platform.GetCurrentContext()
OpenGL.error.Error: Attempt to retrieve context when no valid context
```
</details>
"
How do I add geometry to the scene at runtime in mujoco environments?,"Hi, I am trying to add some annotations to my scene in form of primitive geometric objects. I have a fairly integrated training/eval loop already that renders out frames for my episodes, but I'd like to be able to annotate my env and render another frame after I get the normal one, then remove these annotations.

As a basic task, I was looking to add an arrow (for now just a line segment) to maze2d which indicates the agent's velocity.

I saw [this post](https://github.com/deepmind/mujoco/issues/204) previously which shows a tutorial, but following that tutorial doesn't seem to work as `scene.geoms` does not exist.

I looked around a bit and think I almost am there with this snippet: 

```
rgba = np.array((1, 0, 0, 1)) # Red color
line_geom = mujoco.MjvGeom()
line_geom.type = 5 # https://github.com/deepmind/mujoco/blob/main/include/mujoco/mjmodel.h#L87-L109
line_geom.size = [v[0], v[1], 1]
line_geom.pos = [x[0], x[1], .5]
data = sim.data

data.geom_xpos = np.concatenate([data.geom_xpos, [line_geom.pos]])
data.geom_size = np.concatenate([data.geom_size, [line_geom.size]])
data.geom_type = np.concatenate([data.geom_type, [line_geom.type]])
data.geom_rgba = np.concatenate([data.geom_rgba, [rgba]])
```

I am able to create the line geometry, but can't seem to add it to my environment because I can not write to any of the memory controlled by `data`. I looked around but couldn't find a method for appending geometry. Is there anyway to do this? Thanks!"
Incorrect decorator?,"https://github.com/deepmind/dm_control/blob/774f46182140106e22725914aad3c6299ed91edd/dm_control/composer/entity.py#L73

I think this decorator should be @composer.observable based on the composer tutorial instead of `@define.observable`"
Update mjcf schema,"I noticed some differences between the mjcf xml schema and the [documentation's XML Reference](https://mujoco.readthedocs.io/en/stable/XMLreference.html). This fixes two of these differences:
1) `sensor/user` element's attribute defaults. The corresponding change to mujoco was made in https://github.com/deepmind/mujoco/commit/221c63d744cb3d6ea274a983eea2210881c98ce5.
2) `size` element's `memory` attribute. I believe the corrensponding change to mujoco was made in https://github.com/deepmind/mujoco/commit/58fd72f53dde9eb876aad36ac641a331b9aecc30.

Also adds two test cases through `test_model.xml`, which both fail without these schema changes."
Create Experimenting notes,This files tracks the progress over the md-control.
How to check success for dm control tasks?,Does anyone know that how to check if the task is success or not when an episode ends? 
[viewer] Importing viewer module on macos immediately kills maplotlib windows,"On MacOS, importing the viewer module from `dm_control` immediately kills the `matplotlib` plot figures even when it should be ideally blocked with plt.show(). To reproduce the issue run the code below as a script:

```python
import matplotlib
import matplotlib.pyplot as plt

from dm_control import viewer

if __name__ == '__main__':
    print(f""Matplotlib backed {matplotlib.get_backend()} "")
    plt.plot()
    plt.show(block=True)
```

**NOTE** : To reproduce the bug from the above script make sure that backend used by matplotlib (printed on the terminal) is `MacOSX`. When using other non default backends on MacOS the issue goes away. 

Looking into it I found that the issue comes from https://github.com/deepmind/dm_control/blob/3c67a42d021b97808fcc075c0c468d78f0c2233f/dm_control/_render/glfw_renderer.py#L28 Seems like having glfw.init() run globally is the cause."
Fixed angle joints,"I wish to build a complex rigid body which is composed of N rigid links (say, thin capsules) that are connected to one another by N-1 fixed joints (i.e., fixed angles).

In URDF, I would have defined these joints as ""fixed"", for instance:

```
  <joint name=""left_front_wheel_joint"" type=""fixed"">
    <parent link=""left_base""/>
    <child link=""left_front_wheel""/>
    <origin rpy=""0 0 0"" xyz=""0.133333333333 0 -0.085""/>
  </joint>

```
(taken from [URDF tutorial](http://wiki.ros.org/urdf/Tutorials/Building%20a%20Visual%20Robot%20Model%20with%20URDF%20from%20Scratch)).


Is there a similar mechanism in Mujoco's XML format?"
Viewer Continuous Key Callback,"Hello,

I am trying to control the actuators with the keyboard using the `viewer.launch` function. In order to do this, I have created the following class: 

```python
class Application(viewer.application.Application):

    def __init__(self, title, width, height):
        super().__init__(title, width, height)

        self._keyboard.on_key_hold += self._handle_key
        self._input_map.bind(self._move_forward,  viewer.user_input.KEY_UP)
        self._input_map.bind(self._move_back,  viewer.user_input.KEY_DOWN)

    def _move_forward(self):
        action = self._environment.action_spec()
        action = np.zeros_like(action.shape)
        action[0] = 1
        self._runtime._time_step = self._runtime._env.step(action)
        self._runtime._last_action = action
        finished = self._runtime._time_step.last()
        print(""moving forward"")
        return finished or self._runtime._error_logger.errors_found

    def _move_back(self):
        action = self._environment.action_spec()
        action = np.zeros_like(action.shape)
        action[0] = -1
        self._runtime._time_step = self._runtime._env.step(action)
        self._runtime._last_action = action
        finished = self._runtime._time_step.last()
        print(""moving backward"")
        return finished or self._runtime._error_logger.errors_found
```

This basically allows me to set the action values at each timestep given the UP or DOWN key presses. The only issue is when I am trying to continuously control the simulator such as it goes forward as I keep the UP key pressed rather than on the release. 

I was looking at a way to edit the file from [dm_control/viewer/user_input.py](https://github.com/deepmind/dm_control/blob/4e1a35595124742015ae0c7a829e099a5aa100f5/dm_control/viewer/user_input.py) such that it can accept it but I cannot see a clear way to do it. Is there any suggestion on how to approach this?  

Thank you! "
"I want to which object is in contact with which object using mjContact, etc.","Hello,

I want to know which object is in contact with which object using mjContact, etc.

If there is contact between objects as shown in the figure below (yellow area),
is it possible to know which object is in contact with which object,
such as **geom name**, **id number**, etc. using `mjContact`, etc.?

![image](https://user-images.githubusercontent.com/63595993/210000779-4d8322e1-c94e-479a-9c66-23e3354a2b03.png)

![image](https://user-images.githubusercontent.com/63595993/210000693-6ff7d526-370d-423b-a4dc-ec91d9a8d32b.png)

Thank you!"
"Mujoco, dm_control, EGL Errors","Hello, whatever the version of dm_control I set I keep getting this errors.

``` env: MUJOCO_GL=egl
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
Cell In[9], line 4
      1 get_ipython().run_line_magic('env', 'MUJOCO_GL=egl')
      2 from typing import Sequence, Tuple
----> 4 from dm_control import suite
      5 from dm_control.rl import control
      6 from IPython.display import HTML

File ~/.local/lib/python3.8/site-packages/dm_control/suite/__init__.py:24
     20 import itertools
     22 from dm_control.rl import control
---> 24 from dm_control.suite import acrobot
     25 from dm_control.suite import ball_in_cup
     26 from dm_control.suite import cartpole

File ~/.local/lib/python3.8/site-packages/dm_control/suite/acrobot.py:20
     16 """"""Acrobot domain.""""""
     18 import collections
---> 20 from dm_control import mujoco
     21 from dm_control.rl import control
     22 from dm_control.suite import base

File ~/.local/lib/python3.8/site-packages/dm_control/mujoco/__init__.py:18
      1 # Copyright 2017 The dm_control Authors.
...
---> 87 raw_eglQueryString = _p.PLATFORM.EGL.eglQueryString
     88 raw_eglQueryString.restype = ctypes.c_char_p
     89 raw_eglQueryString.__doc__ = """"""Raw version of eglQueryString that does not check for availability""""""

AttributeError: 'NoneType' object has no attribute 'eglQueryString' 
```

I am desperate to know if someone has found a fix."
Implement plugin mechanism for bodies and composites.,Update the mjcf schema to support new plugins.
Fixes for problem with the brick envs passing an iterator to vstack of numpy,"This fixes the following warning being thrown by numpy:

```
.../venv/lib/python3.10/site-packages/dm_control/manipulation/lift.py:70: FutureWarning:
 arrays to stack must be passed as a ""sequence"" type such as list or tuple. Support for non-sequence iterables such as generators is deprecated as of NumPy 1.16 and will raise an error in the future.
  site_positions = np.vstack(itertools.product(*offsets))
```"
"mujoco.FatalError: Offscreen framebuffer is not complete, error 0x8cdd","I'm getting this error while using the EGL rendering backend:

`mujoco.FatalError: Offscreen framebuffer is not complete, error 0x8cdd`

The error is rare (but still fatal for a long job) so not sure if I can provide a script to reproduce. I believe this might be a known issue though? Thanks so much!

The full traceback:

```  File ""/acme/environment_loop.py"", line 176, in run
    result = self.run_episode()
  File ""/acme/environment_loop.py"", line 94, in run_episode
    timestep = self._environment.reset()
  File ""/acme/wrappers/base.py"", line 55, in reset
    return self._environment.reset()
  File ""/acme/wrappers/single_precision.py"", line 40, in reset
    return self._convert_timestep(self._environment.reset())
  File ""/dm_control/composer/environment.py"", line 339, in reset
    return self._reset_attempt()
  File ""/dm_control/composer/environment.py"", line 349, in _reset_attempt
    self._recompile_physics_and_update_observables()
  File ""/dm_control/composer/environment.py"", line 243, in _recompile_physics_and_update_observables
    self._observation_updater.reset(self._physics_proxy, self._random_state)
  File ""/dm_control/composer/observation/updater.py"", line 165, in reset
    enabled.observation_callable())
  File ""/dm_control/composer/observation/observable/mjcf.py"", line 266, in get_observation
    pixels = physics.render(
  File ""/dm_control/mujoco/engine.py"", line 216, in render
    camera = Camera(
  File ""/dm_control/mujoco/engine.py"", line 695, in __init__
    if self._physics.contexts.mujoco is not None:
  File ""/dm_control/mujoco/engine.py"", line 526, in contexts
    self._make_rendering_contexts()
  File ""/dm_control/mujoco/engine.py"", line 512, in _make_rendering_contexts
    mujoco_context = wrapper.MjrContext(self.model, render_context)
  File ""/dm_control/mujoco/wrapper/core.py"", line 606, in __init__
    ptr = ctx.call(mujoco.MjrContext, model.ptr, font_scale)
  File ""/dm_control/_render/executor/render_executor.py"", line 138, in call
    return func(*args, **kwargs)
mujoco.FatalError: Offscreen framebuffer is not complete, error 0x8cdd
(EnvironmentLoop pid=593400) Exception ignored in: <function MjrContext.__del__ at 0x149e24064280>
(EnvironmentLoop pid=593400) Traceback (most recent call last):
(EnvironmentLoop pid=593400)   File ""/dm_control/mujoco/wrapper/core.py"", line 636, in __del__
(EnvironmentLoop pid=593400)     self.free()
(EnvironmentLoop pid=593400)   File ""/dm_control/mujoco/wrapper/core.py"", line 624, in free
(EnvironmentLoop pid=593400)     ptr = self.ptr
(EnvironmentLoop pid=593400)   File ""/dm_control/mujoco/wrapper/core.py"", line 614, in ptr
(EnvironmentLoop pid=593400)     return self._ptr()
(EnvironmentLoop pid=593400) AttributeError: 'MjrContext' object has no attribute '_ptr'```"
Bump pillow from 9.2.0 to 9.3.0,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 9.2.0 to 9.3.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>9.3.0</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/9.3.0.html"">https://pillow.readthedocs.io/en/stable/releasenotes/9.3.0.html</a></p>
<h2>Changes</h2>
<ul>
<li>Initialize libtiff buffer when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6699"">#6699</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Limit SAMPLESPERPIXEL to avoid runtime DOS <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6700"">#6700</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>Inline fname2char to fix memory leak <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6329"">#6329</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Fix memory leaks related to text features <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6330"">#6330</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Use double quotes for version check on old CPython on Windows <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6695"">#6695</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>GHA: replace deprecated set-output command with GITHUB_OUTPUT file <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6697"">#6697</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Remove backup implementation of Round for Windows platforms <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6693"">#6693</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Upload fribidi.dll to GitHub Actions <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6532"">#6532</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Fixed set_variation_by_name offset <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6445"">#6445</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Windows build improvements <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6562"">#6562</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Fix malloc in _imagingft.c:font_setvaraxes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6690"">#6690</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Only use ASCII characters in C source file <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6691"">#6691</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Release Python GIL when converting images using matrix operations <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6418"">#6418</a> [<a href=""https://github.com/hmaarrfk""><code>@​hmaarrfk</code></a>]</li>
<li>Added ExifTags enums <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6630"">#6630</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Do not modify previous frame when calculating delta in PNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6683"">#6683</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added support for reading BMP images with RLE4 compression <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6674"">#6674</a> [<a href=""https://github.com/npjg""><code>@​npjg</code></a>]</li>
<li>Decode JPEG compressed BLP1 data in original mode <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6678"">#6678</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>pylint warnings <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6659"">#6659</a> [<a href=""https://github.com/marksmayo""><code>@​marksmayo</code></a>]</li>
<li>Added GPS TIFF tag info <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6661"">#6661</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added conversion between RGB/RGBA/RGBX and LAB <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6647"">#6647</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Do not attempt normalization if mode is already normal <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6644"">#6644</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fixed seeking to an L frame in a GIF <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6576"">#6576</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Consider all frames when selecting mode for PNG save_all <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6610"">#6610</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Don't reassign crc on ChunkStream close <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6627"">#6627</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Raise a warning if NumPy failed to raise an error during conversion <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6594"">#6594</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Only read a maximum of 100 bytes at a time in IMT header <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6623"">#6623</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Show all frames in ImageShow <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6611"">#6611</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Allow FLI palette chunk to not be first <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6626"">#6626</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>If first GIF frame has transparency for RGB_ALWAYS loading strategy, use RGBA mode <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6592"">#6592</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Round box position to integer when pasting embedded color <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6517"">#6517</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Removed EXIF prefix when saving WebP <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6582"">#6582</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Pad IM palette to 768 bytes when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6579"">#6579</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added DDS BC6H reading <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6449"">#6449</a> [<a href=""https://github.com/ShadelessFox""><code>@​ShadelessFox</code></a>]</li>
<li>Added support for opening WhiteIsZero 16-bit integer TIFF images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6642"">#6642</a> [<a href=""https://github.com/JayWiz""><code>@​JayWiz</code></a>]</li>
<li>Raise an error when allocating translucent color to RGB palette <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6654"">#6654</a> [<a href=""https://github.com/jsbueno""><code>@​jsbueno</code></a>]</li>
<li>Moved mode check outside of loops <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6650"">#6650</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added reading of TIFF child images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6569"">#6569</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Improved ImageOps palette handling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6596"">#6596</a> [<a href=""https://github.com/PososikTeam""><code>@​PososikTeam</code></a>]</li>
<li>Defer parsing of palette into colors <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6567"">#6567</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Apply transparency to P images in ImageTk.PhotoImage <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6559"">#6559</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use rounding in ImageOps contain() and pad() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6522"">#6522</a> [<a href=""https://github.com/bibinhashley""><code>@​bibinhashley</code></a>]</li>
<li>Fixed GIF remapping to palette with duplicate entries <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6548"">#6548</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Allow remap_palette() to return an image with less than 256 palette entries <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6543"">#6543</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Corrected BMP and TGA palette size when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6500"">#6500</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/main/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>9.3.0 (2022-10-29)</h2>
<ul>
<li>
<p>Limit SAMPLESPERPIXEL to avoid runtime DOS <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6700"">#6700</a>
[wiredfool]</p>
</li>
<li>
<p>Initialize libtiff buffer when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6699"">#6699</a>
[radarhere]</p>
</li>
<li>
<p>Inline fname2char to fix memory leak <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6329"">#6329</a>
[nulano]</p>
</li>
<li>
<p>Fix memory leaks related to text features <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6330"">#6330</a>
[nulano]</p>
</li>
<li>
<p>Use double quotes for version check on old CPython on Windows <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6695"">#6695</a>
[hugovk]</p>
</li>
<li>
<p>Remove backup implementation of Round for Windows platforms <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6693"">#6693</a>
[cgohlke]</p>
</li>
<li>
<p>Fixed set_variation_by_name offset <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6445"">#6445</a>
[radarhere]</p>
</li>
<li>
<p>Fix malloc in _imagingft.c:font_setvaraxes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6690"">#6690</a>
[cgohlke]</p>
</li>
<li>
<p>Release Python GIL when converting images using matrix operations <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6418"">#6418</a>
[hmaarrfk]</p>
</li>
<li>
<p>Added ExifTags enums <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6630"">#6630</a>
[radarhere]</p>
</li>
<li>
<p>Do not modify previous frame when calculating delta in PNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6683"">#6683</a>
[radarhere]</p>
</li>
<li>
<p>Added support for reading BMP images with RLE4 compression <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6674"">#6674</a>
[npjg, radarhere]</p>
</li>
<li>
<p>Decode JPEG compressed BLP1 data in original mode <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6678"">#6678</a>
[radarhere]</p>
</li>
<li>
<p>Added GPS TIFF tag info <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6661"">#6661</a>
[radarhere]</p>
</li>
<li>
<p>Added conversion between RGB/RGBA/RGBX and LAB <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6647"">#6647</a>
[radarhere]</p>
</li>
<li>
<p>Do not attempt normalization if mode is already normal <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6644"">#6644</a>
[radarhere]</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/d594f4cb8dc47fb0c69ae58d9fff86faae4515bd""><code>d594f4c</code></a> Update CHANGES.rst [ci skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/909dc64ed5f676169aa3d9b0c26f132a06321b83""><code>909dc64</code></a> 9.3.0 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/1a51ce7b955c65c8f2c6bc7772735b197b8a6aa3""><code>1a51ce7</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6699"">#6699</a> from hugovk/security-libtiff_buffer</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/2444cddab2f83f28687c7c20871574acbb6dbcf3""><code>2444cdd</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6700"">#6700</a> from hugovk/security-samples_per_pixel-sec</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/744f455830871d61a8de0a5e629d4c2e33817cbb""><code>744f455</code></a> Added release notes</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/0846bfae48513f2f51ca8547ed3b8954fa501fda""><code>0846bfa</code></a> Add to release notes</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/799a6a01052cea3f417a571d7c64cd14acc18c64""><code>799a6a0</code></a> Fix linting</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/00b25fd3ac3648bc28eff5d4c4d816e605e3f05f""><code>00b25fd</code></a> Hide UserWarning in logs</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/05b175ef88c22f5c416bc9b8d5b897dea1abbf2c""><code>05b175e</code></a> Tighter test case</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/13f2c5ae14901c89c38f898496102afd9daeaf6d""><code>13f2c5a</code></a> Prevent DOS with large SAMPLESPERPIXEL in Tiff IFD</li>
<li>Additional commits viewable in <a href=""https://github.com/python-pillow/Pillow/compare/9.2.0...9.3.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=9.2.0&new-version=9.3.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
`parser.py` does not fill in the defaults values for a MJCF file,"The documentation (https://mujoco.readthedocs.io/en/stable/XMLreference.html) specifies tthe default values for each possible attribute of a MJCF element.
If I understand correctly, [this](https://mujoco.readthedocs.io/en/stable/XMLreference.html?highlight=geom#body-geom:~:text=type%3A%20%5Bplane%2C%20hfield%2C%20sphere%2C%20capsule%2C%20ellipsoid%2C%20cylinder%2C%20box%2C%20mesh%5D%2C%20%E2%80%9Csphere%E2%80%9D) means that the default value of the ""type"" attribute is ""sphere"".

However, if I try to read a MJCF file where those attribute are not filled, and parse it with `mjcf.from_xml_string`, the resulting `dm_control.mjcf.element.RootElement` does not have the specified attribute filled in with the default value.

Is this the expected behaviour (in which case, other projects relying on dm_control should beware of this potential problem and treat the missing values themselves), or is it something we could improve on ?"
[Basic Question] How can I get Force acting on an object,"Hello,
I want to ask regarding #363 .
To solve #363 problem, I want to get the value of force acting on an red ball in the video below.

https://user-images.githubusercontent.com/63595993/204800924-15fdc1a9-6d97-49db-9e83-f91f90a3a16b.mp4

How can I get the values of all forces on an object, not just contact forces?

Sorry for the basic question, but thank you in advance for your patience."
Clean up of the build dog script,"Things that are different:
1. Split build_dog script in different files to increase readability.
2. A floor to the base xml, so that the final model can be ready to use.
3. Overall clean-up of the file, for example the path for the bones was broken I had to remove a ' \ ' symbol.
4. Moved a geometry from extras to parent directory, needed for the final model to compile.

Happy to discuss all the modifications :)"
Rendering error (gladLoadGL error) by using osmesa backend,"Hi,

I am using Python3.7 on a headless Ubuntu 18.04 server with CUDA 10.2. Here are my mujoco related versions: `dm-control=1.0.8 ` and `mujoco=2.3.0`. When using dm-control.suite, it report the following error. BTW, I set the rendering backend to `osmesa` by adding this line to my code `os.environ['MUJOCO_GL'] = 'osmesa'`. Can you please help me to tackle it? Thanks in advance.

```text
render_context: <dm_control._render.pyopengl.osmesa_renderer.OSMesaContext object at 0x7f950019d910>
Traceback (most recent call last):
  File ""wrappers.py"", line 430, in <module>
    obs = env.reset()
  File ""wrappers.py"", line 294, in reset
    obs = self._env.reset()
  File ""wrappers.py"", line 115, in reset
    obs = self._env.reset()
  File ""wrappers.py"", line 160, in reset
    return self._env.reset()
  File ""wrappers.py"", line 76, in reset
    obs['image'] = self.render()
  File ""wrappers.py"", line 82, in render
    return self._env.physics.render(*self._size, camera_id=self._camera)
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 221, in render
    scene_callback=scene_callback)
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 696, in __init__
    if self._physics.contexts.mujoco is not None:
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 527, in contexts
    self._make_rendering_contexts()
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 513, in _make_rendering_contexts
    mujoco_context = wrapper.MjrContext(self.model, render_context)
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/mujoco/wrapper/core.py"", line 606, in __init__
    ptr = ctx.call(mujoco.MjrContext, model.ptr, font_scale)
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/_render/executor/render_executor.py"", line 196, in call
    return self._call_locked(func, *args, **kwargs)
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/site-packages/dm_control/_render/executor/render_executor.py"", line 206, in _call_locked
    return self._executor.submit(func, *args, **kwargs).result()
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/concurrent/futures/_base.py"", line 435, in result
    return self.__get_result()
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/concurrent/futures/_base.py"", line 384, in __get_result
    raise self._exception
  File ""/home/ma-user/anaconda3/envs/PyTorch-1.8/lib/python3.7/concurrent/futures/thread.py"", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
mujoco.FatalError: gladLoadGL error
```"
ERROR:absl:dm_control viewer intercepted an environment error. Original message: 'tuple' object has no attribute 'last',"Hello, I am using dm_control.viewer to render a trained agent. My code is like this:
```
def visualize_agent(mean_action=True):
        env = self.env

        from dm_control import viewer

        def policy_fn(time_step):
            cur_state = torper.tensor([tools.get_state_flatten(time_step.observation)], device=self.device)
            action = self.policy_net.select_action(cur_state, mean_action).detach().numpy()
            return action

        viewer.launch(environment_loader=env, policy=policy_fn)
```
```
    """""" create agent """"""
    agent = HopperAgent(cfg, logger, dtype=dtype, device=device, seed=cfg.seed, num_threads=1,
                        render=True, training=False, checkpoint=epoch)

    agent.visualize_agent()
```

I got an error like this: 

```
ERROR:absl:dm_control viewer intercepted an environment error.
Original message: 'tuple' object has no attribute 'last'
dm_control viewer intercepted an environment error.
Original message: 'tuple' object has no attribute 'last'
Traceback:
  File ""/Users/kjaebye/opt/miniconda3/envs/mjctest/lib/python3.9/site-packages/dm_control/viewer/runtime.py"", line 256, in _step
    finished = self._time_step.last()
```
I check the code in viewer. I guess the viewer.launch shall create a class Runtime, and run _step() . In _step():
```
  def _step(self):
    """"""Generates an action and applies it to the environment.

    If a `policy` was provided, this will be invoked to generate an action to
    feed to the environment, otherwise a default action will be generated.

    Returns:
      A boolean value, True if the environment signaled the episode end, False
      if the episode is still running.
    """"""
    finished = True
    with self._error_logger:
      if self._policy:
        action = self._policy(self._time_step)
      else:
        action = self._default_action
      self._time_step = self._env.step(action)
      self._last_action = action
      finished = self._time_step.last()
    return finished or self._error_logger.errors_found
```

However, I have indicated the policy policy_fn() so it cannot get into 'else' part, but error occur. What is the mechanism of this?"
"[Question] The difference in results between ""./simulate"" and when run in a python file","Hello,

I am having trouble with different results when I run the .`/ simulate` and python files.

I am simulating the release of balls when a cup is rotated.

When I run `./ simulate` and manually rotate the cup, the results are close to the real environment as bellow.


https://user-images.githubusercontent.com/63595993/203564412-6b78f582-95c1-4f1b-99df-930f92be69a2.mp4



However, when I load the exact same xml, obj files and rotate the container by a python file, I got wrong results as bellow.


https://user-images.githubusercontent.com/63595993/203564492-408edfde-a25b-447c-ae1f-a65bbdf58edb.mp4

Specifically, when the container was rotated, the sphere inside the container rotated unnecessarily, and the simulation was performed as if the lower sphere was pushed out.
This did not occur in real or simulate environments.


https://user-images.githubusercontent.com/63595993/203564709-07eda952-8e99-4fb9-b0c6-92f40378704c.mp4


https://user-images.githubusercontent.com/63595993/203564804-ae760111-82ec-413c-87a1-3d11cd506d46.mp4



In particular, we are using the same xml and obj files as in simulte, and we do not think there is anything wrong with the files themselves, but we do not know the cause.

I am attaching all files.
[question.zip](https://github.com/deepmind/dm_control/files/10076156/question.zip)


We are very sorry for the trouble and would appreciate your feedback.
Thank you in advance."
"[Basic Question] what is the unit of ""data.qvel""","Hello, 
I use ""data.qvel"" and rotate the cup as bellow.
```
for i in range(t3+2):
    data.qvel[0] = 3
```
![rotate0_0_0_a0 7_b0 7_c0 0075](https://user-images.githubusercontent.com/63595993/203505563-df09aa58-14fb-4eaf-92c7-380e48466907.gif)



However, I don't know about the **unit** of `data.qvel`.

Is this 3 **[deg/s]**, 3 **[rad/s]** or other??

Also, is there another appropriate way to write a program to rotate an object?

Sorry for a basic question.

Thank you."
[Question] canonical way to implement synchronous actions?,"I'm interested in using `mujoco` and `dm_control` to simulate a robot that can execute a trajectory for each step in the environment (e.g. for simulating a motion primitive with spatial actions).

In pybullet (or mujoco w/o the dm_control framework) in `environment.step` you would do IK, set the joint targets and call `p.stepSimulation()` untill the target pose is reached according to some criterion or just teleoport the joints to this state,  collect the observations and return. But in dm_control, you cannot do this as the callbacks should be executed in time (so that other entities could also update their state based on the physics state or the action).

The number of physics steps required to execute this trajectory can vary quite a bit (nearby pose vs far away, or even teleporting the robot if it is not interacting with objects at that moment), so just running the worst case number of physics steps for each environment step seems very inefficient.

I'm wondering if this kind of synchronous (= ""runtime-validated stop condition and hence variable number of physics steps"") actions can be realised more efficiently in the `dm_control` framework, and what the canonical way is to do so.

One way I can think of, is an 'early termination' in the inner loop in the `environment.step` method, if the task signals this to the environment (the task itself can query its entities if needed), but that is not facilitated by the current Environment and I feel like I can't be the first person with this question so I wanted to hear if anyone knows a way to do this within the current framework?
"
Mujoco mockup failing in moving object,"Hi,
I am using mockup in my environment to move objects.
In the last few months, it was ok till something happened two weeks ago, probably some package I have updated (maybe dm_control?)
Now the mockup is not moving the object.
Attached is code to reproduce the bug

[nujoco_bug.zip](https://github.com/deepmind/dm_control/files/10047802/nujoco_bug.zip)
"
Update to pyparsing 3.0,"This library depends on pyparsing < 3.0, which is now 2+ years old (2.4.7 was released in Apr 2020). It would be great if it could be updated to work with modern versions.

Here's the changelog for pyparsing 3.0: https://github.com/pyparsing/pyparsing/blob/master/docs/whats_new_in_3_0_0.rst"
Allow tendon `springlength` attribute to take two values.,Tendon `springlength` in mujoco can now take two values (see https://github.com/deepmind/mujoco/commit/893942a729123c193eb5aadaabca0a8042bd20d0). Update `dm_control` accordingly.
render two views for stereo cam,"Sorry if I missed this in the docs or tutorials, but is it possible to pass a flag to physics.render to get stereo output (either mujoco.mjtStereo.mjSTEREO_QUADBUFFERED, or mujoco.mjtStereo.mjSTEREO_SIDEBYSIDE)? I have a camera with ipd=""0.068"".

"
Non-deterministic environments,"Hi, Im trying to use the example locomotion environments and finding that they are non-deterministic even when passing a random state. 

Example code is provided below
```python
import numpy as np
from dm_control.locomotion.examples import basic_cmu_2019, basic_rodent_2020, cmu_2020_tracking

for env_fn in (
    basic_cmu_2019.cmu_humanoid_maze_forage,
    basic_cmu_2019.cmu_humanoid_heterogeneous_forage,
    basic_rodent_2020.rodent_maze_forage,
    basic_rodent_2020.rodent_two_touch,
):
    print(f'{env_fn.__name__}')

    rng_1, rng_2 = np.random.RandomState(1), np.random.RandomState(1)

    env_1, env_2 = env_fn(rng_1), env_fn(rng_2)
    ts_1, ts_2 = env_1.reset(), env_2.reset()

    obs_1 = ts_1.observation
    obs_2 = ts_2.observation

    assert obs_1.keys() == obs_2.keys()
    for key in obs_1.keys():
        x = obs_1[key]
        y = obs_2[key]
        if not np.allclose(x, y):
            print(f""\tfail: {key}, error: {np.sum(np.abs(x - y))}"")
```

Output
```
cmu_humanoid_maze_forage
	fail: walker/egocentric_camera, 1043595
cmu_humanoid_heterogeneous_forage
	fail: walker/egocentric_camera, 841373
rodent_maze_forage
	fail: walker/egocentric_camera, 741803
rodent_two_touch
	fail: walker/egocentric_camera, 531694
```

I have tested this code with all other dm-control environments and found for now that only these four give an issue
Do anyone know a reason why these four fail? 
Where is the egoentric_camera data computed? "
Error: 'NoneType' object has no attribute 'last',"Hi, I am new using dm_control. I want to wrap dm_control classes rl.control.Environment, mujoco.Physics, suite.base.Task, and put them in one file so that I can instantiate an environment for example  by `env = HopperEnv()`.

What I have done is creating new classes inheriting from the old class in **mujoco_env.py** like this:
```
class MujocoEnv(rl.control.Environment): ...
class MujocoPhysics(mujoco.Physics): ...
class MujocoTask(suite.base.Task): ...
...
```
and in hopper.py I create hopper environment class like this:
```
class HopperEnv(mujoco_env.MujocoEnv):
    def __init__(self, cfg):
        physics = HopperPhysics.from_xml_path('hopper.xml')
        task = HopperTask(True, random=None)
        super().__init__(cfg, physics, task)

class HopperPhysics(mujoco_env.MujocoPhysics): ...
class HopperTask(mujoco_env.MujocoTask): ...
```
the content in **HopperPhysics** and **HopperTask** are just copied from suite/hopper.py

### It works for several times but sometimes it goes wrong and gets error, and simulation getting stuck:
```
ERROR:absl:dm_control viewer intercepted an environment error.
Original message: 'NoneType' object has no attribute 'last'
dm_control viewer intercepted an environment error.
Original message: 'NoneType' object has no attribute 'last'
Traceback:
File ""/Users/kjaebye/opt/miniconda3/envs/mjctest/lib/python3.9/site-packages/dm_control/viewer/runtime.py"", line 256, in _step
finished = self._time_step.last()
```
Can anyone explain this? Many thanks."
How to measure acceleration values of each moving objects?,"Hi, 

I want to get the each acceleration values of some moving objects.

When we get the position and velocity, we use `data.xpos`, `data.qpos`, `data.qvel`,

but how about the acceleration??

Is it possible to get the values?

Thank you in advance."
Getting started with interactive viewer,"I'm new to mujoco and I wish to run my robot model in an interactive viewer.
In various posts I encountered, it is recommended to use mujoco's `simulate` utility, however, to my understanding, `simulate` will not allow me full programmable control of my robots (e.g., applying external forces).

I guess I should use `dm_control.viewer.launch(env)`, but this requires building a `composer.Environment` object as well as defining a `Task`, which seem pretty complex.
Is there sample code showing how to generate a simple `Environment` object? Alternatively, is there an easier way to get started with interactive viewer?"
Insights on solving Quadruped?,"Hi
I'm trying to reproduce your results on the Quadruped fetch task (as show in your README file [here](https://github.com/deepmind/dm_control/blob/644b3c6844cafd611cb2dfe82bc68bb6aed97292/dm_control/suite/README.md))
I went through the [provided paper](https://arxiv.org/abs/1806.06920), but couldn't find hyperparameters/learning curve for this task; I assume you introduced the fetch task after the paper was published.

Any ideas would be of great help for me!"
PyMJCF reorders actuators,"MuJoCo and PyMJCF behaviors don't match.

When this XML string is compiled with `mujoco`, an error is thrown, which is the expected behavior:

> ""ValueError: Error: stateless actuators must come before stateful actuators""

```python
model = """"""
<mujoco>
    <worldbody>
      <body name=""sphere"">
        <joint name=""hinge1""/>
        <joint name=""hinge2"" axis=""0 1 0""/>
        <geom name=""sphere"" size=""1""/>
      </body>
    </worldbody>
    <actuator>
      <general name=""stateful"" joint=""hinge1"" dyntype=""filter"" dynprm=""1""/>
      <general name=""stateless"" joint=""hinge2"" dyntype=""none""/>
    </actuator>
</mujoco>
""""""

# Compile with MuJoCo.
physics = mujoco.Physics.from_xml_string(model)  # Throws error.
```

However, compilation via `mjcf` works because pymjcf will reorder the actuators:
```python
# Compile with PyMJCF.
mjcf_model = mjcf.from_xml_string(model)
physics = mjcf.Physics.from_mjcf_model(mjcf_model)  # No error thrown here.
```
Calling `mjcf_model.to_xml_string()` will reveal reordered actuators:
```
<mujoco model=""unnamed_model"">
  <default>
    <default class=""/""/>
  </default>
  <worldbody>
    <body name=""sphere"">
      <joint name=""hinge1"" class=""/""/>
      <joint name=""hinge2"" class=""/"" axis=""0 1 0""/>
      <geom name=""sphere"" class=""/"" size=""1""/>
    </body>
  </worldbody>
  <actuator>
    <general name=""stateless"" class=""/"" joint=""hinge2"" dyntype=""none""/>
    <general name=""stateful"" class=""/"" joint=""hinge1"" dyntype=""filter"" dynprm=""1""/>
  </actuator>
</mujoco>
```

Moreover, PyMJCF will reorder the actuators even when the ""actually_stateful"" actuator is made stateful by inheriting `dyntype` from defaults (MuJoCo, on the other hand, will correctly recognize this actuator as stateful and will compile the model correctly and preserve the order of actuators):
```python
model = """"""
<mujoco>
    <default>
      <default class=""state"">
        <general dyntype=""filter"" dynprm=""1""/>
      </default>
    </default>
    <worldbody>
      <body name=""sphere"">
        <joint name=""hinge1""/>
        <joint name=""hinge2"" axis=""0 1 0""/>
        <geom name=""sphere"" size=""1""/>
      </body>
    </worldbody>
    <actuator>
      <general name=""stateful"" joint=""hinge1"" dyntype=""filter"" dynprm=""1""/>
      <general name=""actually_stateful"" class=""state"" joint=""hinge2""/>
    </actuator>
</mujoco>
""""""

# Compile with PyMJCF.
mjcf_model = mjcf.from_xml_string(model)
physics = mjcf.Physics.from_mjcf_model(mjcf_model)  # Still reorders stateful actuators.
```
Calling `mjcf_model.to_xml_string()`:
```
<mujoco model=""unnamed_model"">
  <default>
    <default class=""/"">
      <default class=""state"">
        <general dyntype=""filter"" dynprm=""1""/>
      </default>
    </default>
  </default>
  <worldbody>
    <body name=""sphere"">
      <joint name=""hinge1"" class=""/""/>
      <joint name=""hinge2"" class=""/"" axis=""0 1 0""/>
      <geom name=""sphere"" class=""/"" size=""1""/>
    </body>
  </worldbody>
  <actuator>
    <general name=""actually_stateful"" class=""state"" joint=""hinge2""/>
    <general name=""stateful"" class=""/"" joint=""hinge1"" dyntype=""filter"" dynprm=""1""/>
  </actuator>
</mujoco>
```"
mujoco.FatalError in Ubuntu 18.04.5 ,"when i run memory_maze i met a Error below:
`/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/glfw/__init__.py:912: GLFWError: (65544) b'X11: The DISPLAY environment variable is missing'
  warnings.warn(message, GLFWError)
/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/glfw/__init__.py:912: GLFWError: (65537) b'The GLFW library is not initialized'
  warnings.warn(message, GLFWError)
Traceback (most recent call last):
  File ""/home/DQC/demo/test.py"", line 4, in <module>
    env = gym.make('dmc_memory_maze:MemoryMaze-9x9-v0')
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/gym/envs/registration.py"", line 640, in make
    env = env_creator(**_kwargs)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dmc_memory_maze-0.2.0-py3.7.egg/dmc_memory_maze/__init__.py"", line 17, in _make_gym_env
    dmenv = dm_task(**kwargs)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dmc_memory_maze-0.2.0-py3.7.egg/dmc_memory_maze/tasks.py"", line 25, in memory_maze_9x9
    return _memory_maze(9, 3, 250, **kwargs)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dmc_memory_maze-0.2.0-py3.7.egg/dmc_memory_maze/tasks.py"", line 105, in _memory_maze
    strip_singleton_obs_buffer_dim=True)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/composer/environment.py"", line 331, in __init__
    delayed_observation_padding=delayed_observation_padding)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/composer/environment.py"", line 221, in __init__
    self._recompile_physics_and_update_observables()
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/composer/environment.py"", line 243, in _recompile_physics_and_update_observables
    self._observation_updater.reset(self._physics_proxy, self._random_state)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/composer/observation/updater.py"", line 165, in reset
    enabled.observation_callable())
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/composer/observation/observable/mjcf.py"", line 273, in get_observation
    render_flag_overrides=self._render_flag_overrides)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 220, in render
    scene_callback=scene_callback)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 694, in __init__
    if self._physics.contexts.mujoco is not None:
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 525, in contexts
    self._make_rendering_contexts()
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 511, in _make_rendering_contexts
    mujoco_context = wrapper.MjrContext(self.model, render_context)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/mujoco/wrapper/core.py"", line 606, in __init__
    ptr = ctx.call(mujoco.MjrContext, model.ptr, font_scale)
  File ""/home/DQC/anaconda3/envs/test/lib/python3.7/site-packages/dm_control/_render/executor/render_executor.py"", line 136, in call
    return func(*args, **kwargs)
mujoco.FatalError: an OpenGL platform library has not been loaded into this process, this most likely means that a valid OpenGL context has not been created before mjr_makeContext was called`"
Regarding the setting of sphere parameters,"Hello, 

I have a question regarding the setting of sphere parameters.

I wanted to use Mujoco to simulate the pouring of marbles from a cup as shown in the first movie, 
and I have created the simulation shown below with a lot of help....!

https://user-images.githubusercontent.com/63595993/192478534-9feb97ac-95ee-47cb-9a39-6e3216c84c70.mp4

https://user-images.githubusercontent.com/63595993/192479910-049820dd-bd61-44f0-a736-1cec58d316cb.mov


Thanks to your many instructions, I was able to complete a rough simulation, but I think I still need to make minor tweaks.

Specifically, the problem is the difference that the simulation shows a **smooth** outflow from the **lower part** of the marble, while in reality the structure of the marble **collapses** and outflow occurs from the **upper** part of the marble.

I thought that the **friction coefficients** of the marbles and cups had something to do with this fine-tuning.
So I have changed the values of friction in geom, but there is no improvement.

I know this is a very detailed question, but I would like to know if there are other parameters that might be involved...!

Also, I read on [this site](https://mujoco.readthedocs.io/en/latest/XMLreference.html) that the values of sliding, torsional, and rolling friction can be changed friction of ""geom"", but is it possible to set the **static friction coefficient**?

Furthermore, I would like to adjust the value of the **surface hardness** of the marble, which seems to be related to it.

If there are any other values that I can change by myself, I would appreciate it if you could let me know.

Thank you in advance.

"
Illegal hardware instruction on Apple's ARM-64,"After installing `dm_control` in a conda environment the following command
`from dm_control import mujoco` gives `zsh: illegal hardware instruction  python3`

It seems that tensorflow has a similar issue due to Apple not supporting AVX instructions, is it a similar issue here?"
Find the real coordinate of the object,"Hi
I am trying to get the coordinates of different agent in the `dm_control ` environment. So far this is my attempt 
```
physics = mujoco.Physics.from_xml_string(*get_model_and_assets(""Humanoid-v2""))
with physics.reset_context():
    """"""Returns a copy of the generalized positions (system configuration).""""""
    position=physics.data.qpos[:]
    print(position.shape)
    """"""Returns a copy of the generalized velocities.""""""
    velocity=physics.data.qvel[:]
    print(velocity.shape)
    observation = np.concatenate([position, velocity]).ravel()
    
scene_option = mujoco.wrapper.core.MjvOption()
scene_option.flags[enums.mjtVisFlag.mjVIS_JOINT] = True
pixels = physics.render(scene_option=scene_option, camera_id=1, segmentation=True)
fig, ax = plt.subplots(1, 1)
ax.imshow(pixels[:,:,0])

ax.set_axis_off()
""""""Observations consist of an OrderedDict containing one or more NumPy arrays""""""
#PIL.Image.fromarray(pixels)
def xyz2pixels(xyz, camera_matrix):
    """""" Project 3D locations to pixel locations using the camera matrix """""" 
    #https://github.com/rinuboney/FPAC/blob/b918755d9137fcfb77f2a855db1d3c661444bdf0/utils.py
    xyzs = np.ones((xyz.shape[0], xyz.shape[1]+1))
    xyzs[:, :xyz.shape[1]] = xyz
    xs, ys, s = camera_matrix.dot(xyzs.T)
    return xs/s, ys/s


def gt_keypoints():
    """""" Extract 2D pixel locations of objects in the environment """"""
    camera_matrix = mujoco.Camera(physics, height=84, width=84, camera_id=1).matrix
    xyz = physics.named.data.geom_xpos.copy()
    box_pos = physics.named.data.geom_xpos['head']
    box_mat = physics.named.data.geom_xmat['head'].reshape(3, 3)
    box_size = physics.named.model.geom_size['head']
    offsets = np.array([-1, 1]) * box_size[:, None]
    xyz_local = np.stack(itertools.product(*offsets)).T
    print(f""local:{xyz_local}"")
    xyz_global = box_pos[:, None] + box_mat @ xyz_local  
    print(f""global:{xyz_global}"")  
    # # Camera matrices multiply homogenous [x, y, z, 1] vectors.
    corners_homogeneous = np.ones((4, xyz_global.shape[1]), dtype=float)
    corners_homogeneous[:3, :] = xyz_global
    u, v, z = camera_matrix @ corners_homogeneous
    # x and y are in the pixel coordinate system of the head.
    ax.plot(u/z,v/z,'m*')
    x = u / z
    y = v / z
    return xyz2pixels(xyz,camera_matrix)

x,y=gt_keypoints()
# Render the camera view and overlay the projected corner coordinates.

ax.plot(x,y,'r+')
plt.show()
```
There is an offset between the x ,y points and the [real image](https://i.postimg.cc/d008TwFD/Screen-Shot-2022-09-07-at-1-22-11-PM.png). Would anyone clarify how I can map these points exactly on the object?
"
Viewer renders flickering images,See https://github.com/microsoft/MoCapAct/issues/8
How to change the reward function in control suite,"Is it possible to change the reward function of an environment while the sim is running without creating an entirely new physics environment?

Any help would be appreciated. Thanks!"
Advice modeling simple block sliding on floor,"I'm getting started with dm_control and am trying to model a bare bones environment: a box sliding around a floor.
To do this, I adapted from [mujoco-worldgen](https://github.com/openai/mujoco-worldgen) just a box with 3 slide joints and corresponding actuators. I also use the floor arena and then edited down locomotion walker/target tasks to be as simple as possible.
XML here. Note that if I don't include joint armature = 1, then it immediately fails w/ `Nan, Inf or huge value in QACC at DOF 5` at time t=0.000. When I include it though, the box does not move.
```
<mujoco>  
	<compiler angle=""radian""/>
	<default>
    <joint armature=""1"" />
	</default>
	<worldbody>
		<body name=""agent"" pos=""0.2 0.2 0.4"">
      		<camera name=""fake_egocentric""  pos="".25 0 .11"" xyaxes=""0 -1 0 0 0 1"" fovy=""90"" />
			<joint axis=""1 0 0"" damping=""10"" name=""tx"" pos=""0 0 0"" type=""slide""></joint>
			<joint axis=""0 1 0"" damping=""10"" name=""ty"" pos=""0 0 0"" type=""slide""></joint>
			<joint axis=""0 0 1"" damping=""10000"" name=""tz"" pos=""0 0 0"" type=""slide""></joint>
			<joint axis=""0 0 1"" damping=""10""  name=""rz"" pos=""0 0 0"" type=""hinge""></joint>
			<geom name=""agent""  mass=""1"" pos=""0 0 0"" rgba=""0.52734375 0.8046875 0.9765625 1"" size=""0.2 0.2 0.2"" type=""box"" euler=""1.57 0 0""></geom>
		</body>
	</worldbody>
	<actuator>
		<motor name=""motortx"" gear=""100"" joint=""tx"" ></motor>
		<motor name=""motorty"" gear=""100"" joint=""ty""></motor>
		<motor name=""motorrz"" gear=""100"" joint=""rz""></motor>
	</actuator>
</mujoco>
```
Full zip of code is attached. 

[ice 2.zip](https://github.com/deepmind/dm_control/files/9504813/ice.2.zip)
"
Batched Environments (2022),"Hello,

Thank you so much for your work on this! I read some previous discussion on the topic in this forum, but I'm not sure if batched environments (i.e., multiple copies of the same environment running in parallel with a single .step() call) is available through the new Mujoco version and/or whether it is already usable in dm_control itself.

That would be very useful to many!

Thank you,

Pierluca"
help,"I am trying to simulate a chain of beads falling on cube. I get this error in simultate.exe when I run the following: ""mass and inertia of moving bodies must be larger than mjMINVAL""
```
<mujoco>
    <size nconmax=""6000"" njmax=""6000"" nstack=""50000000""/>
    <default>
        <default class='x'>
            <joint type=""hinge"" damping="".2"" stiffness=""1"" armature="".01"" limited=""true"" solimplimit=""0 .99 .01""/>
            <default class='y'>
                <geom type='sphere' mass='1' condim=""1"" friction="".7"" solimp="".9 .99 .003"" solref="".015 1""/>
            </default>
        </default>
    </default>
    <worldbody>
        <light name='top_light' pos='1 5 20'/>
        <light name='t_light' pos='5 1 10'/>
        <geom name='floor' type='plane' size='0 0 0.5' condim='3'/>
        <body>
        <freejoint/>
        <geom name='floor_box' size='1 1 1' type='box' pos='-1 0 1.5'/>
        </body>
        <body>
            <freejoint name='root'/>
            <body>
                <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                <geom name='link1' mass=""100"" size='0.2' class='y' pos='-4 0 3'/>
                <body>
                    <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                    <geom name='link2' mass=""50""size='0.2' class='y' pos='-3 0 3'/>
                    <body>
                        <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                        <geom name='link3' mass=""25"" size='0.2' class='y' pos='-2 0 3'/>
                        <body>
                            <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                            <geom name='link4' mass=""12"" size='0.2' class='y' pos='-1 0 3'/>
                            <body>
                                <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                                <geom name='link5' mass=""6"" size='0.2' class='y' pos='0 0 3'/>
                                <body>
                                    <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                                    <geom name='link6' mass=""3"" size='0.2' class='y' pos='1 0 3'/>
                                    <body>
                                        <joint axis=""0 1 0"" range=""-45 45"" class=""x""/>
                                        <geom name='link7' mass=""1"" size='0.2' class='y' pos='2 0 3'/>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
    </worldbody>
</mujoco>
```"
question,"Why doesn't my mesh object in this file fall onto the floor when loaded into simulate.exe? Why is the shadow from the top light shaped like a square instead of the silhouette of the mesh? (The mesh is blender's Suzanne monkey). What is the analogue of changing collision type from convex hull to mesh (in Blender)?
```
<mujoco>
    <compiler meshdir=""C:/Users/CHUCKY/Documents/programs/MuJoCo models/""/>
    <asset>
        <mesh name=""mnky"" file=""untitled.stl""/>
        <texture name=""grid"" type=""2d"" builtin=""checker"" width=""512"" height=""512"" rgb1="".1 .2 .3"" rgb2="".2 .3 .4""/>
        <material name=""grid"" texture=""grid"" texrepeat=""1 1"" texuniform=""true"" reflectance="".2""/>
    </asset>
    <worldbody>
        <light name=""top_light"" pos=""0 0 3""/>
        <geom name=""floor"" size=""0 0 .05"" type=""plane"" material=""grid"" condim=""3""/>
        <geom name=""monkey"" pos=""0 0 2"" type=""mesh"" mesh=""mnky""/>
    </worldbody>
</mujoco>
```
"
protobuf version conflict with tensorflow,Tensorflow 2.9.1 requires protobuf<=3.20.0 but dm_control requires protobuf>=3.20.1. How does deepmind internally even work on their AI systems with this going on? I don't understand.
cannot open .stl mesh files,"I tried to load this xml file in simulate.exe:
(my models are stored in the 'MuJoCo models' directory, including the stl file)
```
<mujoco> 
<compiler meshdir=""C:/Users/Nagaraju Chukkala/Documents/programs/MuJoCo models/""/>  
    <worldbody>  
        <geom name='monkey' type=""mesh"" />  
    </worldbody>  
</mujoco>
```
It says ""Error: mesh geom 'monkey' (id=0) must have valid meshid""
Also, where is the documentation for dm_control for python?"
Unify `EGL_DEVICE_ID` in `dm_control` with `MUJOCO_EGL_DEVICE_ID` in `mujoco`,"I'm using EGL backend for GPU rendering of mujoco environments. I am using `MUJOCO_EGL_DEVICE_ID` environment variable to select which GPU should run for rendering, but this has no effect. 

```
MUJOCO_GL=egl MUJOCO_EGL_DEVICE_ID=0 CUDA_VISIBLE_DEVICES=0 python run.py
MUJOCO_GL=egl MUJOCO_EGL_DEVICE_ID=1 CUDA_VISIBLE_DEVICES=1 python run.py
MUJOCO_GL=egl MUJOCO_EGL_DEVICE_ID=2 CUDA_VISIBLE_DEVICES=2 python run.py
...
```
and all the rendering happens in the first GPU (index 0):
```
[0] NVIDIA TITAN Xp | 29°C,   3 % |  2058 / 12196 MB | python(607M) python(86M) python(86M) python(86M) python(86M) python(86M) python(86M) python(86M)
[1] NVIDIA TITAN Xp | 29°C,  14 % |   987 / 12196 MB | python(521M)
[2] NVIDIA TITAN Xp | 29°C,   7 % |   987 / 12196 MB | python(521M)
[3] NVIDIA TITAN Xp | 28°C,   8 % |   987 / 12196 MB | python(521M)
[4] NVIDIA TITAN Xp | 29°C,   7 % |   987 / 12196 MB | python(521M)
[5] NVIDIA TITAN Xp | 26°C,   7 % |   987 / 12196 MB | python(521M)
[6] NVIDIA TITAN Xp | 30°C,   6 % |   987 / 12196 MB | python(521M)
[7] NVIDIA TITAN Xp | 28°C,   7 % |   987 / 12196 MB | python(521M)
```

I checked the code at https://github.com/deepmind/mujoco/blob/main/python/mujoco/egl/__init__.py#L35, and it seems the correct display was selected out of 8 available GPUs (telling from the debugger). Initialization is successful, but in the backend the designated GPU was not chosen.

* OS: Linux 20.04 focal LTS
* MuJoCo version: 2.1.0 (tried 2.2.x as well)
* EGL installation:
```
ii  libegl-dev:amd64                       1.3.2-1~ubuntu0.20.04.2               amd64        Vendor neutral GL dispatch library -- EGL development files
ii  libegl-mesa0:amd64                     21.2.6-0ubuntu0.1~20.04.2             amd64        free implementation of the EGL API -- Mesa vendor library
ii  libegl1:amd64                          1.3.2-1~ubuntu0.20.04.2               amd64        Vendor neutral GL dispatch library -- EGL support
ii  libegl1-mesa-dev:amd64                 21.2.6-0ubuntu0.1~20.04.2             amd64        free implementation of the EGL API -- development files
ii  libwayland-egl1:amd64                  1.18.0-1                              amd64        wayland compositor infrastructure - EGL library

ii  libopengl-dev:amd64                    1.3.2-1~ubuntu0.20.04.2               amd64        Vendor neutral GL dispatch library -- OpenGL development files
ii  libopengl0:amd64                       1.3.2-1~ubuntu0.20.04.2               amd64        Vendor neutral GL dispatch library -- OpenGL support
```
* python: `PyOpenGL==3.1.6` (latest)
* I'm using dm_control with mujoco==2.2.0 python bindings. (not mujoco_py)

<!--
**How to submit a good bug report**

- Are you sure this is a bug? If not, consider using the ""Ask for help"" or ""Feature request"" templates.

- Use a clear and descriptive title.

- Make it easy to reproduce the problem.

- Include a ***minimal*** model that demonstrates the problem. If the model is small, include it as inline XML. If it requires binary assets, attach it as a zip file.

- Include a screenshot or video, if relevant.

- Include the following context:
  - Operating system.
  - MuJoCo version (and if the bug is new, the version where it used to work).
  - For Python issues, what bindings are you using (i.e `mujoco`, `dm_control`, `mujoco-py`)?

-->"
Improve collision detection,"Hi, any suggestions on how to improve the collision in this case. Refer Picture. The small boxes sometimes sneak out of the large containers. I suppose this is some constraint solver issue, but not sure what. 

For the smaller boxes I have condim=6, conaffinity=contype=1 and friction = (0.9, 0.005, 0.0001). The script for the large container boxes is below.

![Screenshot from 2022-08-19 12-22-45](https://user-images.githubusercontent.com/8028739/185694128-f0f8ac9a-e283-46c6-952c-bf6bfc70ab71.png)

Here's my partial script for the boxes.

`<mujoco model=""standard_tote"">
    <compiler angle=""radian"" />
    <!-- <size njmax=""500"" nconmax=""100"" /> -->
    <visual>
      <global offheight=""960"" offwidth=""1280""/>
    </visual>

    <default>
      <!-- <joint damping="".3"" axis=""0 1 0""/> -->
      <geom type=""box"" condim=""4"" density=""10000""/>
      <default class=""wall"">
        <geom rgba="".5 .5 .5 1"" condim=""4"" density=""10000""/>
      </default>
    </default>

    <asset>
      <texture name=""skybox"" type=""skybox"" builtin=""gradient"" rgb1=""0.7 0.7 0.7"" rgb2=""0.9 0.9 0.9"" width=""100"" height=""100""/>
        <mesh name=""tote"" file=""tote.stl"" />
    </asset>
    <worldbody>
      <body name=""picking_tote"" pos=""-0.5 0 0"" quat=""0.7071068 0 0 0.7071068"">
        <joint name=""pick_tote""  axis=""0 1 0"" damping=""1"" limited=""true"" range=""-0.001 0.001"" frictionloss=""1""/>
        <geom name=""pick_tote_bottom"" size="".6 .37 .02"" pos=""0 0 0"" mass=""30""/>
        <geom name=""pick_tote_side1"" size="".01 .35 .29"" pos=""-.6  0 .3"" class=""wall""/>
        <geom name=""pick_tote_side2"" size="".01 .35 .29"" pos="".6 0 .3"" class=""wall""/>
        <geom name=""pick_tote_side3"" size="".6 .01 .29"" pos=""0 -.36 .3"" class=""wall""/>
        <geom name=""pick_tote_side4"" size="".6 .01 .29"" pos=""0 0.36 .3"" class=""wall""/>
      </body>

      <body name=""packing_tote"" pos=""0.5 0 0"" quat=""0.7071068 0 0 0.7071068"">
        <joint name=""pack_tote""  axis=""0 1 0"" damping=""1"" limited=""true"" range=""-0.001 0.001"" frictionloss=""1""/>
        <geom name=""pack_tote_bottom"" size="".6 .37 .01"" pos=""0 0 0"" mass=""30""/>
        <geom name=""pack_tote_side1"" size="".01 .35 .29"" pos=""-.6  0 .3"" class=""wall""/>
        <geom name=""pack_tote_side2"" size="".01 .35 .29"" pos="".6 0 .3"" class=""wall""/>
        <geom name=""pack_tote_side3"" size="".6 .01 .29"" pos=""0 -.36 .3"" class=""wall""/>
        <geom name=""pack_tote_side4"" size="".6 .01 .29"" pos=""0 0.36 .3"" class=""wall""/>
      </body>
    </worldbody>
</mujoco>
`"
Add missing walk task in Humanoid_CMU,"[Tassa et al., 2020, page 25, third paragraph from bottom](https://arxiv.org/abs/2006.12983) describes the Humanoid_CMU domain as having the `stand`, `walk` and `run` tasks -- however the `walk` task is missing."
FatalError when trying to use osmesa rendering,"I'm on Ubuntu 20.04 and dm_control version 1.0.5 I get the following error when running 
```
os.environ[""MUJOCO_GL""] = ""osmesa""
<environment boilerplate loading from suite and resetting>
env.physics.render()
```

```
mujoco.FatalError: an OpenGL platform library has not been loaded into this process, this most likely means that a valid OpenGL context has not been created before mjr_makeContext was called
```

I've made sure to install `libgl1-mesa-glx libosmesa6`. Any ideas what's happening here?"
"Humanoid_CMU stand, walk run with 2020 parameter values","How could I use the [2020 humanoid_CMU torques, kp and damping values](https://github.com/deepmind/dm_control/blob/4e1a35595124742015ae0c7a829e099a5aa100f5/dm_control/locomotion/walkers/cmu_humanoid.py#L423) for the [Humanoid_CMU](https://github.com/deepmind/dm_control/blob/main/dm_control/suite/humanoid_CMU.py#L108) stand, walk and run tasks?

Is there any way to do this that wouldn't require me manually changing the parameters in [humanoid_CMU.xml](https://github.com/deepmind/dm_control/blob/main/dm_control/suite/humanoid_CMU.xml)?"
"How to better avoid ""Error: free joint can only be used on top level"" when combining two models","I want to create separate xml files for robot,  object, arena and combine them together later.
Because all the objects are very similar, I decided to put all of them in one xml file. Each object are should move freely. 
Something like this:
```XML
<mujoco model=""objects"">
  <worldbody>
    <body >
      <freejoint/>
      <geom>
    </body>

    <body >
      <freejoint/>
      <geom>
    </body>
  </worldbody>
```

Then I use .attach to combine two models: modelArena.attach(modelObject)

But, this will create an outside <body that wraps all <body from modelObject.
Something like this:
```XML
<mujoco model=""arena>
  <worldbody>

<body name=""objects"">    
    <body>
          <freejoint/>
          <geom>
    </body>
    <body>
          <freejoint/>
          <geom>
    </body>
</body>
  </worldbody>
```
Then I will get a problem ""Error: free joint can only be used on top level"".

I know one solution would be to create xml file for each object individually and let the attachment frame add('freejoint').
But this is not very elegant, and it will create many redundant attributes (like <default, because each xml file has the same default setting) 

So is there any better way to achieve the same result? I tried to find a way to do without creating another <body that wraps all these but still haven't found one. Thanks!"
How do I attach a tendon to a floors.Floor() object?,"I try
```
class Task(composer.Task):
    def __init__(self, creature):
        ...
        self._arena = floors.Floor()
        self._arena.mjcf_model.add('tendon', ... )
```
And it gives me `ValueError: A <tendon> child already exists, please access it directly.`."
Wrong angles,"This is now my model looks in simulate:
![Screenshot from 2022-08-04 17-01-08](https://user-images.githubusercontent.com/33939307/182842107-5d2a7c61-70a3-4b74-93c2-33b6a8f999de.png)

This is how it looks when I import it with `mjcf.from_path(""tripod.xml"")` into the tutorial task:
![Screenshot from 2022-08-04 17-00-52](https://user-images.githubusercontent.com/33939307/182842348-8c7b3b2a-1b87-43ed-b891-fb0eda7b8a91.png)"
Can't add a mesh,"It's basically a copy of the tutorial. Everything renders, until I try to add a mesh. The mesh is there, and I can even load it with `physics = mujoco.Physics.from_xml_path(path)`, but not this way:

```
class Leg(object):
    """"""A 2-DoF leg with position actuators.""""""

    def __init__(self, length, rgba):
        self.model = mjcf.RootElement()
        self.model.compiler.meshdir = 'assets'

        # Defaults:
        self.model.default.joint.damping = 3
        self.model.default.joint.type = 'hinge'
        self.model.default.geom.type = 'capsule'
        self.model.default.geom.rgba = rgba

        # Assets:
        self.model.asset.add('mesh', name='part4', file='part4.stl')

        # Thigh:
        self.thigh = self.model.worldbody.add('body')
        self.hip = self.thigh.add('joint', axis=[0, 0, 1])
        self.thigh.add('geom', fromto=[0, 0, 0, length, 0, 0], size=[length / 4])
        self.thigh.add('geom', type='mesh', mesh='part4.stl')
```

```
  File ""/home/mel/miniconda3/envs/dm_control_tripod/lib/python3.10/site-packages/dm_control/mujoco/wrapper/core.py"", line 187, in _get_model_ptr_from_xml
    ptr = mujoco.MjModel.from_xml_string(xml_string, assets or {})
ValueError: Error: mesh 'unnamed_model/unnamed_model/part4.stl' not found in geom 3
Object name = unnamed_model/unnamed_model//unnamed_geom_1, id = 3, line = 44, column = -1

During handling of the above exception, another exception occurred:

...

  File ""/home/mel/miniconda3/envs/dm_control_tripod/lib/python3.10/site-packages/dm_control/mujoco/wrapper/core.py"", line 187, in _get_model_ptr_from_xml
    ptr = mujoco.MjModel.from_xml_string(xml_string, assets or {})
ValueError: Compile error raised by Mujoco; run again with --pymjcf_debug for additional debug information.
Error: mesh 'unnamed_model/unnamed_model/part4.stl' not found in geom 3
Object name = unnamed_model/unnamed_model//unnamed_geom_1, id = 3, line = 44, column = -1
<geom name=""unnamed_model/unnamed_model//unnamed_geom_1"" class=""unnamed_model/unnamed_model/"" type=""mesh"" mesh=""unnamed_model/unnamed_model/part4.stl""/>
```"
How can I control the number of CPU threads used by the environment?,"I notice that some environments in the DMControl suite may take more than one CPU thread.
For example, if we choose Domain_name=finger, Task_name=spin.

I run this task in a server with 40 threads Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz and 4 Titan XP. This task takes 8 threads when starting. Then it will take 3 CPU threads when train my agent. 

I run this task in a server with 32 threads Intel(R) Xeon(R) Gold 6137 CPU @ 3.90GHz and 4Titan RTX. This takes 12 threads when starting. Then it will take 12 CPUs threads as training.

And different tasks may take different threads. For example, if we start Domain_name=ball_in_cup, Task_name=catch, then it takes 16 threads as training.

It is a heavy computational burden if the task takes too much CPU resources.

So, how can  I control the number of CPU threads used by the environment of DMControl suite?

Thank you and best wishes.
"
How to know the physical meaning of each dimension of state space?,"I would like to write a wrapper for dm control environment and zero out some specific dimensions of the state. But I don't know the detailed physical meaning (i.e., position / velocity) of each individual dimension for each environment. I wonder where could I find these information?"
Frequency control for viewer using app.launch,"Hi, I am trying to have a policy for teleoperation. Something like this

class ManualPolicy:
    def __init__(self): self.action
    def update_action(self, a): self.action = a
    def __call__(self) return self.action

app.launch(environment_loader=env, policy=ManualPolicy())

(a key press would update action and a key release would clean the action(make it all zeros))

But I realize the simulator is running at a high frequency, between a key press and a key release, there could be so many steps, which makes it so hard for me to control the object using my keyboard. Ideally, for a quick press release, I hope to only have 1~2 steps.
I tried to find a way to lower the frequency but I didn't find one. Thanks!"
Failed building wheel for dm_control ,"I am getting a failed wheel build error when trying to install via pip.

```bash
...
File ""setup.py"", line 135, in run
          self.reinitialize_command('build_mjbindings',
      TypeError: Command.reinitialize_command() got an unexpected keyword argument 'inplace'
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  ERROR: Failed building wheel for dm_control
Failed to build dm_control
ERROR: Could not build wheels for dm_control, which is required to install pyproject.toml-based projects
```

Ubuntu 22.04 (5.15.0-41-generic)
Python 3.10.4

```bash
Package                Version
---------------------- -------------
absl-py                1.2.0
apturl                 0.5.2
blinker                1.4
Brlapi                 0.8.3
certifi                2020.6.20
chardet                4.0.0
click                  8.0.3
colorama               0.4.4
command-not-found      0.3
cryptography           3.4.8
cupshelpers            1.0
dbus-python            1.2.18
defer                  1.0.6
distro                 1.7.0
distro-info            1.1build1
dm-tree                0.1.7
glfw                   2.5.3
httplib2               0.20.2
idna                   3.3
imageio                2.19.5
importlib-metadata     4.6.4
jeepney                0.7.1
keyring                23.5.0
language-selector      0.1
launchpadlib           1.10.16
lazr.restfulclient     0.14.4
lazr.uri               1.0.6
louis                  3.20.0
macaroonbakery         1.3.1
more-itertools         8.10.0
mujoco                 2.2.1
mujoco-python-viewer   0.0.4
netifaces              0.11.0
numpy                  1.23.1
oauthlib               3.2.0
olefile                0.46
pexpect                4.8.0
Pillow                 9.0.1
pip                    22.0.2
protobuf               3.12.4
ptyprocess             0.7.0
pycairo                1.20.1
pycups                 2.0.1
PyGObject              3.42.0
PyJWT                  2.4.0
pymacaroons            0.13.0
PyNaCl                 1.5.0
PyOpenGL               3.1.6
pyparsing              2.4.7
pyRFC3339              1.1
python-apt             2.3.0+ubuntu2
python-dateutil        2.8.1
python-debian          0.1.43ubuntu1
pytz                   2022.1
pyxdg                  0.27
PyYAML                 5.4.1
reportlab              3.6.8
requests               2.25.1
SecretStorage          3.3.1
setuptools             59.6.0
six                    1.16.0
systemd-python         234
ubuntu-advantage-tools 27.9
ubuntu-drivers-common  0.0.0
ufw                    0.36.1
unattended-upgrades    0.1
urllib3                1.26.5
wadllib                1.3.6
wheel                  0.37.1
xdg                    5
xkit                   0.0.0
zipp                   1.0.0
```"
closes issue #323,
Valid values for `MUJOCO_GL` differ from the `mujoco` package.,"Valid values for the `MUJOCO_GL` environment variable in `dm_control` differ from those for the `mujoco` package. This causes problem when trying to disable rendering, see e.g. https://github.com/deepmind/mujoco/issues/379#issuecomment-1186286043."
viewer.launch -- Add support for reset-callback of policy,"Hello,

right now the `viewer.launch` function expects its policy parameter to be a function mapping observation to action.
When pressing the Return-key the environment resets but the policy might also have some state that should reset.
How can this functionality be added?

Right now the only workaround i could think of would be to explicitly padd time to the observation which seems a bit weird since it requires a modification of the environment itself.

Thank you!"
"Questions about ""The first tutorial focuses on the basic MuJoCo Python bindings"" in ""Getting Started""","Hello,

I would like to simulate the attached XML file ([mug-xml_obj.zip](https://github.com/deepmind/dm_control/files/9098780/mug-xml_obj.zip)) in MuJoCo using Python (dm_control).

So I was trying ""[The first tutorial focuses on the basic MuJoCo Python bindings](https://colab.research.google.com/github/deepmind/dm_control/blob/main/dm_control/mujoco/tutorial.ipynb)"" in [""Getting Started""](https://github.com/deepmind/mujoco#getting-started),
which you summarized in an easy to understand way.

However, when I run the following program, MuJoCo does not start up, although there is no error.
```
static_model = '/home/user/anaconda3/envs/robot/mug.xml'""""""
<mujoco>
  <worldbody>
    <light name=""top"" pos=""0 0 1""/>
    <geom name=""red_box"" type=""box"" size="".2 .2 .2"" rgba=""1 0 0 1""/>
    <geom name=""green_sphere"" pos="".2 .2 .2"" size="".1"" rgba=""0 1 0 1""/>
  </worldbody>
</mujoco>
""""""
physics = mujoco.Physics.from_xml_string(static_model)
pixels = physics.render()
PIL.Image.fromarray(pixels)
```


![image](https://user-images.githubusercontent.com/63595993/178647137-3a396360-2ae5-468b-a781-7b3f1b8f06ec.png)
#
How should I deal with this in order to display the above screen?

I am very sorry for repeatedly asking you related questions, but I would appreciate your cooperation.
"
Mujoco 2.0.0 with dm_control,"Hello,

I am working with another repository that needs Mujoco version 2.0.0 installed for it to work (as well as dm_control). I downloaded Mujoco 2.0.0 as well as the license from this [website](http://roboti.us/download.html) and put it in the .mujoco folder. I tested out mujoco out and it worked as expected.

However, when I install dm_control it automatically installs mujoco 2.2.0. How can I download Mujoco 2.0.0 with the dm_control library? I did install mujoco-py version 2.0.2.8 but for some reason, mujoco 2.0.0 isn't being detected.  Any help would be appreciated.
"
custom fluid dynamics: debugging,"I work on implementing a robotic fish simulator and **compare dynamics defined by mujoco and my own coded differential equations**. 
I wonder why the density of environment is 5000 in 
> https://github.com/deepmind/dm_control/blob/main/dm_control/suite/fish.xml

The basic workflow is that I import several .STL files as meshes in `fish.xml` file, and then I write custom dynamics equations in the Task(swim) class of in fish.py (which is I suppose is an analog of `mj_step1` of original mujoco callback)

```
def before_step(self, action, physics):
        with physics.reset_context():

            physics.named.data.qpos['slider'] = self.x 
            ...
```
Then the idea is that I code in python callback what was described.
> https://mujoco.readthedocs.io/en/latest/computation.html?highlight=fluid%20dynamics#passive-forces
I search for fluid dynamics model implementation in the **C source code**, but had some difficulties.


**p.s** suggestion: when I try to run a random policy, I have **dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_BADQACC** at the 1st timestep **WARNING:absl:Nan, Inf or huge value in QACC at DOF 0. The simulation is unstable. Time = 0.0010.** After logging, I found j2 joint acceleration is 145.81178703 too big, while 14.5 is fine, it would be nice to show the value as an error to the user.




"
"correct way to emulate servo motor (position, velocity, intvelocity...)","I write some simulation code that should mimic the robot fish swimming with servo motor
when I have `<intvelocity name=""dc_motor"" joint=""joint_tail"" gear=""1"" ctrlrange=""-10 10"" ctrllimited=""true""` in .XML file, I have an error
XML Error: Schema violation for mujoco 2.2.0 on ubuntu 20.04 downloaded from [https://github.com/deepmind/mujoco/releases/download/2.2.0/mujoco-2.2.0-linux-x86_64.tar.gz](https://github.com/deepmind/mujoco/releases/download/2.2.0/mujoco-2.2.0-linux-x86_64.tar.gz)

while in documentation it seems that it's the most realistic choice:
> https://mujoco.readthedocs.io/en/latest/XMLreference.html?highlight=intvelocity#actuator-intvelocity
**What is the proper way to emulate the servo motor?**

p.s for now i use `<position name=""dc_motor"" joint=""joint_tail"" gear=""10"" ctrlrange=""-10 10"" ctrllimited=""true"" kp=""5000""/>` with the high kp gain that I am not sure how to tune appart from trial and error.
"
I want to tilt the mag in Python.,"Hello,
I'd like to simulate tilting a cup with a ball in it.

Having been taught by [mujoco](https://github.com/deepmind/mujoco.git), 
I succeeded in tilting the cup directly with MuJoCo as shown in the video below.

https://user-images.githubusercontent.com/63595993/178091058-bb0f41e7-9b67-400d-972c-cb8b9929e72a.mp4

However, I'd like to do this through Python.
I've checked some of the code, but I'm a beginner and I'm not sure which program to use to start MuJoCo, which is why I asked the question.

Sorry for the trouble, but I'd like to know if there is a program that might be helpful in the simulation of tilting the cup.
Thank you in advance.
"
Unexpected interaction between between dm_control and JAX,"The order of importing `jax` and `dm_control` has a large effect on FPS.
I'm using `dm-control==1.0.3`, `jax==0.3.1` and `jaxlib==0.3.0+cuda11.cudnn82`

The script below reproduces the issue, with code adapted from https://github.com/ikostrikov/jaxrl/tree/main/jaxrl/wrappers

What should be the correct order of importing the libraries?

```
fast = True
if fast:
    from dm_control import suite
    import jax
else:
    import jax
    from dm_control import suite

from dm_env import specs
import numpy as np
from typing import Dict, Optional, OrderedDict
import copy
import gym
from gym import core, spaces



def dmc_spec2gym_space(spec):
    if isinstance(spec, OrderedDict):
        spec = copy.copy(spec)
        for k, v in spec.items():
            spec[k] = dmc_spec2gym_space(v)
        return spaces.Dict(spec)
    elif isinstance(spec, specs.BoundedArray):
        return spaces.Box(low=spec.minimum,
                          high=spec.maximum,
                          shape=spec.shape,
                          dtype=spec.dtype)
    elif isinstance(spec, specs.Array):
        return spaces.Box(low=-float('inf'),
                          high=float('inf'),
                          shape=spec.shape,
                          dtype=spec.dtype)
    else:
        raise NotImplementedError


class DMCEnv(core.Env):
    def __init__(self,
                 domain_name: str,
                 task_name: str,
                 task_kwargs: Optional[Dict] = {},
                 environment_kwargs=None):
        assert 'random' in task_kwargs, 'please specify a seed, for deterministic behaviour'

        self._env = suite.load(domain_name=domain_name,
                               task_name=task_name,
                               task_kwargs=task_kwargs,
                               environment_kwargs=environment_kwargs)
        self.action_space = dmc_spec2gym_space(self._env.action_spec())

        self.observation_space = dmc_spec2gym_space(
            self._env.observation_spec())

        self.seed(seed=task_kwargs['random'])

    def __getattr__(self, name):
        return getattr(self._env, name)

    def step(self, action):
        assert self.action_space.contains(action)

        time_step = self._env.step(action)
        reward = time_step.reward or 0
        done = time_step.last()
        obs = time_step.observation

        info = {}
        if done and time_step.discount == 1.0:
            info['TimeLimit.truncated'] = True

        return obs, reward, done, info

    def reset(self):
        time_step = self._env.reset()
        return time_step.observation


def make_env(env, seed):
    domain_name, task_name = env.split('-')
    env = DMCEnv(
        domain_name = domain_name,
        task_name   = task_name,
        task_kwargs = {'random': seed}
    )
    if isinstance(env.observation_space, gym.spaces.Dict):
        env = gym.wrappers.FlattenObservation(env)
    return env


env = make_env('humanoid-run', 42)
for t in range(10000):
    action = env.action_space.sample()
    next_state, reward, done, info = env.step(action)
```"
Bump lxml from 4.8.0 to 4.9.1,"Bumps [lxml](https://github.com/lxml/lxml) from 4.8.0 to 4.9.1.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/lxml/lxml/blob/master/CHANGES.txt"">lxml's changelog</a>.</em></p>
<blockquote>
<h1>4.9.1 (2022-07-01)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>A crash was resolved when using <code>iterwalk()</code> (or <code>canonicalize()</code>)
after parsing certain incorrect input.  Note that <code>iterwalk()</code> can crash
on <em>valid</em> input parsed with the same parser <em>after</em> failing to parse the
incorrect input.</li>
</ul>
<h1>4.9.0 (2022-06-01)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>GH#341: The mixin inheritance order in <code>lxml.html</code> was corrected.
Patch by xmo-odoo.</li>
</ul>
<h2>Other changes</h2>
<ul>
<li>
<p>Built with Cython 0.29.30 to adapt to changes in Python 3.11 and 3.12.</p>
</li>
<li>
<p>Wheels include zlib 1.2.12, libxml2 2.9.14 and libxslt 1.1.35
(libxml2 2.9.12+ and libxslt 1.1.34 on Windows).</p>
</li>
<li>
<p>GH#343: Windows-AArch64 build support in Visual Studio.
Patch by Steve Dower.</p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/lxml/lxml/commit/d01872ccdf7e1e5e825b6c6292b43e7d27ae5fc4""><code>d01872c</code></a> Prevent parse failure in new test from leaking into later test runs.</li>
<li><a href=""https://github.com/lxml/lxml/commit/d65e63229e8958bc08344a85cd3f09ceeef933c3""><code>d65e632</code></a> Prepare release of lxml 4.9.1.</li>
<li><a href=""https://github.com/lxml/lxml/commit/86368e9cf70a0ad23cccd5ee32de847149af0c6f""><code>86368e9</code></a> Fix a crash when incorrect parser input occurs together with usages of iterwa...</li>
<li><a href=""https://github.com/lxml/lxml/commit/50c276412880c1a3dde8a6d6c909e3ed8ef47e43""><code>50c2764</code></a> Delete unused Travis CI config and reference in docs (<a href=""https://github-redirect.dependabot.com/lxml/lxml/issues/345"">GH-345</a>)</li>
<li><a href=""https://github.com/lxml/lxml/commit/8f0bf2d158f2dd3f98d410c8a38fcd536fd11b53""><code>8f0bf2d</code></a> Try to speed up the musllinux AArch64 build by splitting the different CPytho...</li>
<li><a href=""https://github.com/lxml/lxml/commit/b9f7074430594b95824059eef931dfbb27a7645e""><code>b9f7074</code></a> Remove debug print from test.</li>
<li><a href=""https://github.com/lxml/lxml/commit/b224e0f69dde58425d1077e07d193d19d3f803a9""><code>b224e0f</code></a> Try to install 'xz' in wheel builds, if available, since it's now needed to e...</li>
<li><a href=""https://github.com/lxml/lxml/commit/897ebfa002fe5ec773ffe8851721047fedcc6928""><code>897ebfa</code></a> Update macOS deployment target version from 10.14 to 10.15 since 10.14 starts...</li>
<li><a href=""https://github.com/lxml/lxml/commit/853c9e9cbf1c82d1ad3c096362372a048108905e""><code>853c9e9</code></a> Prepare release of 4.9.0.</li>
<li><a href=""https://github.com/lxml/lxml/commit/d3f77e678a8394559331d27257714e8aa4b082f2""><code>d3f77e6</code></a> Add a test for <a href=""https://bugs.launchpad.net/lxml/+bug/1965070"">https://bugs.launchpad.net/lxml/+bug/1965070</a> leaving out the a...</li>
<li>Additional commits viewable in <a href=""https://github.com/lxml/lxml/compare/lxml-4.8.0...lxml-4.9.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=lxml&package-manager=pip&previous-version=4.8.0&new-version=4.9.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Add update method to GlfwWindow for compatibility with dm_robotics MoMa renderer,Adressing this issue https://github.com/deepmind/dm_robotics/issues/11.
Python logging altered on import,Importing dm_control modifies the standard python logging module. As far as I can tell this is done using Google's abseil. Abseil itself already moved away from this behaviour: https://github.com/abseil/abseil-py/issues/99. Can we do this too for dm_control?
Observation list ,"Does anyone happen to have a numbered list for the observation and actions found in the [control suite](https://github.com/deepmind/dm_control/blob/main/dm_control/suite/quadruped.py)?

Principally for reference thanks"
Bump numpy from 1.21.6 to 1.22.0,"Bumps [numpy](https://github.com/numpy/numpy) from 1.21.6 to 1.22.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/numpy/numpy/releases"">numpy's releases</a>.</em></p>
<blockquote>
<h2>v1.22.0</h2>
<h1>NumPy 1.22.0 Release Notes</h1>
<p>NumPy 1.22.0 is a big release featuring the work of 153 contributors
spread over 609 pull requests. There have been many improvements,
highlights are:</p>
<ul>
<li>Annotations of the main namespace are essentially complete. Upstream
is a moving target, so there will likely be further improvements,
but the major work is done. This is probably the most user visible
enhancement in this release.</li>
<li>A preliminary version of the proposed Array-API is provided. This is
a step in creating a standard collection of functions that can be
used across application such as CuPy and JAX.</li>
<li>NumPy now has a DLPack backend. DLPack provides a common interchange
format for array (tensor) data.</li>
<li>New methods for <code>quantile</code>, <code>percentile</code>, and related functions. The
new methods provide a complete set of the methods commonly found in
the literature.</li>
<li>A new configurable allocator for use by downstream projects.</li>
</ul>
<p>These are in addition to the ongoing work to provide SIMD support for
commonly used functions, improvements to F2PY, and better documentation.</p>
<p>The Python versions supported in this release are 3.8-3.10, Python 3.7
has been dropped. Note that 32 bit wheels are only provided for Python
3.8 and 3.9 on Windows, all other wheels are 64 bits on account of
Ubuntu, Fedora, and other Linux distributions dropping 32 bit support.
All 64 bit wheels are also linked with 64 bit integer OpenBLAS, which should fix
the occasional problems encountered by folks using truly huge arrays.</p>
<h2>Expired deprecations</h2>
<h3>Deprecated numeric style dtype strings have been removed</h3>
<p>Using the strings <code>&quot;Bytes0&quot;</code>, <code>&quot;Datetime64&quot;</code>, <code>&quot;Str0&quot;</code>, <code>&quot;Uint32&quot;</code>,
and <code>&quot;Uint64&quot;</code> as a dtype will now raise a <code>TypeError</code>.</p>
<p>(<a href=""https://github-redirect.dependabot.com/numpy/numpy/pull/19539"">gh-19539</a>)</p>
<h3>Expired deprecations for <code>loads</code>, <code>ndfromtxt</code>, and <code>mafromtxt</code> in npyio</h3>
<p><code>numpy.loads</code> was deprecated in v1.15, with the recommendation that
users use <code>pickle.loads</code> instead. <code>ndfromtxt</code> and <code>mafromtxt</code> were both
deprecated in v1.17 - users should use <code>numpy.genfromtxt</code> instead with
the appropriate value for the <code>usemask</code> parameter.</p>
<p>(<a href=""https://github-redirect.dependabot.com/numpy/numpy/pull/19615"">gh-19615</a>)</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/numpy/numpy/commit/4adc87dff15a247e417d50f10cc4def8e1c17a03""><code>4adc87d</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/20685"">#20685</a> from charris/prepare-for-1.22.0-release</li>
<li><a href=""https://github.com/numpy/numpy/commit/fd66547557f57c430d41be2fc0764f74a62e8ccf""><code>fd66547</code></a> REL: Prepare for the NumPy 1.22.0 release.</li>
<li><a href=""https://github.com/numpy/numpy/commit/125304b035effcd82e366e601b102e7347eaa9ba""><code>125304b</code></a> wip</li>
<li><a href=""https://github.com/numpy/numpy/commit/c283859128b1a4b57014581570a23ed7950a24ea""><code>c283859</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/20682"">#20682</a> from charris/backport-20416</li>
<li><a href=""https://github.com/numpy/numpy/commit/5399c03d4a069fe81a1616be0184c9749d7271ee""><code>5399c03</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/20681"">#20681</a> from charris/backport-20954</li>
<li><a href=""https://github.com/numpy/numpy/commit/f9c45f8ebf31340b1a5a0371bfca25afcfc4794e""><code>f9c45f8</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/20680"">#20680</a> from charris/backport-20663</li>
<li><a href=""https://github.com/numpy/numpy/commit/794b36f7e1bf2a8c42774ab0db86a74bd32f674b""><code>794b36f</code></a> Update armccompiler.py</li>
<li><a href=""https://github.com/numpy/numpy/commit/d93b14e3d7abaa1d837825e51671f817788e120f""><code>d93b14e</code></a> Update test_public_api.py</li>
<li><a href=""https://github.com/numpy/numpy/commit/7662c0789cc6a70d5ad4d950ee2e95f3afef7df6""><code>7662c07</code></a> Update <strong>init</strong>.py</li>
<li><a href=""https://github.com/numpy/numpy/commit/311ab52488a7d096ac3bc4c2de0fdae17ecd13ef""><code>311ab52</code></a> Update armccompiler.py</li>
<li>Additional commits viewable in <a href=""https://github.com/numpy/numpy/compare/v1.21.6...v1.22.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=numpy&package-manager=pip&previous-version=1.21.6&new-version=1.22.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
mujoco.Fatal.Error gladLoadGL in Ubuntu18.04,"Hi, I met an error similar to https://github.com/deepmind/dm_control/issues/283, but has different behaivor under Ubuntu18.04 and Ubuntu20.04.
In Ubuntu20.04, everything goes well in the docker created by the following Dockerfile and test file. But the error will arise when I change the OS from Ubuntu20.04 to Ubuntu18.04 in the Dockerfile:
[Dockerfile.dmc.txt](https://github.com/deepmind/dm_control/files/8937426/Dockerfile.dmc.txt)

test_file:
[test_dmc2gym_replay.py.txt](https://github.com/deepmind/dm_control/files/8937431/test_dmc2gym_replay.py.txt)

"
Noisy or unreadable images when rendering,"Hi!

In some instances (embodied algos in my case) the new mujoco rendering gives unreadable images after a little while, e.g. here's a grid of 3 views of the same body:
![image](https://user-images.githubusercontent.com/25529882/174338971-c160ff9e-0040-42f0-a52e-0b36fddbc0b0.png)

This occurs after a little while, i.e. the first images rendered are perfectly fine. 
I tried to narrow it down to a minimal reproductible example but I can't find a way to do it (sorry about that!)
When using the old bindings (mujoco-py and such) thiis issue disappears. 

I'm using `MUJOCO_GL=egl` and have installed glew in my conda (working on a cluster where I have no sudo access).

I'm working with either G100 or A100 GPUs, and using them for training and rendering. 
Also to mention: I'm running a bunch of envs in parallel (not multithrerad but multiprocessing) for fast collection of data.

Here is my conda env

```
# packages in environment at /fsx/users/vmoens/conda/envs/rl4:
#
# Name                    Version                   Build  Channel
_libgcc_mutex             0.1                 conda_forge    conda-forge
_openmp_mutex             4.5                       2_gnu    conda-forge
_tflow_select             2.3.0                       mkl
absl-py                   1.0.0              pyhd8ed1ab_0    conda-forge
aiohttp                   3.8.1            py39hb9d737c_1    conda-forge
aiosignal                 1.2.0              pyhd8ed1ab_0    conda-forge
ale-py                    0.7.5                    pypi_0    pypi
alsa-lib                  1.2.6.1              h7f98852_0    conda-forge
anyio                     3.6.1                    pypi_0    pypi
aom                       3.3.0                h27087fc_1    conda-forge
argon2-cffi               21.3.0             pyhd8ed1ab_0    conda-forge
argon2-cffi-bindings      21.2.0           py39hb9d737c_2    conda-forge
astor                     0.8.1              pyh9f0ad1d_0    conda-forge
asttokens                 2.0.5              pyhd8ed1ab_0    conda-forge
astunparse                1.6.3              pyhd8ed1ab_0    conda-forge
async-timeout             4.0.2              pyhd8ed1ab_0    conda-forge
atari-py                  0.2.9                    pypi_0    pypi
attr                      2.5.1                h166bdaf_0    conda-forge
attrs                     21.4.0             pyhd8ed1ab_0    conda-forge
autorom                   0.4.2                    pypi_0    pypi
autorom-accept-rom-license 0.4.2                    pypi_0    pypi
babel                     2.10.1                   pypi_0    pypi
backcall                  0.2.0              pyh9f0ad1d_0    conda-forge
backports                 1.0                        py_2    conda-forge
backports.functools_lru_cache 1.6.4              pyhd8ed1ab_0    conda-forge
beautifulsoup4            4.11.1             pyha770c72_0    conda-forge
blas                      1.0                         mkl
bleach                    5.0.0              pyhd8ed1ab_0    conda-forge
blinker                   1.4                        py_1    conda-forge
brotlipy                  0.7.0           py39hb9d737c_1004    conda-forge
bzip2                     1.0.8                h7f98852_4    conda-forge
c-ares                    1.18.1               h7f98852_0    conda-forge
ca-certificates           2022.5.18.1          ha878542_0    conda-forge
cachetools                5.2.0                    pypi_0    pypi
certifi                   2022.5.18.1              pypi_0    pypi
cffi                      1.15.0           py39h4bc2ebd_0    conda-forge
charset-normalizer        2.0.12             pyhd8ed1ab_0    conda-forge
click                     8.1.3            py39hf3d152e_0    conda-forge
cloudpickle               1.2.2                    pypi_0    pypi
configargparse            1.5.3                    pypi_0    pypi
cryptography              37.0.1           py39h9ce1e76_0
cudatoolkit               11.3.1               h2bc3f7f_2
cycler                    0.11.0                   pypi_0    pypi
cython                    0.29.30                  pypi_0    pypi
dbus                      1.13.6               h5008d03_3    conda-forge
debugpy                   1.6.0            py39h5a03fae_0    conda-forge
decorator                 4.4.2                    pypi_0    pypi
defusedxml                0.7.1              pyhd8ed1ab_0    conda-forge
dm-control                1.0.3.post1              pypi_0    pypi
dm-env                    1.5                      pypi_0    pypi
dm-tree                   0.1.7                    pypi_0    pypi
elfutils                  0.186                he364ef2_0    conda-forge
entrypoints               0.4                pyhd8ed1ab_0    conda-forge
executing                 0.8.3              pyhd8ed1ab_0    conda-forge
expat                     2.4.8                h27087fc_0    conda-forge
fasteners                 0.17.3                   pypi_0    pypi
ffmpeg                    5.0.1                h964e5f1_2    conda-forge
fftw                      3.3.8           nompi_hfc0cae8_1114    conda-forge
flatten-dict              0.4.2                    pypi_0    pypi
flit-core                 3.7.1              pyhd8ed1ab_0    conda-forge
font-ttf-dejavu-sans-mono 2.37                 hab24e00_0    conda-forge
font-ttf-inconsolata      3.000                h77eed37_0    conda-forge
font-ttf-source-code-pro  2.038                h77eed37_0    conda-forge
font-ttf-ubuntu           0.83                 hab24e00_0    conda-forge
fontconfig                2.14.0               h8e229c2_0    conda-forge
fonts-conda-ecosystem     1                             0    conda-forge
fonts-conda-forge         1                             0    conda-forge
fonttools                 4.33.3                   pypi_0    pypi
freetype                  2.10.4               h0708190_1    conda-forge
freetype-py               2.3.0                    pypi_0    pypi
frozenlist                1.3.0            py39hb9d737c_1    conda-forge
functorch                 0.3.0a0+693bcee          pypi_0    pypi
gast                      0.4.0              pyh9f0ad1d_0    conda-forge
gettext                   0.19.8.1          h73d1719_1008    conda-forge
giflib                    5.2.1                h36c2ea0_2    conda-forge
glew                      2.1.0                h9c3ff4c_2    conda-forge
glew-osmesa               1.13.0.20151117               0    menpo
glfw                      2.5.3                    pypi_0    pypi
glfw3                     3.2.1                         0    menpo
gmp                       6.2.1                h58526e2_0    conda-forge
gnutls                    3.6.13               h85f3911_1    conda-forge
google-auth               2.6.6                    pypi_0    pypi
google-auth-oauthlib      0.4.6              pyhd8ed1ab_0    conda-forge
google-pasta              0.2.0              pyh8c360ce_0    conda-forge
grpcio                    1.46.3           py39h0f497a6_0    conda-forge
gst-plugins-base          1.20.2               hf6a322e_1    conda-forge
gstreamer                 1.20.2               hd4edc92_1    conda-forge
gym                       0.24.1                   pypi_0    pypi
gym-notices               0.0.6                    pypi_0    pypi
h5py                      2.10.0          nompi_py39h98ba4bc_106    conda-forge
hdf5                      1.10.6          nompi_h3c11f04_101    conda-forge
icu                       70.1                 h27087fc_0    conda-forge
idna                      3.3                pyhd8ed1ab_0    conda-forge
imageio                   2.19.3                   pypi_0    pypi
imageio-ffmpeg            0.4.7                    pypi_0    pypi
importlib-metadata        4.11.4           py39hf3d152e_0    conda-forge
importlib_resources       5.7.1              pyhd8ed1ab_1    conda-forge
iniconfig                 1.1.1                    pypi_0    pypi
intel-openmp              2021.4.0          h06a4308_3561
ipykernel                 6.13.0                   pypi_0    pypi
ipython                   8.4.0            py39hf3d152e_0    conda-forge
ipython-genutils          0.2.0                    pypi_0    pypi
ipython_genutils          0.2.0                      py_1    conda-forge
ipywidgets                7.7.0              pyhd8ed1ab_0    conda-forge
jack                      1.9.18            h8c3723f_1002    conda-forge
jedi                      0.18.1           py39hf3d152e_1    conda-forge
jinja2                    3.1.2              pyhd8ed1ab_1    conda-forge
jpeg                      9e                   h166bdaf_1    conda-forge
json-c                    0.16                 hc379101_0    conda-forge
json5                     0.9.8                    pypi_0    pypi
jsonschema                4.5.1                    pypi_0    pypi
jupyter                   1.0.0            py39hf3d152e_7    conda-forge
jupyter-client            7.3.1                    pypi_0    pypi
jupyter-server            1.17.0                   pypi_0    pypi
jupyter_client            7.3.4              pyhd8ed1ab_0    conda-forge
jupyter_console           6.4.3              pyhd8ed1ab_0    conda-forge
jupyter_core              4.10.0           py39hf3d152e_0    conda-forge
jupyterlab                3.4.2                    pypi_0    pypi
jupyterlab-server         2.14.0                   pypi_0    pypi
jupyterlab_pygments       0.2.2              pyhd8ed1ab_0    conda-forge
jupyterlab_widgets        1.1.0              pyhd8ed1ab_0    conda-forge
keras-preprocessing       1.1.2              pyhd8ed1ab_0    conda-forge
keyutils                  1.6.1                h166bdaf_0    conda-forge
kiwisolver                1.4.2                    pypi_0    pypi
krb5                      1.19.3               h3790be6_0    conda-forge
labmaze                   1.0.5                    pypi_0    pypi
lame                      3.100             h7f98852_1001    conda-forge
lcms2                     2.12                 hddcbb42_0    conda-forge
ld_impl_linux-64          2.36.1               hea4e1c9_2    conda-forge
lerc                      3.0                  h9c3ff4c_0    conda-forge
libarchive                3.5.2                hb890918_2    conda-forge
libcap                    2.64                 ha37c62d_0    conda-forge
libclang                  14.0.4          default_h2e3cab8_0    conda-forge
libclang13                14.0.4          default_h3a83d3e_0    conda-forge
libcups                   2.3.3                hf5a7f15_1    conda-forge
libcurl                   7.83.1               h7bff187_0    conda-forge
libdb                     6.2.32               h9c3ff4c_0    conda-forge
libdeflate                1.10                 h7f98852_0    conda-forge
libdrm                    2.4.109              h7f98852_0    conda-forge
libdrm-cos6-x86_64        2.4.65                        4    anaconda
libedit                   3.1.20191231         he28a2e2_2    conda-forge
libev                     4.33                 h516909a_1    conda-forge
libevent                  2.1.10               h9b69904_4    conda-forge
libffi                    3.4.2                h7f98852_5    conda-forge
libflac                   1.3.4                h27087fc_0    conda-forge
libgcc-ng                 12.1.0              h8d9b700_16    conda-forge
libgfortran-ng            7.5.0               h14aa051_20    conda-forge
libgfortran4              7.5.0               h14aa051_20    conda-forge
libglib                   2.70.2               h174f98d_4    conda-forge
libglu                    9.0.0             he1b5a44_1001    conda-forge
libgomp                   12.1.0              h8d9b700_16    conda-forge
libiconv                  1.16                 h516909a_0    conda-forge
libllvm14                 14.0.4               he0ac6c6_0    conda-forge
libmicrohttpd             0.9.75               h7f98852_0    conda-forge
libnghttp2                1.47.0               h727a467_0    conda-forge
libnsl                    2.0.0                h7f98852_0    conda-forge
libogg                    1.3.4                h7f98852_1    conda-forge
libopus                   1.3.1                h7f98852_1    conda-forge
libpciaccess              0.16                 h516909a_0    conda-forge
libpng                    1.6.37               h21135ba_2    conda-forge
libpq                     14.3                 hd77ab85_0    conda-forge
libprotobuf               3.20.1               h6239696_0    conda-forge
libsndfile                1.0.31               h9c3ff4c_1    conda-forge
libsodium                 1.0.18               h36c2ea0_1    conda-forge
libssh2                   1.10.0               ha56f1ee_2    conda-forge
libstdcxx-ng              12.1.0              ha89aaad_16    conda-forge
libtiff                   4.3.0                h0fcbabc_4    conda-forge
libtool                   2.4.6             h9c3ff4c_1008    conda-forge
libuuid                   2.32.1            h7f98852_1000    conda-forge
libva                     2.14.0               h7f98852_0    conda-forge
libvorbis                 1.3.7                h9c3ff4c_0    conda-forge
libvpx                    1.11.0               h9c3ff4c_3    conda-forge
libwebp                   1.2.2                h3452ae3_0    conda-forge
libwebp-base              1.2.2                h7f98852_1    conda-forge
libx11-common-cos6-x86_64 1.6.4                         4    anaconda
libx11-cos6-x86_64        1.6.4                         4    anaconda
libxcb                    1.13              h7f98852_1004    conda-forge
libxkbcommon              1.0.3                he3ba5ed_0    conda-forge
libxml2                   2.9.14               h22db469_0    conda-forge
libzlib                   1.2.12               h166bdaf_0    conda-forge
lockfile                  0.12.2                   pypi_0    pypi
lxml                      4.8.0                    pypi_0    pypi
lz4-c                     1.9.3                h9c3ff4c_1    conda-forge
lzo                       2.10              h516909a_1000    conda-forge
markdown                  3.3.7              pyhd8ed1ab_0    conda-forge
markupsafe                2.1.1            py39hb9d737c_1    conda-forge
matplotlib                3.5.2                    pypi_0    pypi
matplotlib-inline         0.1.3              pyhd8ed1ab_0    conda-forge
mesa-libgl-cos6-x86_64    11.0.7                        4    anaconda
mesalib                   21.2.5               h0e4506f_3    conda-forge
mistune                   0.8.4           py39h3811e60_1005    conda-forge
mj-envs                   1.0.0                     dev_0    <develop>
mjrl                      0.1.1                     dev_0    <develop>
mkl                       2021.4.0           h06a4308_640
mkl-service               2.4.0            py39h7e14d7c_0    conda-forge
mkl_fft                   1.3.1            py39h0c7bc48_1    conda-forge
mkl_random                1.2.2            py39hde0f152_0    conda-forge
moviepy                   1.0.3                    pypi_0    pypi
mujoco                    2.2.0                    pypi_0    pypi
mujoco-py                 2.0.2.2                   dev_0    <develop>
multidict                 6.0.2            py39hb9d737c_1    conda-forge
mysql-common              8.0.29               haf5c9bc_1    conda-forge
mysql-libs                8.0.29               h28c427c_1    conda-forge
nbclassic                 0.3.7                    pypi_0    pypi
nbclient                  0.6.3                    pypi_0    pypi
nbconvert                 6.5.0              pyhd8ed1ab_0    conda-forge
nbconvert-core            6.5.0              pyhd8ed1ab_0    conda-forge
nbconvert-pandoc          6.5.0              pyhd8ed1ab_0    conda-forge
nbformat                  5.4.0              pyhd8ed1ab_0    conda-forge
ncurses                   6.3                  h27087fc_1    conda-forge
nest-asyncio              1.5.5              pyhd8ed1ab_0    conda-forge
nettle                    3.6                  he412f7d_0    conda-forge
networkx                  2.8.3                    pypi_0    pypi
notebook                  6.4.11                   pypi_0    pypi
notebook-shim             0.1.0                    pypi_0    pypi
nspr                      4.32                 h9c3ff4c_1    conda-forge
nss                       3.78                 h2350873_0    conda-forge
numpy                     1.22.4                   pypi_0    pypi
numpy-base                1.22.3           py39hf524024_0
oauthlib                  3.2.0              pyhd8ed1ab_0    conda-forge
openh264                  2.1.1                h780b84a_0    conda-forge
openjpeg                  2.4.0                hb52868f_1    conda-forge
openssl                   1.1.1o               h166bdaf_0    conda-forge
opt_einsum                3.3.0              pyhd8ed1ab_1    conda-forge
osmesa                    12.2.2.dev                    0    menpo
packaging                 21.3               pyhd8ed1ab_0    conda-forge
pandas                    1.4.2                    pypi_0    pypi
pandoc                    2.18                 ha770c72_0    conda-forge
pandocfilters             1.5.0              pyhd8ed1ab_0    conda-forge
parso                     0.8.3              pyhd8ed1ab_0    conda-forge
patchelf                  0.14.5.0                 pypi_0    pypi
pcre                      8.45                 h9c3ff4c_0    conda-forge
pexpect                   4.8.0              pyh9f0ad1d_2    conda-forge
pickleshare               0.7.5                   py_1003    conda-forge
pillow                    9.1.1            py39hae2aec6_0    conda-forge
pip                       22.1.1             pyhd8ed1ab_0    conda-forge
pluggy                    1.0.0                    pypi_0    pypi
portaudio                 19.6.0               h57a0ea0_5    conda-forge
proglog                   0.1.10                   pypi_0    pypi
prometheus_client         0.14.1             pyhd8ed1ab_0    conda-forge
prompt-toolkit            3.0.29             pyha770c72_0    conda-forge
prompt_toolkit            3.0.29               hd8ed1ab_0    conda-forge
protobuf                  3.19.4                   pypi_0    pypi
psutil                    5.9.1            py39hb9d737c_0    conda-forge
pthread-stubs             0.4               h36c2ea0_1001    conda-forge
ptyprocess                0.7.0              pyhd3deb0d_0    conda-forge
pulseaudio                14.0                 h583eb01_5    conda-forge
pure_eval                 0.2.2              pyhd8ed1ab_0    conda-forge
py                        1.11.0                   pypi_0    pypi
pyasn1                    0.4.8                      py_0    conda-forge
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.21               pyhd8ed1ab_0    conda-forge
pygame                    2.1.2                    pypi_0    pypi
pyglet                    1.5.26                   pypi_0    pypi
pygments                  2.12.0             pyhd8ed1ab_0    conda-forge
pyjwt                     2.4.0              pyhd8ed1ab_0    conda-forge
pyopengl                  3.1.6                    pypi_0    pypi
pyopenssl                 22.0.0             pyhd8ed1ab_0    conda-forge
pyparsing                 2.4.7                    pypi_0    pypi
pyqt                      5.15.4           py39h18e9c17_1    conda-forge
pyqt5-sip                 12.9.0           py39h5a03fae_1    conda-forge
pyrender                  0.1.45                   pypi_0    pypi
pyrsistent                0.18.1           py39hb9d737c_1    conda-forge
pysocks                   1.7.1            py39hf3d152e_5    conda-forge
pytest                    7.1.2                    pypi_0    pypi
python                    3.9.13          h9a8a25e_0_cpython    conda-forge
python-dateutil           2.8.2              pyhd8ed1ab_0    conda-forge
python-fastjsonschema     2.15.3             pyhd8ed1ab_0    conda-forge
python-flatbuffers        2.0                pyhd8ed1ab_0    conda-forge
python_abi                3.9                      2_cp39    conda-forge
pytorch                   1.13.0.dev20220531 py3.9_cuda11.3_cudnn8.3.2_0    pytorch-nightly
pytorch-mutex             1.0                        cuda    pytorch-nightly
pytz                      2022.1                   pypi_0    pypi
pyu2f                     0.1.5              pyhd8ed1ab_0    conda-forge
pyyaml                    6.0                      pypi_0    pypi
pyzmq                     23.0.0                   pypi_0    pypi
qt-main                   5.15.4               ha5833f6_1    conda-forge
qtconsole                 5.3.1              pyhd8ed1ab_0    conda-forge
qtconsole-base            5.3.1              pyha770c72_0    conda-forge
qtpy                      2.1.0              pyhd8ed1ab_0    conda-forge
readline                  8.1                  h46c0cb4_0    conda-forge
requests                  2.27.1             pyhd8ed1ab_0    conda-forge
requests-oauthlib         1.3.1              pyhd8ed1ab_0    conda-forge
rsa                       4.8                pyhd8ed1ab_0    conda-forge
scipy                     1.8.1                    pypi_0    pypi
send2trash                1.8.0              pyhd8ed1ab_0    conda-forge
setuptools                62.3.2           py39hf3d152e_0    conda-forge
sip                       6.5.1            py39he80948d_2    conda-forge
six                       1.16.0             pyh6c4a22f_0    conda-forge
sk-video                  1.1.10                   pypi_0    pypi
sniffio                   1.2.0                    pypi_0    pypi
soupsieve                 2.3.2.post1              pypi_0    pypi
sqlite                    3.38.5               h4ff8645_0    conda-forge
stack_data                0.2.0              pyhd8ed1ab_0    conda-forge
submitit                  1.4.2                    pypi_0    pypi
svt-av1                   1.1.0                h27087fc_1    conda-forge
tensorboard               2.9.1                    pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.1              pyhd8ed1ab_0    conda-forge
tensorflow                2.4.1           mkl_py39h4683426_0
tensorflow-base           2.4.1           mkl_py39h43e0292_0
tensorflow-estimator      2.6.0            py39he80948d_0    conda-forge
termcolor                 1.1.0                      py_2    conda-forge
terminado                 0.15.0           py39hf3d152e_0    conda-forge
tinycss2                  1.1.1              pyhd8ed1ab_0    conda-forge
tk                        8.6.12               h27826a3_0    conda-forge
toml                      0.10.2             pyhd8ed1ab_0    conda-forge
tomli                     2.0.1                    pypi_0    pypi
torch-tb-profiler         0.4.0                    pypi_0    pypi
torchaudio                0.12.0.dev20220531      py39_cu113    pytorch-nightly
torchrl                   0.1                       dev_0    <develop>
torchvision               0.14.0.dev20220531      py39_cu113    pytorch-nightly
tornado                   6.1              py39hb9d737c_3    conda-forge
tqdm                      4.64.0                   pypi_0    pypi
traitlets                 5.2.1.post0              pypi_0    pypi
trimesh                   3.12.6                   pypi_0    pypi
typing-extensions         4.2.0                hd8ed1ab_1    conda-forge
typing_extensions         4.2.0              pyha770c72_1    conda-forge
tzdata                    2022a                h191b570_0    conda-forge
urllib3                   1.26.9             pyhd8ed1ab_0    conda-forge
wcwidth                   0.2.5              pyh9f0ad1d_2    conda-forge
webencodings              0.5.1                    pypi_0    pypi
websocket-client          1.3.2                    pypi_0    pypi
werkzeug                  2.1.2              pyhd8ed1ab_1    conda-forge
wheel                     0.37.1             pyhd8ed1ab_0    conda-forge
widgetsnbextension        3.6.0            py39hf3d152e_0    conda-forge
wrapt                     1.14.1           py39hb9d737c_0    conda-forge
x264                      1!161.3030           h7f98852_1    conda-forge
x265                      3.5                  h924138e_3    conda-forge
xorg-damageproto          1.2.1             h7f98852_1002    conda-forge
xorg-fixesproto           5.0               h7f98852_1002    conda-forge
xorg-glproto              1.4.17            h7f98852_1002    conda-forge
xorg-kbproto              1.0.7             h7f98852_1002    conda-forge
xorg-libx11               1.7.2                h7f98852_0    conda-forge
xorg-libxau               1.0.9                h7f98852_0    conda-forge
xorg-libxcursor           1.2.0                h7f98852_0    conda-forge
xorg-libxdamage           1.1.5                h7f98852_1    conda-forge
xorg-libxdmcp             1.1.3                h7f98852_0    conda-forge
xorg-libxext              1.3.4                h7f98852_1    conda-forge
xorg-libxfixes            5.0.3             h7f98852_1004    conda-forge
xorg-libxinerama          1.1.4             h9c3ff4c_1001    conda-forge
xorg-libxrandr            1.5.2                h7f98852_1    conda-forge
xorg-libxrender           0.9.10            h7f98852_1003    conda-forge
xorg-randrproto           1.5.0             h7f98852_1001    conda-forge
xorg-renderproto          0.11.1            h7f98852_1002    conda-forge
xorg-util-macros          1.19.3               h7f98852_0    conda-forge
xorg-xextproto            7.3.0             h7f98852_1002    conda-forge
xorg-xf86vidmodeproto     2.3.1             h7f98852_1002    conda-forge
xorg-xproto               7.0.31            h7f98852_1007    conda-forge
xz                        5.2.5                h516909a_1    conda-forge
yarl                      1.7.2            py39hb9d737c_2    conda-forge
zeromq                    4.3.4                h9c3ff4c_1    conda-forge
zipp                      3.8.0              pyhd8ed1ab_0    conda-forge
zlib                      1.2.12               h166bdaf_0    conda-forge
zstd                      1.5.2                h8a70e8d_1    conda-forge
```"
adding NAO humanoid robot as walker in locomotion soccer environment,"how to add new walker in locomotion soccer environments ?? 

used **quickstart** codebase

```
import numpy as np
from dm_control.locomotion import soccer as dm_soccer
env = dm_soccer.load(team_size=2,
                     time_limit=10.0,
                     disable_walker_contacts=False,
                     enable_field_box=True,
                     terminate_on_goal=False,
                     walker_type=dm_soccer.WalkerType.BOXHEAD)

action_specs = env.action_spec()
timestep = env.reset()
while not timestep.last():
  actions = []
  for action_spec in action_specs:
    action = np.random.uniform(
        action_spec.minimum, action_spec.maximum, size=action_spec.shape)
    actions.append(action)
  timestep = env.step(actions)
```



we will find that we have 3 types of walker [ ant, boxhead, humanoid ]

**tried to import my custom walker by changing xml paths in walkers src files [ ant.py, boxhead.py, humanoid.py]  and display it by explore.py but nothing changes.....**

my custom model is **NAO** robot ,I've been working on robot's xml  , by converting urdf file to xml file using compile.exe provided by **MuJoCo Pro version 2.00** , assets directory with dae files and stl files,  after compiling robot's xml works well on MuJoCo Pro

**NAO urdf file** from [https://github.com/ros-naoqi/nao_robot/blob/master/nao_description/urdf/naoV50_generated_urdf/nao.urdf](url)
"
No python file in mjbindings,"When I run render_test.py in ''/dm_control/mujoco'', I find there is no file naming constants, enums and sizes.

Some files have these codes，
from dm_control.mujoco.wrapper.mjbindings import constants
from dm_control.mujoco.wrapper.mjbindings import enums
from dm_control.mujoco.wrapper.mjbindings import sizes"
Headless display?,"I have 8 GPUs on a node and I guess only one of them has a head. So when I run a second job on them, I get a headless display error. The first job works fine.

Following that, I tried loading ""glew"" and now I'm getting this output:

```
[2022-06-01 23:18:45,712][HYDRA] MUJOCO_GL is not set, so an OpenGL backend will be chosen automatically.
[2022-06-01 23:18:45,786][HYDRA] Successfully imported OpenGL backend: glfw
[2022-06-01 23:18:46,023][HYDRA] MuJoCo library version is: 210
python3: /builds/florianrhiem/pyGLFW/glfw-3.3.4/src/posix_thread.c:64: _glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.
/var/spool/slurm/job11038422/slurm_script: line 25: 100365 Aborted 
```"
AttributeError: module 'OpenGL.EGL' has no attribute 'EGLDeviceEXT',".bashrc

```
export MUJOCO_GL=""egl""
export MJLIB_PATH=$HOME/.mujoco/mujoco200_linux/bin/libmujoco200.so
export MJKEY_PATH=$HOME/.mujoco/mujoco200_linux/mjkey.txt
```

So for whatever reason when I run deep mind control using dmc2gym I get this error when I set `MUJOCO_GL=""egl""`. When I don't set `MUJOCO_GL` I get this error instead.

```
GLFWError: (65542) b'GLX: GLX version 1.3 is required'
  warnings.warn(message, GLFWError)
CRITICAL:absl:GLEW initalization error: Missing GL version
CRITICAL:absl:OpenGL version 1.5 or higher required
CRITICAL:absl:OpenGL ARB_framebuffer_object required
CRITICAL:absl:OpenGL ARB_vertex_buffer_object required
```
"
CRITICAL:absl:Expired activation key,"I installed MuJoCo200 and it's key from https://roboti.us/index.html, because I'm using dmc2gym and I get the error `CRITICAL:absl:Expired activation key` and `dm_control.mujoco.wrapper.core.Error: Could not register license`. I'm installing on Ubuntu. I really have no idea why this is happening. 
"
CentOS7 Cannot initialize a headless EGL display.," File ""src/train.py"", line 14, in <module>
    from env import make_env
  File ""/home/wjg/code/src/env.py"", line 5, in <module>
    from dm_control import suite
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/suite/__init__.py"", line 24, in <module>
    from dm_control.suite import acrobot
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/suite/acrobot.py"", line 20, in <module>
    from dm_control import mujoco
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/mujoco/engine.py"", line 41, in <module>
    from dm_control import _render
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/_render/__init__.py"", line 67, in <module>
    Renderer = import_func()  # pylint: disable=invalid-name
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/_render/__init__.py"", line 36, in _import_egl
    from dm_control._render.pyopengl.egl_renderer import EGLContext
  File ""/home/wjg/anaconda3/envs/tdmpc/lib/python3.8/site-packages/dm_control/_render/pyopengl/egl_renderer.py"", line 75, in <module>
    raise ImportError('Cannot initialize a headless EGL display.')
ImportError: Cannot initialize a headless EGL display.


**Is this due to the system?**"
Path issues with Mujoco ,"I installed dm_control using pip and I was attempting to try it out with [this repository](https://github.com/danijar/dreamerv2). When I ran this command: `python3 dreamerv2/train.py --logdir ~/logdir/dmc_walker_walk/dreamerv2/1 \
  --configs dmc_vision --task dmc_walker_walk`

I get this error: `OSError: Cannot find MuJoCo library at /home/*home folder*/.mujoco/mujoco200/bin/libmujoco200.dylib.`

I found this [issue](https://github.com/deepmind/dm_control/issues/122)  and tried following the steps outlined in [this](https://github.com/deepmind/dm_control/issues/122#issuecomment-568791401) post, but for some reason I still get that same error. 

Would appreciate if anyone could take a look at let me know what the issue is.  
"
python: /builds/florianrhiem/pyGLFW/glfw-3.3.7/src/posix_thread.c:64: _glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.,"Getting this error 

python: /builds/florianrhiem/pyGLFW/glfw-3.3.7/src/posix_thread.c:64: _glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.

when it gets to the `env.render()` function. Not sure what to do.

```
import dmc2gym

env = dmc2gym.make(domain_name='point_mass', task_name='easy', seed=1)

done = False
obs = env.reset()
while not done:
  action = env.action_space.sample()
  obs, reward, done, info = env.step(action)
  rgb_obs = env.render(mode='rgb_array')
```

I see the issue posted on MuJoCo 
https://github.com/deepmind/mujoco/issues/215
The weird thing is `python -c ""import mujoco_py""` is running fine but not DMC.

**Specifications:**
- MuJoCo200
- Ubuntu
- Python 3.6"
[Enhancement] Type Hints,"Would be great to have type hints for the entire code, especially for `mjcf` and `composer`."
How to compute the gradient of reward w.r.t. torso mass?,"I want to construct a neural network in pytorch which outputs appropriate values of mujoco model parameters. But this requires that mujoco model parameters are converted into pytorch tensors , and mujoco environments run well with these converted model parameters, and compute the gradient of reward w.r.t the mujoco model parameters.
Anyone know how to achieve this goal?"
How to change mujoco model parameters to pytorch tensors?,I want to construct a neural network in pytorch which outputs appropriate values of mujoco model parameters. But this requires that mujoco model parameters are converted into pytorch tensors and mujoco environments run well with these converted model parameters. I don't know how to achieve this goal. Anyone know how to do that?
CMUwalker can not be run,"Hi, the cmuwalker example from ipythonnotebook I got error on my side:

```
dm_control viewer intercepted an environment error.
Original message: operands could not be broadcast together with shapes (3,) (2,)
```

Here is the main func:

```
def cmu_walker():
    walker = cmu_humanoid.CMUHumanoidPositionControlledV2020(
        observable_options={""egocentric_camera"": dict(enabled=True)}
    )
    arena = corridor_arenas.WallsCorridor(
        wall_gap=3,
        wall_width=distributions.Uniform(2, 3),
        wall_height=distributions.Uniform(0.5, 1.5),
        corridor_width=4,
        corridor_length=30,
    )
    task = corridor_tasks.RunThroughCorridor(
        walker=walker,
        arena=arena,
        walker_spawn_position=(0.5, 0),
        target_velocity=3.0,
        physics_timestep=0.005,
        control_timestep=0.03,
    )
    env = composer.Environment(
        task=task,
        time_limit=10,
        random_state=np.random.RandomState(42),
        strip_singleton_obs_buffer_dim=True,
    )

    action_spec = env.action_spec()
    print(action_spec.shape)

    def random_policy(time_step):
        del time_step
        rp = np.random.uniform(
            low=action_spec.minimum, high=action_spec.maximum, size=action_spec.shape
        )
        print(rp.shape)
        return rp

    viewer.launch(env, policy=random_policy)
```

I don't know why the (3,) (2,) come frome, the control policy should be just (56)"
Egocentric visual renderings?,"I'm in a computer vision lab. We'd be interested in running some experiments using egocentric visual inputs. Right now, we can render environment with the `dm_control.suite.wrappers.pixels.Wrapper` wrapper but we're not sure how to position the camera so that it tracks from the quadruped/walker/humanoid's head. Is this possible?"
How to change color of JumpingBall mid-episode?,"I have a jumping ball instance as in[ jumping_ball.py ](https://github.com/deepmind/dm_control/blob/4e1a35595124742015ae0c7a829e099a5aa100f5/dm_control/locomotion/walkers/jumping_ball.py#L28)that reads in an .xml file with texture field like
`<texture name=""body"" type=""cube"" builtin=""checker"" rgb1=""1.0 .1 .1"" rgb2="".5 0.1 0.5"" width=""100"" height=""100""/>`. I attempt to change the rgb1 and rgb2 mid-episode by directly accessing the fields by
```
    self._mjcf_root.find('texture', 'body').rgb1 = np.array(new_rgb1)
    self._mjcf_root.find('texture', 'body').rgb2 = np.array(new_rgb2)
```
But this doesn't actually change the color. How can this be done? "
Fix `cmu_mocap_data` import.,Minor fix to correctly import `cmu_mocap_data`.
how to read model with assets in dm_control?,"I try to load a custom model:

```
THIS_DIR = os.path.dirname(__file__)
# MODEL_XML_PATH = '/home//mujoco/model/humanoid/humanoid.xml'
# MODEL_XML_PATH = os.path.join(THIS_DIR, './models/humanoid_h36m/humanoid_h36m_v5.xml') 
MODEL_XML_PATH = 'models/mug/mug.xml'

def get_model_and_assets():
    """"""Returns a tuple containing the model XML string and a dict of assets.""""""
    # return common.read_model(MODEL_XML_PATH), common.ASSETS
    # return resources.GetResource(MODEL_XML_PATH), common.ASSETS
    return resources.GetResource(MODEL_XML_PATH), {}

```

It always gives me this error:

```
python3.9/site-packages/dm_control/mujoco/wrapper/core.py"", line 187, in _get_model_ptr_from_xml
    ptr = mujoco.MjModel.from_xml_string(xml_string, assets or {})
ValueError: Error: could not parse OBJ file 'mug.obj': 
Cannot open file [mug.obj]

Object name = mug, id = 0, line = 10, column = -1

```

I know it might because I need also assets to specific, but I don't know how to specific, is that assets is a dir which contains all my assets? (like stl, png, mesh etc.)

Any detailed examples? thanks!
"
how to load customized model from xml?,"Hi, how to load customized model from xml?"
Memory leak in MultiClipMocapTracking,"There appears to be a memory leak within the `MultiClipMocapTracking` environment. It's not that problematic when using a small number of clips, but the growth in memory is faster if you use a large amount of clips, such as the entire dataset. I can personally attest to eventually running out of RAM in some of my experiments.

Below is a small script that should reproduce the leak. The growth in memory becomes more obvious if you run this code in multiple terminals.

```python
from dm_control import composer
from dm_control.locomotion.arenas import floors
from dm_control.locomotion.mocap import cmu_mocap_data
from dm_control.locomotion.walkers import cmu_humanoid
from dm_control.locomotion.tasks.reference_pose import cmu_subsets
from dm_control.locomotion.tasks.reference_pose import tracking

walker = cmu_humanoid.CMUHumanoidPositionControlledV2020
arena = floors.Floor()
task = tracking.MultiClipMocapTracking(
    walker,
    arena,
    cmu_mocap_data.get_path_for_cmu(version='2020'),
    (1,2,3,4,5),
    cmu_subsets.ALL,
    min_steps=5,
    reward_type='comic'
)
env = composer.Environment(task=task)

while True:
    env.reset()
```

I do not see this leak happening if I replace the mocap-tracking task with the go-to-target task, so I think this issue is isolated to this particular task."
Mujoco install automatic?,"It's been a while since I checked in here. From the looks of the readme, it seems like there are a lot fewer steps tp getting this running. Is the mujoco install now automatic?"
Create a manipulable entity based on STL mesh ,"I'm trying to build a custom manipulation task. I closely follow the construction of the Lift task in dm_control.

The model is defined as follow

```
<mujoco model=""left_gear"">
  <asset>
    <mesh file=""meshes/Left_gear.stl"" name=""left_gear_mesh"" scale=""0.001 0.001 0.001""/>
    <material name=""gear"" reflectance=""0.5""/>
  </asset>
  <worldbody>
    <body>
      <body name=""object"">
        <geom pos=""0 0 0"" name=""left_gear"" mesh=""left_gear_mesh"" type=""mesh"" solimp=""0.998 0.998 0.001"" solref=""0.001 1"" density=""50"" friction=""0.95 0.3 0.1"" material=""gear"" contype=""0"" conaffinity=""0"" group=""1""/>
      </body>
    </body>
  </worldbody>
</mujoco>
```

The corresponding entity

```
class LeftGear(composer.Entity):
    def _build(self):
        self._mjcf_root = mjcf.from_path(_LEFT_GEAR_XML_PATH)

    @property
    def mjcf_model(self):
        return self._mjcf_root

    @property
    def geom(self):
        return self._mjcf_root.find(""geom"", ""left_gear"")
```

The task definition

```
class HelicalGear(composer.Task):
    
    def __init__(self, workspace: Workspace):
        obs_settings = observations.VISION
        self._arena = arenas.Standard()
        self._arm = robots.make_arm(obs_settings=obs_settings)
        self._hand = robots.make_hand(obs_settings=obs_settings)
        self._arm.attach(self._hand)
        self._arena.attach_offset(self._arm, [0, 0.4, 0])
        
        self._task_observables = cameras.add_camera_observables(self._arena, obs_settings, cameras.FRONT_CLOSE)
        
        self._tcp_initializer = initializers.ToolCenterPointInitializer(
            self._hand, 
            self._arm,
            position=distributions.Uniform(low=workspace.tcp_bbox.lower, high=workspace.tcp_bbox.upper),
            quaternion=workspaces.DOWN_QUATERNION
        )
        
        self._left_gear = left_gear.LeftGear()
        self._left_gear.geom.mass = left_gear.MASS
        self._arena.add_free_entity(self._left_gear)

        self._prop_placer = initializers.PropPlacer(
            props=[self._left_gear],
            position=distributions.Uniform(low=workspace.prop_bbox.lower, high=workspace.prop_bbox.upper),
            quaternion=workspaces.uniform_z_rotation,
            ignore_collisions=True,
            settle_physics=True
        )
        
    @property
    def root_entity(self):
        return self._arena
    
    @property
    def task_observables(self):
        return self._task_observables
    
    def get_reward(self, physics):
        return 0

    def initialize_episode(self, physics, random_state):
        self._hand.set_grasp(physics, close_factors=random_state.uniform())
        self._prop_placer(physics, random_state)
        self._tcp_initializer(physics, random_state)
        
        # # Compute the target height based on the initial height of the prop's
        # # center of mass after settling.
        # initial_prop_height = self._get_height_of_lowest_vertex(physics)
        # self._target_height = _DISTANCE_TO_LIFT + initial_prop_height
        # physics.bind(self._target_height_site).pos[2] = self.
```

At this point I'm able to view the scene inside the viewer but when I run the animation with a random policy the gear disappear from the scene. Also when I use the prop_placer the gear is not visible on the scene.

I certainly miss something but can't find out.

Any ideas ? "
libmujoco.so.2.1.1 mj_certQuestion,"I downlaod & extract mujoco 2.1.1;
Install dm_control by chnaging setup.py:  'dm-control==0.0.364896371',
Ubutnu 20.04, python 3.6.9

But I got error..
AttributeError: /home/delkov/.mujoco/lib/libmujoco.so.2.1.1: undefined symbol: mj_certQuestion

"
PyMJCF Asset Loading Helpful Warning for Case-Sensitivity `FileNotFoundError`s,Addresses deepmind/mujoco#254.
how to change locomotion environment camera view?,"```
import functools

from dm_control import composer
from dm_control.composer.variation import distributions
from dm_control.locomotion.arenas import corridors as corr_arenas
from dm_control.locomotion.arenas import floors
from dm_control.locomotion.arenas import labmaze_textures
from dm_control.locomotion.arenas import mazes
from dm_control.locomotion.props import target_sphere
from dm_control.locomotion.tasks import corridors as corr_tasks
from dm_control.locomotion.tasks import go_to_target
from dm_control.locomotion.tasks import random_goal_maze
from dm_control.locomotion.walkers import cmu_humanoid
from labmaze import fixed_maze
""""""Requires a CMU humanoid to run down a corridor with gaps.""""""

random_state = None
# Build a position-controlled CMU humanoid walker.
'''
walker = cmu_humanoid.CMUHumanoidPositionControlled(
  observable_options={'egocentric_camera': dict(enabled=True)})
'''
walker = cmu_humanoid.CMUHumanoidPositionControlled(
  observable_options={'body_camera': dict(enabled=True)})

# Build a corridor-shaped arena with gaps, where the sizes of the gaps and
# platforms are uniformly randomized.
arena = corr_arenas.GapsCorridor(
  platform_length=distributions.Uniform(.3, 2.5),
  gap_length=distributions.Uniform(.5, 1.25),
  corridor_width=10,
  corridor_length=100)

# Build a task that rewards the agent for running down the corridor at a
# specific velocity.
task = corr_tasks.RunThroughCorridor(
  walker=walker,
  arena=arena,
  walker_spawn_position=(0.5, 0, 0),
  target_velocity=3.0,
  physics_timestep=0.005,
  control_timestep=0.03)

env = composer.Environment(time_limit=30,
                          task=task,
                          random_state=random_state,
                          strip_singleton_obs_buffer_dim=True)
```

egocentric_camera and body_camera options show same (egocentric)camera view. how can I get three point perspective state like in locomotion readme?
Thank you very much for reading. "
Updating positions of sites during environment reset,"Hi, 
I have an environment where the robot needs to reach different goal positions that are randomized at every timestep. I am representing the goal as a site on the worldbody in the xml file for visualization purposes. However, while I update the `site_xpos` using  ` with physics.reset_context():
physics.named.data.site_xpos[""goal""] = np.random.uniform(low,high)`
the location of the site does not get updated in the dm_viewer. Is there a way to update site position in the viewer or am I using the functionality incorrectly? Thanks! "
_glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.,"**Error:**
`_glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.`

I'm running Mujuco2.0 with the following pip dependencies:

```
libglewmx-dev
libglew-dev
libglew2.0
libglewmx1.13
(7000) dyung6@ripl-w3:~/rad$ apt-cache pkgnames libglfw
libglfw3-wayland
libglfw3
libglfw3-dev
libglfw3-doc
(7000) dyung6@ripl-w3:~/rad$ conda activate rad
(rad) dyung6@ripl-w3:~/rad$ pip freeze
absl-py @ file:///opt/conda/conda-bld/absl-py_1639803114343/work
cached-property==1.5.2
cachetools==4.2.4
certifi==2021.5.30
cffi @ file:///tmp/build/80754af9/cffi_1625814693874/work
charset-normalizer==2.0.12
cloudpickle==2.0.0
cycler==0.11.0
dataclasses==0.8
decorator==4.4.2
dm-control==0.0.364896371
dm-env==1.5
dm-tree==0.1.6
dmc2gym @ git+https://github.com/1nadequacy/dmc2gym.git@06f7e335d988b17145947be9f6a76f557d0efe81
future==0.18.2
glfw==2.5.2
google-auth==2.6.3
google-auth-oauthlib==0.4.6
grpcio==1.44.0
gym==0.21.0
h5py==3.1.0
idna==3.3
imageio==2.15.0
imageio-ffmpeg==0.4.5
importlib-metadata==4.8.3
importlib-resources==5.4.0
kiwisolver==1.3.1
labmaze==1.0.5
lxml==4.8.0
Markdown==3.3.6
matplotlib==3.3.4
mkl-fft==1.3.0
mkl-random==1.1.1
mkl-service==2.3.0
networkx==2.5.1
numpy @ file:///tmp/build/80754af9/numpy_and_numpy_base_1603487797006/work
oauthlib==3.2.0
olefile==0.46
Pillow==8.4.0
protobuf==3.19.4
pyasn1==0.4.8
pyasn1-modules==0.2.8
pycparser @ file:///tmp/build/80754af9/pycparser_1636541352034/work
PyOpenGL==3.1.6
pyparsing @ file:///tmp/build/80754af9/pyparsing_1635766073266/work
python-dateutil==2.8.2
PyWavelets==1.1.1
requests==2.27.1
requests-oauthlib==1.3.1
rsa==4.8
scikit-image==0.17.2
scipy==1.5.4
six @ file:///tmp/build/80754af9/six_1644875935023/work
tabulate==0.8.9
tb-nightly==2.9.0a20220408
tensorboard-data-server==0.6.1
tensorboard-plugin-wit==1.8.1
termcolor==1.1.0
tifffile==2020.9.3
torch==1.10.1
torchvision==0.11.2
tqdm==4.64.0
typing_extensions==4.1.1
urllib3==1.26.9
Werkzeug==2.0.3
zipp==3.6.0
(rad) dyung6@ripl-w3:~/rad$ python --version
Python 3.6.13 :: Anaconda, Inc.
(rad) dyung6@ripl-w3:~/rad$ conda activate 7000
(7000) dyung6@ripl-w3:~/rad$ pip freeze
absl-py==1.0.0
certifi==2021.10.8
charset-normalizer==2.0.12
cloudpickle==2.0.0
dm-control==1.0.1
dm-env==1.5
dm-tree==0.1.6
dmc2gym @ git+https://github.com/denisyarats/dmc2gym.git@06f7e335d988b17145947be9f6a76f557d0efe81
future==0.18.2
glfw==2.5.3
gym==0.23.1
gym-notices==0.0.6
h5py==3.6.0
idna==3.3
importlib-metadata==4.11.3
labmaze==1.0.5
lxml==4.8.0
mujoco==2.1.4
numpy==1.22.3
protobuf==3.20.0
PyOpenGL==3.1.6
pyparsing==2.4.7
requests==2.27.1
scipy==1.8.0
six==1.16.0
tqdm==4.64.0
urllib3==1.26.9
zipp==3.8.0
```

Here is my code:
```
from dm_control import suite
import numpy as np

random_state = np.random.RandomState(42)
env = suite.load('hopper', 'stand', task_kwargs={'random': random_state})

# Simulate episode with random actions
duration = 4  # Seconds
frames = []
ticks = []
rewards = []
observations = []

spec = env.action_spec()
time_step = env.reset()

while env.physics.data.time < duration:

  action = random_state.uniform(spec.minimum, spec.maximum, spec.shape)
  time_step = env.step(action)
  obs = time_step.observation
  camera0 = env.physics.render(camera_id=0, height=200, width=200)
  pixels = env.physics.render(height=200, width=200, camera_id=0)
  print('')
```

I have `libglew2.0` and `libglfw3` installed and I'm running on Linux with Ubuntu 18.04.5. Python version is 3.9.12. The issue arises when I try to render. Not sure why this is happening.
"
How to define new task ?,"We would like to simulate a custom robotic manipulation task environment and then use it in a reinforcement learning framework.
It is possible to use dm_control components to do that and is there any guidelines on how to proceed ?"
mujoco.FatalError: gladLoadGL error,"Hello, despite the fact that I installed all required dependencies, I get this error again and again. Does someone have any clue about how I could fix it ? Or where it comes from ? 

![image](https://user-images.githubusercontent.com/29407638/161893969-b4bdc28d-082a-4758-a2c9-6d0f1229c4cb.png)


Thank you in advance."
Performance gap between viewer and simulate.cc,"Hello,

i am experiencing quite the performance gap between the compiled simulate.cc GUI and the viewer application.
I made i quick video of the issue (https://drive.google.com/file/d/1zT55YzBXGRdBOVW2JMWQVyoJtmYLpZf3/view?usp=sharing).

My system is an Thinkpad x1 yoga gen 6 (i7 1165, 32gb Ram) running Ubuntu 20 LTS.
I do not experience this gap on my private pc, a Macbook Air M1. It runs just fine there.

The simulated .xml File is the following and a tiny torque is applied to break the stable pose.
```xml
<mujoco>
  <option timestep=""0.0001"" integrator=""RK4"">
    <flag sensornoise=""enable"" energy=""enable"" contact=""disable""/>
  </option>
  <asset>
  <material name=""dense"" rgba="".9 .9 .9 .9""/>
  </asset>
  <worldbody>
    <light diffuse="".5 .5 .5"" pos=""0 0 3"" dir=""0 0 -1""/>
    <geom type=""plane"" size=""1 1 0.1"" material=""dense""/>
    <body pos=""0 0 3"" euler=""0 0 0"">
      <joint name=""pin"" type=""hinge"" pos=""0 0 -.5"" axis=""0 1 0""/>
      <geom type=""cylinder"" size="".05 .5"" rgba=""1 0 0 1"" mass=""1""/>
      <body pos=""0 0.1 1"" euler=""0 0 0"">
        <joint name=""pin2"" type=""hinge"" pos=""0 0 -.5"" axis=""0 1 0""/>
        <geom type=""cylinder"" size="".05 .5"" rgba=""0 1 0 1"" mass=""1""/>
    </body>
    </body>
  </worldbody>

  <actuator>
    <motor joint=""pin"" name=""torque"" gear=""1"" ctrllimited=""true"" ctrlrange=""-100 100""/>
    <motor joint=""pin2"" name=""torque2"" gear=""1"" ctrllimited=""true"" ctrlrange=""-100 100""/>
  </actuator>
  </mujoco>
```"
dm_control.rl.control.PhysicsError: Physics state is invalid (mjWARN_BADQACC),"Hey :)

I am trying to use dm_control in a two player setting where the second agent (adversary) is perturbing the first (protagonist) during training. In the step function, I first set the perturbation of the adversary and then step the environment with the actuator actions chosen by the protagonist. I am using the mujoco cheetah environment. My training gets aborted at some point due to an invalid physics state (mjWARN_BADQACC).

I have two questions:
- What needs to happen that I am getting an invalid acceleration? 
- I've found the possibility in dm_control/mujoco/engine.py, method check_invalid_state(), line 303 that if the context is nested inside a `suppress_physics_errors` context, a warning will be logged instead of raising a PhysicsError. How can I do that?

Thanks a lot for any help!  "
Could you tell me which task this is?,"I saw this in the DrQV2 repo. Wondering which task it is: https://camo.githubusercontent.com/a6bafbb78a387c5270a5f2b27b2e2a546f21e76ca5681ec9c64b54bf978d6deb/68747470733a2f2f696d6775722e636f6d2f73444767526f732e676966

It looks like a claw task, but I don't see anything like it in the DeepMind Control Suite paper."
Segmentation Fault with MuJoCo,"I'm looking to benchmark both dm_control and MuJoCo.

This
```
import gym
from dm_control import suite
env = gym.make('HalfCheetah-v3')
```
yields
```
Traceback (most recent call last):
  File ""wrappers.pxi"", line 1139, in mujoco_py.cymj.PyMjModel._extract_mj_names
AssertionError
Exception ignored in: 'mujoco_py.cymj.PyMjModel._set'
Traceback (most recent call last):
  File ""wrappers.pxi"", line 1139, in mujoco_py.cymj.PyMjModel._extract_mj_names
AssertionError
Segmentation fault (core dumped)
```

whereas this exits gracefully:
```
import gym
env = gym.make('HalfCheetah-v3')
from dm_control import suite
env = gym.make('HalfCheetah-v3')
```
I'm using 
```
dm-control                   1.0.1
mujoco                       2.1.3
mujoco-py                    2.1.2.14
gym                          0.21.0
```


While I'm happy to keep using this solution, it feels like a hack and a fix would be much appreciated!"
Multi-Objective Policy Optimization in the repo?,"I'm looking for a Python implementation of a Reinforcement Learning algorithm.  
[This paper is about the algorithm called Multi-Objective Policy Optimization](https://arxiv.org/abs/2005.07513). It is linked to this repo as if it was implemented here. I would like to see this implemented in Python, but I don't see it. Can I ask where it is exactly?

I have a broader question and I think you at DeepMind are the ones to ask. What is the ideal algorithm for controlling a robot? Smooth control with minimum movement and force applied.  
I'd rather not spend a few months digging deep into something when there is a much better algorithm out there.   


![34567345763456](https://user-images.githubusercontent.com/14045554/161311947-8af02457-2e78-4a69-ba89-b47cde4fdbfd.png)

"
How to render a observation-dependent policy?,"In the current documentation, in order to render an environment with a policy, the policy function must be provided to the launcher:

```python
def random_policy(time_step):
  del time_step  # Unused.
  return np.random.uniform(low=action_spec.minimum,
                           high=action_spec.maximum,
                           size=action_spec.shape)

viewer.launch(env, policy=random_policy)
```

However, this policy can only takes as argument the timestep and not the observations from the environment.
How can we render an environment policy whose output is determined by the observation of each timestep rather than just a timestep? This is needed for evaluating non-deterministic environments where we can not evaluate first, create a table and render after."
viewer not working on mac osx,"Using the latest install for both dm_control and mujoco via pypi, the viewer can not render a window on OSX (intel chip).

Script:

```
from dm_control import suite
from dm_control import viewer
import numpy as np

env = suite.load(domain_name=""point_mass"", task_name=""easy"")
action_spec = env.action_spec()

# Define a uniform random policy.
def random_policy(time_step):
  del time_step  # Unused.
  return np.random.uniform(low=action_spec.minimum,
                           high=action_spec.maximum,
                           size=action_spec.shape)

# Launch the viewer application.
viewer.launch(env, policy=random_policy)
```

Error output:

```
script_render_dm.py 51 <module>
""/Users/user/mjc/script_render_dm.py"", line 51
viewer.launch(env, policy=random_policy)

__init__.py 39 launch
""/Users/user/.virtualenvs/p39/lib/python3.9/site-packages/dm_control/viewer/__init__.py"", line 39
app = application.Application(title=title, width=width, height=height)

application.py 187 __init__
""/Users/user/.virtualenvs/p39/lib/python3.9/site-packages/dm_control/viewer/application.py"", line 187
self._window = gui.RenderWindow(width, height, title)

__init__.py 34 ErrorRenderWindow
""/Users/user/.virtualenvs/p39/lib/python3.9/site-packages/dm_control/viewer/gui/__init__.py"", line 34
raise ImportError(

ImportError:
Cannot create a window because no windowing system could be imported
```"
[manipulation module] Assign timestep variable to unit test.,"Previously, the test was only checking the first timestep returned by the environment and not subsequent timesteps generated by the trajectory rollout."
AttributeError when importing viewer,"Getting an Attribute error about certification question? Any ideas? I can't find any references on the internet about this problem.
using mujoco 2.1.1 and juypter notebooks

I tested mujoco and it works great. dm_control works until I try to import viewer

import dm_control
import mujoco
In [7]:

from dm_control import locomotion
In [9]:

from dm_control import viewer
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
Input In [9], in <cell line: 1>()
----> 1 from dm_control import viewer

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/viewer/__init__.py:22, in <module>
     19 from __future__ import division
     20 from __future__ import print_function
---> 22 from dm_control.viewer import application
     25 def launch(environment_loader, policy=None, title='Explorer', width=1024,
     26            height=768):
     27   """"""Launches an environment viewer.
     28 
     29   Args:
   (...)
     40       ValueError: When 'environment_loader' argument is set to None.
     41   """"""

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/viewer/application.py:25, in <module>
     23 from dm_control import _render
     24 from dm_control.viewer import gui
---> 25 from dm_control.viewer import renderer
     26 from dm_control.viewer import runtime
     27 from dm_control.viewer import user_input

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/viewer/renderer.py:24, in <module>
     21 import abc
     22 import contextlib
---> 24 from dm_control.mujoco import wrapper
     25 from dm_control.mujoco.wrapper import mjbindings
     26 from dm_control.viewer import util

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/__init__.py:18, in <module>
      1 # Copyright 2017 The dm_control Authors.
      2 #
      3 # Licensed under the Apache License, Version 2.0 (the ""License"");
   (...)
     13 # limitations under the License.
     14 # ============================================================================
     16 """"""Mujoco implementations of base classes.""""""
---> 18 from dm_control.mujoco.engine import action_spec
     20 from dm_control.mujoco.engine import Camera
     21 from dm_control.mujoco.engine import MovableCamera

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/engine.py:45, in <module>
     42 from absl import logging
     44 from dm_control import _render
---> 45 from dm_control.mujoco import index
     46 from dm_control.mujoco import wrapper
     47 from dm_control.mujoco.wrapper import util

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/index.py:92, in <module>
     89 import collections
     90 import weakref
---> 92 from dm_control.mujoco.wrapper import util
     93 from dm_control.mujoco.wrapper.mjbindings import sizes
     94 import numpy as np

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/wrapper/__init__.py:23, in <module>
     19 from __future__ import division
     20 from __future__ import print_function
---> 23 from dm_control.mujoco.wrapper import mjbindings
     25 from dm_control.mujoco.wrapper.core import callback_context
     26 from dm_control.mujoco.wrapper.core import enable_timer

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/wrapper/mjbindings/__init__.py:32, in <module>
     30 # pylint: disable=g-import-not-at-top
     31 try:
---> 32   from dm_control.mujoco.wrapper.mjbindings import functions
     33   from dm_control.mujoco.wrapper.mjbindings.functions import mjlib
     34   logging.info('MuJoCo library version is: %d', mjlib.mj_version())

File ~/miniconda3/envs/rl_course/lib/python3.10/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py:45, in <module>
     42 mjlib.mj_deactivate.argtypes = None
     43 mjlib.mj_deactivate.restype = None
---> 45 mjlib.mj_certQuestion.__doc__ = """"""
     46 Server side: generate certificate question.
     47 
     48 Args:
     49   question: util.ndptr(shape=(16,), dtype=np.float64, flags=('C', 'W'))
     50 """"""
     51 mjlib.mj_certQuestion.argtypes = [
     52     util.ndptr(shape=(16,), dtype=np.float64, flags=('C', 'W')),
     53 ]
     54 mjlib.mj_certQuestion.restype = None

File ~/miniconda3/envs/rl_course/lib/python3.10/ctypes/__init__.py:387, in CDLL.__getattr__(self, name)
    385 if name.startswith('__') and name.endswith('__'):
    386     raise AttributeError(name)
--> 387 func = self.__getitem__(name)
    388 setattr(self, name, func)
    389 return func

File ~/miniconda3/envs/rl_course/lib/python3.10/ctypes/__init__.py:392, in CDLL.__getitem__(self, name_or_ordinal)
    391 def __getitem__(self, name_or_ordinal):
--> 392     func = self._FuncPtr((name_or_ordinal, self))
    393     if not isinstance(name_or_ordinal, int):
    394         func.__name__ = name_or_ordinal

AttributeError: dlsym(0x20a71aae0, mj_certQuestion): symbol not found"
The reset process for each episode is very very slow.,"I am using the soccer 2-vs-2 for training. I found the ```self.timestep = self.env.reset()``` process takes a long time after each epsiode. Any suggestion about that?
"
How can we get detailed explanation of obvervation variables?,"Hi~ Thanks for your great work.
I am playing with the locomotion soccer environment. But I have no idea about the meaning of some observation variables:
They look like the following:
```
        ""team_goal_back_right"",  # (1, 2)		[[20.39657422 -5.54516916]]
        ""team_goal_mid"",  # (1, 3)		[[ 11.73723908 -10.76243655   1.67126411]]
        ""team_goal_front_left"",  # (1, 2)		[[  3.07790393 -15.97970393]]
        ""field_front_left"",  # (1, 2)		[[-56.03425312  20.39720981]]
        ""opponent_goal_back_left"",  # (1, 2)		[[-49.91189073  34.54660858]]
        ""opponent_goal_mid"",  # (1, 3)		[[-41.25255558  39.76387596   1.67126411]]
        ""opponent_goal_front_right"",  # (1, 2)		[[-32.59322043  44.98114335]]
        ""field_back_right"",  # (1, 2)		[[26.51893661  8.6042296 ]]
```
Where could we find a detailed meaning of these variables?
Thanks!"
how to properly add mesh assets from files in pymjcf?,"I've been trying to construct mujoco models through pymjcf, and have run into some issues with importing meshes from files. What is the proper way to use pymjcf to add mesh assets?

I've linked a [colab](https://github.com/stracovskylu/misc_mujoco_test/blob/main/pymjcf_mesh_test.ipynb) notebook which has example code for two methods I attempted."
"What's the difference between qfrc_applied and qfrc_passive?When i set the qfrc_passive of a slide joint to 15,the robot don't move,but if i set the qfrc_applied to 15,the robot will move quickly,why?","In every step,I set mjpassive callback like this:
`mujoco.wrapper.core.set_callback('mjcb_passive', my_callback(env.physics.model, env.physics.data))`

`def my_callback(mjmodel,mjdata):`
    `F = np.matrix([[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]])`
    `F += fluiddynamics_joint9_abs.dragforce_head_joint(env.physics, t)`
    `F += fluiddynamics_joint9_abs.dragforce_no1_joint(env.physics, t)`
    `F += fluiddynamics_joint9_abs.dragforce_no2_joint(env.physics, t)`
    `F += fluiddynamics_joint9_abs.dragforce_no3_joint(env.physics, t)`
    `F += fluiddynamics_joint9_abs.dragforce_no4_joint(env.physics, t)`
    `F += fluiddynamics_joint9_abs.dragforce_no5_joint(env.physics, t)`
   ` F += fluiddynamics_joint9_abs.dragforce_tail_joint(env.physics, t)`

    mjdata.qfrc_passive[0] += F[0,0]
    mjdata.qfrc_passive[1] += F[1,0]
    mjdata.qfrc_passive[2] += F[2,0]
    mjdata.qfrc_passive[3] += F[3,0]
    mjdata.qfrc_passive[4] += F[4,0]
    mjdata.qfrc_passive[5] += F[5,0]
    mjdata.qfrc_passive[6] += F[6,0]
    mjdata.qfrc_passive[7] += F[7,0]
    mjdata.qfrc_passive[8] += F[8,0]
    print(""mjdata"",mjdata.qfrc_passive)

And the result is like this:
`mjdata [ 3.99041754 15.25025445  5.15961426  5.29100649  4.91947889  6.10987817
  8.11888827  7.88103777  3.90188425]`
The second number is the passive force of the slide joint,nearly 15,but the robot don't move,why?
If i set the qfrc_applied to 15,the robot will move quickly,why?"
Maximizing `viewer` window raises RuntimeError ,"As the title suggests, trying to maximize the window size of the `dm_control.viewer` application now crashes with a `RuntimeError`. I've added the traceback below!

<details>
<summary>Toggle traceback</summary>

  ```python
Traceback (most recent call last):
  File ""shadow_hand/manipulation/explore.py"", line 62, in <module>
    app.run(main)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/absl/app.py"", line 312, in run
    _run_main(main, args)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/absl/app.py"", line 258, in _run_main
    sys.exit(main(argv))
  File ""shadow_hand/manipulation/explore.py"", line 58, in main
    viewer.launch(env, policy=random_policy)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/__init__.py"", line 40, in launch
    app.launch(environment_loader=environment_loader, policy=policy)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/application.py"", line 327, in launch
    self._window.event_loop(tick_func=tick)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/gui/glfw_gui.py"", line 286, in event_loop
    pixels = tick_func()
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/application.py"", line 325, in tick
    self._tick()
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/application.py"", line 271, in _tick
    self._viewer.render()
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/viewer.py"", line 238, in render
    self._renderer.render(self._viewport, scene)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/viewer/renderer.py"", line 151, in render
    self._mujoco_context = wrapper.MjrContext(
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/mujoco/wrapper/core.py"", line 605, in __init__
    with gl_context.make_current() as ctx:
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/contextlib.py"", line 113, in __enter__
    return next(self.gen)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/_render/base.py"", line 121, in make_current
    with self._render_executor.execution_context() as ctx:
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/contextlib.py"", line 113, in __enter__
    return next(self.gen)
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/_render/executor/render_executor.py"", line 89, in execution_context
    self._check_not_terminated()
  File ""/Users/kevin/miniconda3/envs/muj/lib/python3.8/site-packages/dm_control/_render/executor/render_executor.py"", line 84, in _check_not_terminated
    raise RuntimeError(_ALREADY_TERMINATED)
RuntimeError: This executor has already been terminated.
```

</details>"
Problem with OpenGL on importing `mjcf.parser`,"My setup is that I am using `dm_control.parser` to modify and save to disk an xml file at run-time and then loading this new xml file into a `mujoco_py` / `gym` wrapped environment.

I know it is strange to be doing things this way but it is my current setup and migrating to 100% `dm_control` will take too long I believe.

The OpenGL related problem I am facing is that if I have an import statement like: `from dm_control.mjcf import parser`, in my `run_env` script (which creates and steps through a mujoco_py-gym model), I get the below error from mujoco_py,

```
RuntimeError: Failed to initialize OpenGL
```

So technically it is not a `dm_control` error but some sort of conflict between the two libraries laying claim to the same OpenGL context I think. 

So my question is,
Is there a way to import `dm_control.mjcf.parser` without it invoking any graphics/OpenGL related stuff?"
Break in `mjlib.mj_jacSite` to `mujoco.mj_jacSite` switch,"Hi,

My inverse kinematics code is currently breaking after the upgrade. Following the [migration guide](https://github.com/deepmind/dm_control/blob/master/migration_guide_1.0.md), I replaced my code as follows:

```python
# Before
from dm_control.mujoco.wrapper import mjbindings
mjlib = mjbindings.mjlib
mjlib.mj_jacSite(
    model.ptr,
    data.ptr,
    jacobian_position,
    jacobian_rotation,
    object_id,
)

# After
import mujoco
mujoco.mj_jacSite(
    model.ptr,
    data.ptr,
    jacobian_position,
    jacobian_rotation,
    object_id,
)
```

The error I get is:

> TypeError: mj_jacSite(): incompatible function arguments. The following argument types are supported:
    1. (m: mujoco._structs.MjModel, d: mujoco._structs.MjData, jacp: Optional[numpy.ndarray[numpy.float64[m, n], flags.writeable, flags.c_contiguous]], jacr: Optional[numpy.ndarray[numpy.float64[m, n], flags.writeable, flags.c_contiguous]], site: int) -> None
    
>Invoked with: <dm_control.mujoco.wrapper.mjbindings.types.LP_MJMODEL object at 0x1238af0c0>, <dm_control.mujoco.wrapper.mjbindings.types.LP_MJDATA object at 0x123886740>, array([[0.00000000e+000, 2.16366577e-314, 0.00000000e+000,
        1.23516411e-321, 4.94065646e-324, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000],
       [0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000],
       [0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000,
        0.00000000e+000, 0.00000000e+000, 0.00000000e+000]]), array([[0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
        0., 0., 0., 0., 0., 0., 0., 0.]]), 6

I double checked all types as well as writeability of arrays so unclear why the error is being thrown."
Open for collab - to rewrite dm_control codebase in c++,"I enjoy this library and have used it in research , I'm currently writing my graduate paper, where i'll be showing my benchmark for the rgb stacking problem. Looking through the codebase, I see lots of optimization capability if a high performance language like c++ was used instead, it can directly interface with mujoco since that' in C. I am looking to collaborate with other c++ developers to create a c++ version and maybe write a python wrapper over that instead. I get really low FP during training, and not so feasible to train on a few cores. I have a private repo where i implemented PPO, A2C and impala with full multi-threading, MPI and template support, and the lib-torch api. I am open to share that with any developer who is willing to collaborate too."
Bump pillow from 9.0.0 to 9.0.1,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 9.0.0 to 9.0.1.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>9.0.1</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/9.0.1.html"">https://pillow.readthedocs.io/en/stable/releasenotes/9.0.1.html</a></p>
<h2>Changes</h2>
<ul>
<li>In show_file, use os.remove to remove temporary images. CVE-2022-24303 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6010"">#6010</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>, <a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Restrict builtins within lambdas for ImageMath.eval. CVE-2022-22817 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6009"">#6009</a> [radarhere]</li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/main/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>9.0.1 (2022-02-03)</h2>
<ul>
<li>
<p>In show_file, use os.remove to remove temporary images. CVE-2022-24303 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6010"">#6010</a>
[radarhere, hugovk]</p>
</li>
<li>
<p>Restrict builtins within lambdas for ImageMath.eval. CVE-2022-22817 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/6009"">#6009</a>
[radarhere]</p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/6deac9e3a23caffbfdd75c00d3f0a1cd36cdbd5d""><code>6deac9e</code></a> 9.0.1 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/c04d812b902356b8c20ee2ab881e1d96f7d66b4b""><code>c04d812</code></a> Update CHANGES.rst [ci skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/4fabec36197735438c80c174d018498be606c46c""><code>4fabec3</code></a> Added release notes for 9.0.1</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/02affaa491df37117a7562e6ba6ac52c4c871195""><code>02affaa</code></a> Added delay after opening image with xdg-open</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/ca0b58521881b95e47ea49d960d13d1c3dac823d""><code>ca0b585</code></a> Updated formatting</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/427221ef5f19157001bf8b1ad7cfe0b905ca8c26""><code>427221e</code></a> In show_file, use os.remove to remove temporary images</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/c930be0758ac02cf15a2b8d5409d50d443550581""><code>c930be0</code></a> Restrict builtins within lambdas for ImageMath.eval</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/75b69dd239a4647032f67a80d9b444228af2b736""><code>75b69dd</code></a> Dont need to pin for GHA</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/cd938a7744cb46e2ea525a0c3dd79aa08f98c150""><code>cd938a7</code></a> Autolink CWE numbers with sphinx-issues</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/2e9c461ca417083c43145a991bf9e1ec93237d89""><code>2e9c461</code></a> Add CVE IDs</li>
<li>See full diff in <a href=""https://github.com/python-pillow/Pillow/compare/9.0.0...9.0.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=9.0.0&new-version=9.0.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Ensure configuring an MJCFCamera does not violate exclusivity of depth/segmentation attributes.,This PR addresses #211.
`mjlib.mjr_figure` in `Viewer` object to render 2D plots in realtime,"Hi, was wondering if there was a way to render a 2D plot in realtime with the viewer. I looked into `mjlib.mjr_figure` and looked at the example for [`simulate.cc`](https://github.com/deepmind/mujoco/blob/main/sample/simulate.cc), but wasn't sure what format to put the image in."
Mocap body,"Hi,

I am trying to add a mocap body on a rope, and it seems the mocap is not connected, I tried to use weld and connect.

<mujoco model=""rope"">
    
    <include file=""scene_v2.xml""/>

    <option timestep=""0.002"" jacobian=""dense""/>

    <size nconmax=""100"" njmax=""300"" nstack=""50000""/>

    <worldbody>
        <body name=""B10"" pos=""0 -0.5 0.00"">
            <freejoint/>
            <composite type=""rope"" count=""21 1 1"" spacing=""0.04"" offset=""0 0 2"">
                <joint kind=""main"" damping=""0.005""/>
                <geom  type=""capsule"" size="".01 .015"" rgba="".8 .2 .1 1""/>
            </composite>
        </body>
        <body name=""hand"" mocap=""true"" pos=""0 -0.5 0.00"">
            <geom type=""box"" size="".01 .01 .01"" rgba=""0 .9 0 .5"" contype=""2""/>
        </body>
    </worldbody>
    <equality>
        <weld body1=""hand"" body2=""B10"" solimp=""0.9 0.95 0.001"" solref=""0.02 1""></weld>
    </equality>
</mujoco>"
pyMJCF: Overriding visual/global/offheight,"I wanted to get 512x512 frames out of my mujoco simulation created using a pyMJCF model.

When I run,
```
pixels = physics.render(height=512, width=512, camera_id=0, depth=False)
```

I get a buffer length not enough error (512 > default offheight of 480) so I tried changing the setting through the pyMJCF global attributes but none of the below worked,
```
self._model = mjcf.RootElement(model=""regular-polygon"")
self._model.visual.global.offheight = 512 (Error: visual has no attribute global)
self._model.visual.global_.offheight = 512 (Error: visual has no attribute global_)
self._model.vis.global_ = 512 (Error: rootElement has no attribute vis)
``` 

Please tell me how I can increase the offheight buffer to 512 without having to resort to loading in an xml backbone "
Limit time steps instead of time,"Curious if there's a non-hacky way to enforce an episode termination after a certain amount of `physics.step()` calls, i.e., a `step_limit` in the spirit of [TimeLimit](https://github.com/openai/gym/blob/master/gym/wrappers/time_limit.py)?

Is it okay to do:

```python
time_limit = step_limit * self.control_timestep
```

Is there a reason this isn't exposed directly to the user?

Thanks!"
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_BADQACC,"I am running the task ""dog-walk"", and this error always happens in different training steps. This task should fix some bug?"
Libmujoco.so.2.1.1: cannot open shared object file: No such file or directory,"when I run:
`from dm_control import suite`
the error is:
`/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/glfw/__init__.py:906: GLFWError: (65544) b'X11: The DISPLAY environment variable is missing'
  warnings.warn(message, GLFWError)
WARNING:absl:mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/suite/__init__.py"", line 24, in <module>
    from dm_control.suite import acrobot
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/suite/acrobot.py"", line 20, in <module>
    from dm_control import mujoco
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/engine.py"", line 42, in <module>
    from dm_control.mujoco import index
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/index.py"", line 88, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 20, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/wrapper/core.py"", line 29, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 17, in <module>
    mjlib = util.get_mjlib()
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/site-packages/dm_control/mujoco/wrapper/util.py"", line 123, in get_mjlib
    return ctypes.cdll.LoadLibrary(library_path)
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/ctypes/__init__.py"", line 451, in LoadLibrary
    return self._dlltype(name)
  File ""/home/yzc_20/anaconda3/envs/urlb/lib/python3.8/ctypes/__init__.py"", line 373, in __init__
    self._handle = _dlopen(self._name, mode)

OSError: /home/yzc_20/.mujoco/mujoco-2.1.1/lib/libmujoco.so.2.1.1: cannot open shared object file: No such file or directory`
I don't know how to fix this bug, hope for your reply, thx!~"
Possible to combine loading static xml file with pymjcf interface  ,"I wanted to programatically modify the elements of a static xml file model I had made. For instance, I would want to randomize the radius of the spheres in my model at run-time.  
I was wondering if there was a way to programatically modify the elements of a model loaded from an xml file.

That is, I want to be able to wrap a class with accessible mujoco attributes (such as the `class Leg` example in the [tech report](https://arxiv.org/pdf/2006.12983.pdf)) around this `.xml` model after I load in the latter with,
```
physics = mujoco.Physics.from_xml_string(simple_MJCF)
```

Is there currently a way of doing this in dm_control?, since I couldn't find one in the documentation. "
The GLFW library is not initialized,"I'm trying to make image-based Hopper environment on ubuntu 18.04 server.
So I don't need to open up GUI thing. But I guess It looks like GUI trouble.
## Problem

```
from dm_control import suite
```
warning 
```
/home/seolho/anaconda3/envs/main/lib/python3.7/site-packages/glfw/__init__.py:906: GLFWError: (65544) b'X11: The DISPLAY environment variable is missing'
```

I ignored and called suite.load
```
env = suite.load(""hopper"",""hop"")
env.reset()
```
result
``` 
TimeStep(step_type=<StepType.FIRST: 0>, reward=None, discount=None, observation=OrderedDict([('position',array([-0.01262767, -0.99996228,  0.00868512])), ('velocity', array([-0.00717681, -0.01415571]))]))
```
But It doesn't work

```
from dm_control.suite.wrappers import pixels
env_pixels = pixels.Wrapper(env)
```

result
```
~~~/glfw/__init__.py:906: GLFWError: (65537) b'The GLFW library is not initialized'
  warnings.warn(message, GLFWError)
python: /builds/florianrhiem/pyGLFW/glfw-3.3.5/src/posix_thread.c:64: _glfwPlatformGetTls: Assertion `tls->posix.allocated == 1' failed.
Aborted (core dumped)
```
and python turned off.

I set environment variable
```
export DISPLAY=0
```
result
```
/home/seolho/anaconda3/envs/main/lib/python3.7/site-packages/glfw/__init__.py:906: GLFWError: (65544) b'X11: Failed to open display 1
```
What can I do?"
`logging` object is None?,"I get the following error after shutting down a training script using a `dm_control` environment with ctrl-c:

```
Exception ignored in: <function _create_finalizer.<locals>.callback at 0x7f2dc7839700>
Traceback (most recent call last):
  File ""/opt/venv/lib/python3.9/site-packages/dm_control/mujoco/wrapper/core.py"", line 262, in callback
TypeError: 'NoneType' object is not callable
Exception ignored in: <function _create_finalizer.<locals>.callback at 0x7f2dba8f3af0>
Traceback (most recent call last):
  File ""/opt/venv/lib/python3.9/site-packages/dm_control/mujoco/wrapper/core.py"", line 262, in callback
TypeError: 'NoneType' object is not callable
Exception ignored in: <function _create_finalizer.<locals>.callback at 0x7f2dba824c10>
Traceback (most recent call last):
  File ""/opt/venv/lib/python3.9/site-packages/dm_control/mujoco/wrapper/core.py"", line 262, in callback
TypeError: 'NoneType' object is not callable
```

When I look at that [line](https://github.com/deepmind/dm_control/blob/master/dm_control/mujoco/wrapper/core.py#L262), it seems like it must be the `logging` object that is None? Not sure how that could have happened though, I'm not using `absl` or any logger in any of my own code.

My versions are:
- dm_control: 0.0.425341097
- absl-py: 1.0.0"
Increase numerical stability of undamped pseudoinverse IK.,Fixes #252. Also fixes the dead hyperlink reference.
Inverse kinematics undamped case unnecessary multiplications,"This is referencing the `nullspace_method` in [inverse_kinematics.py](https://github.com/deepmind/dm_control/blob/master/dm_control/utils/inverse_kinematics.py).

In the [undamped case](https://github.com/deepmind/dm_control/blob/master/dm_control/utils/inverse_kinematics.py#L260), i.e., when `regularization_strength = 0.0`, the code is doing:

```python
hess_approx = jac_joints.T.dot(jac_joints)
joint_delta = jac_joints.T.dot(delta)
np.linalg.lstsq(hess_approx, joint_delta, rcond=-1)[0]
```

but should really just be:

```python
np.linalg.lstsq(jac_joints, delta, rcond=-1)[0]
```

`J.T @ J` squares the condition number so getting rid of it should improve numerical stability."
How to step composer.Environment in viewer?,"Hi, 
I followed the example from chapter 5 of your paper: https://arxiv.org/pdf/2006.12983.pdf and everything seems to work fine. I now would like to open the environment in the viewer. What happens is that the viewer opens, but no steps are taken (I can see in the viewer that Time remains 0.0). Am I doing something wrong? I am calling the viewer like this:
```python
def random_policy(time_step):
    del time_step  # Unused.
    return np.random.uniform(low=-0.5, high=0.5, size=8)

creature = Creature(num_legs=4)
task = PressWithSpecificForce(creature)
env = composer.Environment(task)
viewer.launch(env, policy=random_policy)
```
Thanks!!

Just for reference, my full script is the following (copied from your paper):

```python
# The PyMJCF library provides a Python object model for MuJoCo's MJCF modelling
# language, which can describe complex scenes with articulated bodies. The goal of the
# library is to allow users to interact with and modify MJCF models programmatically
# using Python, similarly to what the JavaScript DOM does for HTML.

from dm_control import mjcf
from dm_control import composer
from dm_control import viewer
from dm_control.composer.observation import observable
from dm_control.composer import variation
from dm_control.composer.variation import distributions
from dm_control.composer.variation import noises
from dm_control.locomotion.arenas import floors
import numpy as np
import matplotlib.pyplot as plt
import cv2

BODY_RADIUS = 0.1
BODY_SIZE = (BODY_RADIUS, BODY_RADIUS, BODY_RADIUS / 2)


class Leg(object):
    """"""A 2-DoF leg with position actuators.""""""

    def __init__(self, length, rgba):
        self.model = mjcf.RootElement()
        # Defaults:
        self.model.default.joint.damping = 2
        self.model.default.joint.type = ""hinge""
        self.model.default.geom.type = ""capsule""
        self.model.default.geom.rgba = rgba
        # Thigh:
        self.thigh = self.model.worldbody.add(""body"")
        self.hip = self.thigh.add(""joint"", axis=[0, 0, 1])
        self.thigh.add(""geom"", fromto=[0, 0, 0, length, 0, 0], size=[length / 4])
        # Shin:
        self.shin = self.thigh.add(""body"", pos=[length, 0, 0])
        self.knee = self.shin.add(""joint"", axis=[0, 1, 0])
        self.shin.add(""geom"", fromto=[0, 0, 0, 0, 0, -length], size=[length / 5])
        # Position actuators:
        self.model.actuator.add(""position"", joint=self.hip, kp=10)
        self.model.actuator.add(""position"", joint=self.knee, kp=10)


def make_creature(num_legs):
    """"""Constructs a creature with 'num_legs' legs.""""""
    rgba = np.random.uniform([0, 0, 0, 1], [1, 1, 1, 1])
    model = mjcf.RootElement()
    model.compiler.angle = ""radian""  # Use radians.
    # Make the torso geom.
    torso = model.worldbody.add(
        ""geom"", name=""torso"", type=""ellipsoid"", size=BODY_SIZE, rgba=rgba
    )
    # Attach legs to equidistant sites on the circumference.
    for i in range(num_legs):
        theta = 2 * i * np.pi / num_legs
        hip_pos = BODY_RADIUS * np.array([np.cos(theta), np.sin(theta), 0])
        hip_site = model.worldbody.add(""site"", pos=hip_pos, euler=[0, 0, theta])
        leg = Leg(length=BODY_RADIUS, rgba=rgba)
        hip_site.attach(leg.model)
    return model


def make_arena():
    arena = mjcf.RootElement()
    checker = arena.asset.add(
        ""texture"",
        type=""2d"",
        builtin=""checker"",
        width=300,
        height=300,
        rgb1=[0.2, 0.3, 0.4],
        rgb2=[0.3, 0.4, 0.5],
    )
    grid = arena.asset.add(
        ""material"", name=""grid"", texture=checker, texrepeat=[5, 5], reflectance=0.2
    )
    arena.worldbody.add(""geom"", type=""plane"", size=[2, 2, 0.1], material=grid)
    for x in [-2, 2]:
        arena.worldbody.add(""light"", pos=[x, -1, 3], dir=[-x, 1, -2])
    return arena

class Creature(composer.Entity):
    """"""A multi-legged creature derived from ‘composer.Entity‘.""""""

    def _build(self, num_legs):
        self._model = make_creature(num_legs)

    def _build_observables(self):
        return CreatureObservables(self)

    @property
    def mjcf_model(self):
        return self._model

    @property
    def actuators(self):
        return tuple(self._model.find_all(""actuator""))


class CreatureObservables(composer.Observables):
    """"""Add simple observable features for joint angles and velocities.""""""

    @composer.observable
    def joint_positions(self):
        all_joints = self._entity.mjcf_model.find_all(""joint"")
        return observable.MJCFFeature(""qpos"", all_joints)

    @composer.observable
    def joint_velocities(self):
        all_joints = self._entity.mjcf_model.find_all(""joint"")
        return observable.MJCFFeature(""qvel"", all_joints)


NUM_SUBSTEPS = 25  # The number of physics substeps per control timestep.


class Button(composer.Entity):
    """"""A button Entity which changes colour when pressed with certain force.""""""

    def _build(self, target_force_range=(5, 10)):
        self._min_force, self._max_force = target_force_range
        self._mjcf_model = mjcf.RootElement()
        self._geom = self._mjcf_model.worldbody.add(
            ""geom"", type=""cylinder"", size=[0.25, 0.02], rgba=[1, 0, 0, 1]
        )
        self._site = self._mjcf_model.worldbody.add(
            ""site"", type=""cylinder"", size=self._geom.size * 1.01, rgba=[1, 0, 0, 0]
        )
        self._sensor = self._mjcf_model.sensor.add(""touch"", site=self._site)
        self._num_activated_steps = 0

    def _build_observables(self):
        return ButtonObservables(self)

    @property
    def mjcf_model(self):
        return self._mjcf_model

    def _update_activation(self, physics):
        """"""Update the activation and colour if the desired force is applied.""""""
        current_force = physics.bind(self.touch_sensor).sensordata[0]
        is_activated = (
            current_force >= self._min_force and current_force <= self._max_force
        )
        red = [1, 0, 0, 1]
        green = [0, 1, 0, 1]
        physics.bind(self._geom).rgba = green if is_activated else red
        self._num_activated_steps += int(is_activated)

    def initialize_episode(self, physics, random_state):
        self._reward = 0.0
        self._num_activated_steps = 0
        self._update_activation(physics)

    def after_substep(self, physics, random_state):
        self._update_activation(physics)

    @property
    def touch_sensor(self):
        return self._sensor

    @property
    def num_activated_steps(self):
        return self._num_activated_steps


class ButtonObservables(composer.Observables):
    """"""A touch sensor which averages contact force over physics substeps.""""""

    @composer.observable
    def touch_force(self):
        return observable.MJCFFeature(
            ""sensordata"",
            self._entity.touch_sensor,
            buffer_size=NUM_SUBSTEPS,
            aggregator=""mean"",
        )


class UniformCircle(variation.Variation):
    """"""A uniformly sampled horizontal point on a circle of radius ‘distance‘""""""

    def __init__(self, distance):
        self._distance = distance
        self._heading = distributions.Uniform(0, 2 * np.pi)

    def __call__(self, initial_value=None, current_value=None, random_state=None):
        distance, heading = variation.evaluate(
            (self._distance, self._heading), random_state=random_state
        )
        return (distance * np.cos(heading), distance * np.sin(heading), 0)


class PressWithSpecificForce(composer.Task):
    def __init__(self, creature):
        self._creature = creature
        self._arena = floors.Floor()
        self._arena.add_free_entity(self._creature)
        self._arena.mjcf_model.worldbody.add(""light"", pos=(0, 0, 4))
        self._button = Button()
        self._arena.attach(self._button)

        # Configure initial poses
        self._creature_initial_pose = (0, 0, 0.15)
        button_distance = distributions.Uniform(0.5, 0.75)
        self._button_initial_pose = UniformCircle(button_distance)

        # Configure variators
        self._mjcf_variator = variation.MJCFVariator()
        self._physics_variator = variation.PhysicsVariator()

        # Configure and enable observables
        pos_corruptor = noises.Additive(distributions.Normal(scale=0.01))
        self._creature.observables.joint_positions.corruptor = pos_corruptor
        self._creature.observables.joint_positions.enabled = True
        vel_corruptor = noises.Multiplicative(distributions.LogNormal(sigma=0.01))
        self._creature.observables.joint_velocities.corruptor = vel_corruptor
        self._creature.observables.joint_velocities.enabled = True
        self._button.observables.touch_force.enabled = True

        # Add button position observable in the Creature’s egocentric frame
        self._task_observables = {}

        def to_button(physics):
            button_pos, _ = self._button.get_pose(physics)
            return self._creature.global_vector_to_local_frame(physics, button_pos)

        self._task_observables[""button_position""] = observable.Generic(to_button)
        for obs in self._task_observables.values():
            obs.enabled = True  # Enable all observables

        self.control_timestep = NUM_SUBSTEPS * self.physics_timestep
        return

    @property
    def root_entity(self):
        return self._arena

    @property
    def task_observables(self):
        return self._task_observables

    def initialize_episode_mjcf(self, random_state):
        self._mjcf_variator.apply_variations(random_state)

    def initialize_episode(self, physics, random_state):
        self._physics_variator.apply_variations(physics, random_state)
        creature_pose, button_pose = variation.evaluate(
            (self._creature_initial_pose, self._button_initial_pose),
            random_state=random_state,
        )
        self._creature.set_pose(physics, position=creature_pose)
        self._button.set_pose(physics, position=button_pose)

    def get_reward(self, physics):
        return self._button.num_activated_steps / NUM_SUBSTEPS


def main():
    creature = Creature(num_legs=4)
    task = PressWithSpecificForce(creature)
    env = composer.Environment(task)

    # Define a uniform random policy.
    def random_policy(time_step):
        del time_step  # Unused.
        return np.random.uniform(low=-0.5, high=0.5, size=8)

    viewer.launch(env, policy=random_policy)
    return


if __name__ == ""__main__"":
    main()

```"
env.observation_spec() is not working,"Hello,

  I tried to get observation specifications before running the game, but I get an error:

> AttributeError                            Traceback (most recent call last)
> /var/folders/7v/fqqcktvs23qc8fwgftjpz_gh0000gn/T/ipykernel_3011/1345788602.py in <module>
>       2 env = suite.load(domain_name=""humanoid"", task_name=""stand"")
>       3 action_spec = env.action_spec()
> ----> 4 observation_spec = env.observation_spec()
>       5 
>       6 print(observation_spec)
> 
> ~/miniforge3/lib/python3.9/site-packages/dm_control/rl/control.py in observation_spec(self)
>     147       if self._flat_observation:
>     148         observation = flatten_observation(observation)
> --> 149       return _spec_from_observation(observation)
>     150 
>     151   @property
> 
> ~/miniforge3/lib/python3.9/site-packages/dm_control/rl/control.py in _spec_from_observation(observation)
>     194   result = collections.OrderedDict()
>     195   for key, value in observation.items():
> --> 196     result[key] = specs.Array(value.shape, value.dtype, name=key)
>     197   return result
>     198 
> 
> AttributeError: 'tuple' object has no attribute 'shape'

Thanks.
Have a nice day."
Cannot use global variable in viewer's policy function,"Hello,

  I want to get an actual step of the run. I created a global variable called `pointer` above the policy function. The viewer gets me an error about unassigned variable:
> ERROR:absl:dm_control viewer intercepted an environment error.
> Original message: local variable 'pointer' referenced before assignment
> dm_control viewer intercepted an environment error.
> Original message: local variable 'pointer' referenced before assignment

Here is my code:
```python
# Load one task:
env = suite.load(domain_name=""humanoid"", task_name=""stand"")
action_spec = env.action_spec()

SAMPLE_RATE = 100    #  100Hz sampling rate for sensors defined in humanoid.xml

# state buffer
state_buffer = np.zeros((1, 300, 6), dtype=np.float32)
pointer = 0

# Define a uniform random policy.
def random_policy(time_step):
  action = np.zeros(action_spec.shape)

  acc = time_step.observation['imu'][0]
  gyro = time_step.observation['imu'][1]

  # FIFO
  if pointer == 300:
    plt.figure(figsize=(30, 10), dpi=80)
    for ax in range(3):
      yf = fft(state_buffer[0, :, ax])
      xf = fftfreq(300, 1.0 / SAMPLE_RATE)
      plt.subplot(4, 3, ax+1)
      plt.plot(xf, np.abs(yf))
    
      plt.subplot(4, 3, ax+4)
      plt.plot(state_buffer[0, :, ax])

      sos = butter(6, 6, 'lowpass', fs=SAMPLE_RATE, output='sos')
      gravity = sosfilt(sos, state_buffer[0, :, ax])

      plt.subplot(4, 3, ax+7)
      plt.plot(gravity)

      # remove gravity
      state_buffer[0, :, ax] -= gravity

      plt.subplot(4, 3, ax+10)
      plt.plot(state_buffer[0, :, ax])

    plt.show()

    plt.figure(figsize=(30, 10), dpi=80)
    for ax in range(3):
      yf = fft(state_buffer[0, :, ax+3])
      xf = fftfreq(300, 1.0 / SAMPLE_RATE)
      plt.subplot(2, 3, ax+1)
      plt.plot(xf, np.abs(yf))
    
      plt.subplot(2, 3, ax+4)
      plt.plot(state_buffer[0, :, ax+3])

    plt.show()
    
    pointer = 0

  input_data = np.concatenate([acc, gyro], axis=0)
  print(input_data)
  state_buffer[0, pointer] = input_data
  #print(state_buffer)

  # increment timestep
  pointer += 1

  return action

# Launch the viewer application.
viewer.launch(env, policy=random_policy)
```"
What are units of accelerometer and gyroscope and orientation of axises in Humanoid?,"Hello,

   in documentation is written about accelerometer and gyroscope, but nothing about their units.

Is gyroscope in deg/s or rad/s in Humanoid?
Is accelerometer in m/s2 in Humanoid?

What is the X, Y and Z axises orientation in `humanoid.xml` when is mounted on the torso? 
I need to compare it with the orientation of IMU in the smartphone.

Thanks a lot.
Have a nice day."
Cannot set physics timestep,"Hello,

   i tried to set `<option timestep="".01""/>` in humanoid.xml, but I get an error about: 
> ValueError: Control timestep (0.025) must be an integer multiple of physics timestep (0.01)

I need to set 100Hz sampling rate on accelerometer and gyroscope placed on Humanoid's torso.

Thanks a lot.
Have a nice day."
Update pyproject.toml,"Please change to

import os 
[options]
package_dir = os.getcwd()"
How to install on google colab after forking the dm_control in your github account?,"# This was the error I received after trying to install the fork or clone of dm_control stored in my github account 

ERROR: Command errored out with exit status 1: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '""'""'/content/src/dm-control/setup.py'""'""'; __file__='""'""'/content/src/dm-control/setup.py'""'""';f = getattr(tokenize, '""'""'open'""'""', open)(__file__) if os.path.exists(__file__) else io.StringIO('""'""'from setuptools import setup; setup()'""'""');code = f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' develop --no-deps Check the logs for full command output.

# this is the code I executed on google colab for installing the fork of dm_control stored in my github account 

`
##@title Run to install MuJoCo and `dm_control`
import distutils.util
import subprocess
if subprocess.run('nvidia-smi').returncode:
  raise RuntimeError(
      'Cannot communicate with GPU. '
      'Make sure you are using a GPU Colab runtime. '
      'Go to the Runtime menu and select Choose runtime type.')

mujoco_dir = ""$HOME/.mujoco""

print('Installing OpenGL dependencies...')
!apt-get update -qq
!apt-get install -qq -y --no-install-recommends libglew2.0 > /dev/null

print('Downloading MuJoCo...')
MUJOCO_VERSION = 210
MUJOCO_ARCHIVE = (
    f'mujoco{MUJOCO_VERSION}-{distutils.util.get_platform()}.tar.gz')
!wget -q ""https://mujoco.org/download/{MUJOCO_ARCHIVE}""
!wget -q ""https://mujoco.org/download/{MUJOCO_ARCHIVE}.sha256""
check_result = !shasum -c ""{MUJOCO_ARCHIVE}.sha256""
if _exit_code:
  raise RuntimeError(
      'Downloaded MuJoCo archive is corrupted (checksum mismatch)')

print('Unpacking MuJoCo...')
MUJOCO_DIR = '$HOME/.mujoco'
!mkdir -p ""{MUJOCO_DIR}""
!tar -zxf {MUJOCO_ARCHIVE} -C ""{MUJOCO_DIR}""

# Configure dm_control to use the EGL rendering backend (requires GPU)
%env MUJOCO_GL=egl

print('Installing dm_control...')
# Installing dm_control 
#################!pip install -q dm_control==0.0.403778684 #commented out 

# instead of using deepmind account use the fork of dm_control in your account
!pip install -e git+https://github.com/navidyou/dm_control#egg=dm_control==0.0.403778684

print('Checking that the dm_control installation succeeded...')
try:
  from dm_control import suite
  env = suite.load('cartpole', 'swingup')
  pixels = env.physics.render()
except Exception as e:
  raise e from RuntimeError(
      'Something went wrong during installation. Check the shell output above '
      'for more information.\n'
      'If using a hosted Colab runtime, make sure you enable GPU acceleration '
      'by going to the Runtime menu and selecting ""Choose runtime type"".')
else:
  del suite, env, pixels
`"
`group` named parameter in `worldbody.add` method,"From the PyMJCF tutorial:
```
for i, model in enumerate(creatures):
  # Place spawn sites on a grid.
  spawn_pos = (xpos.flat[i], ypos.flat[i], zpos.flat[i])
  spawn_site = arena.worldbody.add('site', pos=spawn_pos, group=3)
  # Attach to the arena at the spawn sites, with a free joint.
  spawn_site.attach(model).add('freejoint')
```
I couldn't find documentation for the `group` param of the `worldbody.add` method and my IDE was having trouble pointing me since `add` is a common method name. Would appreciate it if someone could explain the group parameter to me.
"
Help needed with using `dm_control.composer` ,"I really like the `dm_control.composer` interface for creating MJCF models with python. To understand its usage better I am trying to create a model for an isolated ball freely falling under `gravity=(0., 0., 9.8)` starting with some initial velocity from an arbitrary point within the cam FOV. I am new to both `dm_control` and MuJoCo and so far I have been able to create a geometrical ball container `Ball` and add it to the default `Arena` in a dummy task `FallOutOfView`.

```
from dm_control import composer
from dm_control import mjcf
from dm_control.composer.observation import observable  # For exposing observations
from dm_control.composer import variation   # Implements model variations
from dm_control.composer import Arena   # Blank canvas arena
import numpy as np


NUM_SUBSTEPS = 25  # The number of physics sub-steps per control time step.


class Ball(composer.Entity):
    """"""A Ball derived from composer.Entity base class""""""
    def _build(self, radius, mass):
        # Create a mjcf root associated with this entity
        self._mjcf_model = mjcf.RootElement()
        # Pick a random opaque color for the ball
        rgba = np.random.uniform([0, 0, 0, 1], [1, 1, 1, 1])
        # Since this entity is a single object geometry, we can add that sphere geometry and assign as _geom
        self._geom = self._mjcf_model.worldbody.add('geom', name='sphere', type='sphere', size=[radius], rgba=rgba)

    def _build_observables(self):
        return BallObservables(self)

    @property
    def mjcf_model(self):
        return self._mjcf_model

    # Unused actuators property for balls
    @property
    def actuators(self):
        return tuple(self._mjcf_model.find_all('actuator'))


class BallObservables(composer.Observables):
    """"""Observable quantities for the ball/freely falling sphere.""""""
    @composer.observable
    def ball_position(self):
        # Return ptrs to all geoms, just a sphere in case of ball
        sphere_geom = self._entity.mjcf_model.find_all('geom')
        return observable.MJCFFeature('pos', sphere_geom)

    @composer.observable
    def ball_velocity(self):
        # Return ptrs to all geoms, just a sphere in case of ball
        sphere_geom = self._entity.mjcf_model.find_all('geom')
        return observable.MJCFFeature('vel', sphere_geom)


# The task the ball has to complete is to fall under gravity and fall out of view
# A composer.Task object combines all the Entities (just Ball here) and is used with a composer.Environment Wrapper
class FallOutOfView(composer.Task):
    # Set up the scene
    def __init__(self, ball):
        # Create an Arena for the task using default blank Arena
        self._arena = Arena()
        # Add the ball object to the Arena
        self._ball = ball
        self._arena.add_free_entity(self._ball)
        # Configure lighting
        self._arena.mjcf_model.worldbody.add('light', pos=(0, 0, 4))

        # Configure initial pose
        self._ball_initial_pose = (0., 0., 0.)

        # Configure variators
        # For varying MJCF attributes like geom size
        # Called before initializing an episode before the model is compiled
        self._mjcf_variator = variation.MJCFVariator()
        # Changes bound attributes like external forces
        # Called after model has been compiled
        self._physics_variator = variation.PhysicsVariator()

        # Enable observables
        self._ball.observables.ball_position.enabled = True
        # self._ball.observables.ball_velocity.enabled = True

        # NUM_SUBSTEPS physics steps per control time step
        self.control_timestep = NUM_SUBSTEPS * self.physics_timestep
        self._task_observables = {}

    #  - - - - call_backs - - - - -

    @property
    def root_entity(self):
        return self._arena

    @property
    def task_observables(self):
        return self._task_observables

    def initialize_episode_mjcf(self, random_state):
        self._mjcf_variator.apply_variations(random_state)

    def initialize_episode(self, physics, random_state):
        self._physics_variator.apply_variations(physics, random_state)

    def get_reward(self, physics):
        return 0.0
```     

Currently the task `FallOutOfView(composer.Task)` that my `env` will wrap around is a dummy `composer.Task` object that doesn't do anything. To be able to achieve its intended task: which is to let the ball fall under gravity starting from some initial velocity untill it is out of view, I need to add velocity, and gravity into the picture which I am not sure how I can/should do.

## My Questions
1. If I were creating a `ball.xml` MJCF, then to add gravity, I would have added the below line, the equivalent of which I am unable to find in the `dm_control.composer` tutorial.
```
<option gravity=""1e-5 0 -9.81"" integrator=""Euler"" timestep=""0.05""/>
```
What would be the equivalent of this line in `dm_control.composer` and where should this line go? I suspect it should be somewhere in the `FallOutOfView(composer.Task)` class definition but I don't know what the line is so I can't try it. 

2. As for velocities, I am not even sure how velocities of objects that are not `joints` (but `geom` like my ball) work in MuJoCo, since I have only ever seen velocity been observed directly from MuJoCo in the form of joint velocities indexed with the key/attribute `qvel`. I suspect to get my ball velocity as part of my state I would need to create a `sensor` which observes change in position and makes the velocity for the most recent transition observable but to try and test this I need to get my ball moving first which I don't know how to do without it having any joints.
"
Non-Markovian Environments,"What's the recommended way to rewind a simulation environment back to its full state at some point? For example, the following code (in python, for a dmc2gym environment):
```
a = np.copy(env.physics.get_state())
b = env.step()[0]
env.physics.set_state(a)
c = env.step()[0]
```
would produce the same `b` and `c` for the cart-pole, but not for the pendulum. In other words, the pendulum environment is Non-Markovian. Do I need to save some other ""hidden"" states of the pendulum?"
Creating a Ball with PyMJCF,"I am new to both `dm_control` and mujoco and really liked the idea of creating MJCF models programatically without using `.xml` files, so I was trying to create a model of an un-actuated ball, freely falling under `g` using `dm_control.composer`.

This is what I came up with initially,
```
from dm_control import composer
from dm_control import mjcf
from dm_control.composer.observation import observable
import numpy as np

class Ball(composer.Entity):
    """"""A Ball derived from composer.Entity base class""""""
    def _build(self, radius, mass):
        self._model = self.make_MJCF_ball(radius, mass)

    def _build_observables(self):
        return BallObservables(self)

    @property
    def mjcf_model(self):
        return self._model

    # Create a ball in MJCF using dm_control's PyMJCF API
    def make_MJCF_ball(self, radius, mass):
        # Pick a random opaque color for the ball
        rgba = np.random.uniform([0, 0, 0, 1], [1, 1, 1, 1])
        model = mjcf.RootElement()
        # Make the sphere geom.
        sphere = model.worldbody.add('geom', name='sphere', type='sphere', size=0.1, rgba=rgba)
        return model


class BallObservables(composer.Observables):
    """"""Observable quantities for the ball/freely falling sphere.""""""
    @composer.observable
    def ball_position(self):
        sphere_geom = self._entity.mjcf_model.find_all('geom')
        return observable.MJCFFeature('qpos', sphere_geom)

    @composer.observable
    def ball_velocity(self):
        sphere_geom = self._entity.mjcf_model.find_all('geom')
        return observable.MJCFFeature('qvel', sphere_geom)

```

I based my sphere creation off of the below line from your tutorial,
`geom.model.worldbody.add('geom', name='torso', type='ellipsoid', size=BODY_SIZE, rgba=rgba)` 
and the fact that the `.xml` file for this sphere would include the line, `<geom name=""sphere"" pos="".2 .2 .2"" size="".1"" rgba=""1 1 1 1""/>`,

However when I attempt to create `Ball(1, 1)` (second param mass is unused for now), I get the error,<br>
`IndexError: during initialization of attribute 'size' of element <geom>: tuple index out of range`

This error goes away if I get rid of the `size=` parameter but that prevents me from setting the size of the sphere. I suspect I shouldn't be using `model.worldbody.add` but something else but I am not sure what since I couldn't find more examples online."
MJCF parser does not support depth 2+ include,"The current implementation of the MJCF parser only handles `<include/>` statements that are immediate children of `<mujoco/>`. It would be nice if we could support arbitrarily nested `<include/>` statements, like the following:

```xml
<mujoco>
    <include file=""shared_options.xml"" />
    <asset>
        <include file=""shared_assets.xml"" />
    </asset>
</mujoco>
```

Is this a PR I could take a stab at?

Thanks!"
rendering not working on macOS for version 2.1.1,"Following the readme steps (pip install from last commit) the library can be install, however it can not render despite glfw being installed and the library path being set. Running the sample script:

```
from dm_control import suite
from dm_control import viewer

env = suite.load(domain_name=""humanoid"", task_name=""stand"")
viewer.launch(env)
```

produces the following error:

```
dm.py 27 <module>
viewer.launch(env)

__init__.py 39 launch
app = application.Application(title=title, width=width, height=height)

application.py 187 __init__
self._window = gui.RenderWindow(width, height, title)

__init__.py 34 ErrorRenderWindow
raise ImportError(

ImportError:
Cannot create a window because no windowing system could be imported
```

Using python 3.9, intel-based Mac.
In the same setup, glfw can render mujoco environments using [mujoco-py](https://github.com/openai/mujoco-py) with mujoco version 2.1.0. So glfw installation seems to be fine. (mujoco-py is also broken for version 2.1.1, so right now there is no way of using mujoco on mac with version 2.1.1.)."
Editable Mode Installation `ImportError`,"The installation fails with `pip install -e .` with the newest Mujoco 2.1.1 release. Script to reproduce:
```bash
git clone git@github.com:deepmind/dm_control.git
cd dm_control
pip install -e .
python -c ""from dm_control import composer""
```

Note it works with `pip install git+git://github.com/deepmind/dm_control.git`."
Use built-in types instead of numpy aliases,"Numpy types like `np.{bool,int,float}` are just aliases of the built-in types. The built-in types should be preferred, as discussed e.g. in the [numpy 1.20.0 release notes](https://numpy.org/devdocs/release/1.20.0-notes.html#using-the-aliases-of-builtin-types-like-np-int-is-deprecated).

This commit replaces all the numpy type alises with their corresponding built-in type.

This will keep the behavior unchanged, while silencing warnings like the following:
> [...]/lib/python3.9/site-packages/dm_control/mujoco/engine.py:1031: DeprecationWarning: `np.float` is a deprecated alias for the builtin `float`. To silence this warning, use `float` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.float64` here.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
  shape=(num_actions,), dtype=np.float, minimum=minima, maximum=maxima)
"
"Discount value should be None, not 1.0 for case of non-terminal step",https://github.com/deepmind/dm_control/blob/2346e9f6c8fb15e6ea8d8f8bffd0a23854e650ce/dm_control/rl/control.py#L123
After installation I am not being able to import dm_control suit on google colaboratory. Could you please help?,"After successfully installing dm_control and Mujoco on google colaboratory. It is not possible to import dm_control suit on google colaboratory. The following code gives the following error:

from dm_control import suite
.
.
Cannot find MuJoCo library at /root/.mujoco/mujoco210/bin/libmujoco210.so

Although I have successfully installed mujuco210 on google colab and ""import mujoco_py"" is executed without any errors. 

Could you please help fix this so we can use dm_control on google colab? This would be so valuable.

Thank you so much,
"
pip install error,"```
ERROR: Command errored out with exit status 1:
     command: /u/slerman/miniconda3/envs/L/bin/python -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-req-build-21crwfji/setup.py'""'""'; __file__='""'""'/tmp/pip-req-build-21crwfji/setup.py'""'""';f = getattr(tokenize, '""'""'open'""'""', open)(__file__) if os.path.exists(__file__) else io.StringIO('""'""'from setuptools import setup; setup()'""'""');code = f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-saom06fy/install-record.txt --single-version-externally-managed --compile --install-headers /u/slerman/miniconda3/envs/L/include/python3.8/dm-control
         cwd: /tmp/pip-req-build-21crwfji/
    Complete output (2 lines):
    running install
    error: Header file 'mjdata.h' does not exist.
    ----------------------------------------
ERROR: Command errored out with exit status 1: /u/slerman/miniconda3/envs/L/bin/python -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-req-build-21crwfji/setup.py'""'""'; __file__='""'""'/tmp/pip-req-build-21crwfji/setup.py'""'""';f = getattr(tokenize, '""'""'open'""'""', open)(__file__) if os.path.exists(__file__) else io.StringIO('""'""'from setuptools import setup; setup()'""'""');code = f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-saom06fy/install-record.txt --single-version-externally-managed --compile --install-headers /u/slerman/miniconda3/envs/RL/include/python3.8/dm-control Check the logs for full command output.
```"
Mujoco library error in dm_control,"Hi,
While configuring dm_control with mushroom_rl, I am finding difficulty in configuring mujoco200. Following is the error:

AttributeError: <HOME>/.mujoco/mujoco200/bin/libmujoco200.so: undefined symbol: mjr_label

Following are the environment variables set:
export MUJOCO_GL=osmesa
export MJLIB_PATH=""<HOME>/.mujoco/mujoco200/bin/libmujoco200.so""
export MJKEY_PATH=""<HOME>/.mujoco/mujoco200/mjkey.txt""
export MUJOCO_PY_MJPRO_PATH=""<HOME>/.mujoco/mujoco200/""
export MUJOCO_PY_MJKEY_PATH=""<HOME>/.mujoco/mujoco200/mjkey.txt""
export LD_LIBRARY_PATH=""$LD_LIBRARY_PATH:<HOME>/.mujoco/mujoco200/bin""

I am stuck for a long at this point. Kindly help
"
Bump pillow from 8.3.2 to 9.0.0,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 8.3.2 to 9.0.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>9.0.0</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/9.0.0.html"">https://pillow.readthedocs.io/en/stable/releasenotes/9.0.0.html</a></p>
<h2>Changes</h2>
<ul>
<li>Restrict builtins for ImageMath.eval() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5923"">#5923</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Ensure JpegImagePlugin stops at the end of a truncated file <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5921"">#5921</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fixed ImagePath.Path array handling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5920"">#5920</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Remove consecutive duplicate tiles that only differ by their offset <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5919"">#5919</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Removed redundant part of condition <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5915"">#5915</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Explicitly enable strip chopping for large uncompressed TIFFs <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5517"">#5517</a> [<a href=""https://github.com/kmilos""><code>@​kmilos</code></a>]</li>
<li>Use the Windows method to get TCL functions on Cygwin <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5807"">#5807</a> [<a href=""https://github.com/DWesl""><code>@​DWesl</code></a>]</li>
<li>Changed error type to allow for incremental WebP parsing <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5404"">#5404</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Improved I;16 operations on big endian <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5901"">#5901</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Ensure that BMP pixel data offset does not ignore palette <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5899"">#5899</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Limit quantized palette to number of colors <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5879"">#5879</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use latin1 encoding to decode bytes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5870"">#5870</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fixed palette index for zeroed color in FASTOCTREE quantize <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5869"">#5869</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>When saving RGBA to GIF, make use of first transparent palette entry <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5859"">#5859</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Pass SAMPLEFORMAT to libtiff <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5848"">#5848</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added rounding when converting P and PA <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5824"">#5824</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Improved putdata() documentation and data handling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5910"">#5910</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Exclude carriage return in PDF regex to help prevent ReDoS <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5912"">#5912</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Image.NONE is only used for resampling and dithers <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5908"">#5908</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fixed freeing pointer in ImageDraw.Outline.transform <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5909"">#5909</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Add Tidelift alignment action and badge <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5763"">#5763</a> [<a href=""https://github.com/aclark4life""><code>@​aclark4life</code></a>]</li>
<li>Replaced further direct invocations of setup.py <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5906"">#5906</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added ImageShow support for xdg-open <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5897"">#5897</a> [<a href=""https://github.com/m-shinder""><code>@​m-shinder</code></a>]</li>
<li>Fixed typo <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5902"">#5902</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Switched from deprecated &quot;setup.py install&quot; to &quot;pip install .&quot; <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5896"">#5896</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Support 16-bit grayscale ImageQt conversion <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5856"">#5856</a> [<a href=""https://github.com/cmbruns""><code>@​cmbruns</code></a>]</li>
<li>Fixed raising OSError in _safe_read when size is greater than SAFEBLOCK <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5872"">#5872</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Convert subsequent GIF frames to RGB or RGBA <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5857"">#5857</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>WebP: Fix memory leak during decoding on failure <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5798"">#5798</a> [<a href=""https://github.com/ilai-deutel""><code>@​ilai-deutel</code></a>]</li>
<li>Do not prematurely return in ImageFile when saving to stdout <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5665"">#5665</a> [<a href=""https://github.com/infmagic2047""><code>@​infmagic2047</code></a>]</li>
<li>Added support for top right and bottom right TGA orientations <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5829"">#5829</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Corrected ICNS file length in header <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5845"">#5845</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Block tile TIFF tags when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5839"">#5839</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added line width argument to ImageDraw polygon <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5694"">#5694</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Do not redeclare class each time when converting to NumPy <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5844"">#5844</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Only prevent repeated polygon pixels when drawing with transparency <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5835"">#5835</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix pushes_fd method signature <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5833"">#5833</a> [<a href=""https://github.com/hoodmane""><code>@​hoodmane</code></a>]</li>
<li>Add support for pickling TrueType fonts <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5826"">#5826</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Only prefer command line tools SDK on macOS over default MacOSX SDK <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5828"">#5828</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix compilation on 64-bit Termux <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5793"">#5793</a> [<a href=""https://github.com/landfillbaby""><code>@​landfillbaby</code></a>]</li>
<li>Replace 'setup.py sdist' with '-m build --sdist' <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5785"">#5785</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Use declarative package configuration <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5784"">#5784</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Use title for display in ImageShow <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5788"">#5788</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix for PyQt6 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5775"">#5775</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/main/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>9.0.0 (2022-01-02)</h2>
<ul>
<li>
<p>Restrict builtins for ImageMath.eval(). CVE-2022-22817 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5923"">#5923</a>
[radarhere]</p>
</li>
<li>
<p>Ensure JpegImagePlugin stops at the end of a truncated file <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5921"">#5921</a>
[radarhere]</p>
</li>
<li>
<p>Fixed ImagePath.Path array handling. CVE-2022-22815, CVE-2022-22816 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5920"">#5920</a>
[radarhere]</p>
</li>
<li>
<p>Remove consecutive duplicate tiles that only differ by their offset <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5919"">#5919</a>
[radarhere]</p>
</li>
<li>
<p>Improved I;16 operations on big endian <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5901"">#5901</a>
[radarhere]</p>
</li>
<li>
<p>Limit quantized palette to number of colors <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5879"">#5879</a>
[radarhere]</p>
</li>
<li>
<p>Fixed palette index for zeroed color in FASTOCTREE quantize <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5869"">#5869</a>
[radarhere]</p>
</li>
<li>
<p>When saving RGBA to GIF, make use of first transparent palette entry <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5859"">#5859</a>
[radarhere]</p>
</li>
<li>
<p>Pass SAMPLEFORMAT to libtiff <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5848"">#5848</a>
[radarhere]</p>
</li>
<li>
<p>Added rounding when converting P and PA <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5824"">#5824</a>
[radarhere]</p>
</li>
<li>
<p>Improved putdata() documentation and data handling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5910"">#5910</a>
[radarhere]</p>
</li>
<li>
<p>Exclude carriage return in PDF regex to help prevent ReDoS <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5912"">#5912</a>
[hugovk]</p>
</li>
<li>
<p>Fixed freeing pointer in ImageDraw.Outline.transform <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5909"">#5909</a>
[radarhere]</p>
</li>
<li>
<p>Added ImageShow support for xdg-open <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5897"">#5897</a>
[m-shinder, radarhere]</p>
</li>
<li>
<p>Support 16-bit grayscale ImageQt conversion <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5856"">#5856</a>
[cmbruns, radarhere]</p>
</li>
<li>
<p>Convert subsequent GIF frames to RGB or RGBA <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5857"">#5857</a>
[radarhere]</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/82541b6dec8452cb612067fcebba1c5a1a2bfdc8""><code>82541b6</code></a> 9.0.0 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/cae5ac495badd7c7ecfad8223a08f55f5d2eaacb""><code>cae5ac4</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5924"">#5924</a> from radarhere/cves</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/ed4cf7813777ad8478cac46f448bc45416a2a99e""><code>ed4cf78</code></a> CVEs TBD</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/d7f60d1d5a746eb01d4cb3c7fb05b6593f46b0f5""><code>d7f60d1</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5923"">#5923</a> from radarhere/imagemath_eval</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/8531b01d6cdf0b70f256f93092caa2a5d91afc11""><code>8531b01</code></a> Restrict builtins for ImageMath.eval</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/1efb1d9fabd1dfdbf7982035eca0dae7306abef1""><code>1efb1d9</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5922"">#5922</a> from radarhere/releasenotes</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/f6c78713a491764dfac576f6c42127755f2c62b3""><code>f6c7871</code></a> Added release notes for <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5919"">#5919</a>, <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5920"">#5920</a> and <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5921"">#5921</a></li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/032d2dc3658f94718109068ac70799313e440754""><code>032d2dc</code></a> Update CHANGES.rst [ci skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/baae9ec4b67c68e3adaf1208cf54e8de5e38a6fd""><code>baae9ec</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5921"">#5921</a> from radarhere/jpeg_eoi</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/1059eb537639925c96d3245dcd73c106d4266c83""><code>1059eb5</code></a> If appended EOI did not work, do not keep trying</li>
<li>Additional commits viewable in <a href=""https://github.com/python-pillow/Pillow/compare/8.3.2...9.0.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=8.3.2&new-version=9.0.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Changing the size of objects in control suite,"Is it possible to change the size or shape of an object while the sim is running without creating an entirely new physics environment? For example, changing the length of the cartpole pole between calls to physics.step()?

The closest I've gotten is initializing a new physics object by editing the XML but the behavior doesn't seem as intended and is painfully slow.

Any help would be appreciated. Thanks!
"
Bump numpy from 1.19.5 to 1.21.0,"Bumps [numpy](https://github.com/numpy/numpy) from 1.19.5 to 1.21.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/numpy/numpy/releases"">numpy's releases</a>.</em></p>
<blockquote>
<h2>v1.21.0</h2>
<h1>NumPy 1.21.0 Release Notes</h1>
<p>The NumPy 1.21.0 release highlights are</p>
<ul>
<li>continued SIMD work covering more functions and platforms,</li>
<li>initial work on the new dtype infrastructure and casting,</li>
<li>universal2 wheels for Python 3.8 and Python 3.9 on Mac,</li>
<li>improved documentation,</li>
<li>improved annotations,</li>
<li>new <code>PCG64DXSM</code> bitgenerator for random numbers.</li>
</ul>
<p>In addition there are the usual large number of bug fixes and other
improvements.</p>
<p>The Python versions supported for this release are 3.7-3.9. Official
support for Python 3.10 will be added when it is released.</p>
<p>:warning:  Warning: there are unresolved problems compiling NumPy 1.21.0 with gcc-11.1 .</p>
<ul>
<li>Optimization level <code>-O3</code> results in many wrong warnings when running the tests.</li>
<li>On some hardware NumPy will hang in an infinite loop.</li>
</ul>
<h2>New functions</h2>
<h3>Add PCG64DXSM BitGenerator</h3>
<p>Uses of the PCG64 BitGenerator in a massively-parallel context have
been shown to have statistical weaknesses that were not apparent at the
first release in numpy 1.17. Most users will never observe this weakness
and are safe to continue to use PCG64. We have introduced a new
PCG64DXSM BitGenerator that will eventually become the new default
BitGenerator implementation used by <code>default_rng</code> in future releases.
PCG64DXSM solves the statistical weakness while preserving the
performance and the features of PCG64.</p>
<p>See <code>upgrading-pcg64</code> for more details.</p>
<p>(<a href=""https://github-redirect.dependabot.com/numpy/numpy/pull/18906"">gh-18906</a>)</p>
<h2>Expired deprecations</h2>
<ul>
<li>The <code>shape</code> argument <code>numpy.unravel_index</code> cannot be
passed as <code>dims</code> keyword argument anymore. (Was deprecated in NumPy
1.16.)</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/numpy/numpy/commit/b235f9e701e14ed6f6f6dcba885f7986a833743f""><code>b235f9e</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/19283"">#19283</a> from charris/prepare-1.21.0-release</li>
<li><a href=""https://github.com/numpy/numpy/commit/34aebc2824cf8c2bdbe19040b82f98f18557c8ba""><code>34aebc2</code></a> MAINT: Update 1.21.0-notes.rst</li>
<li><a href=""https://github.com/numpy/numpy/commit/493b64bfe9c5396498325b87e5e80e1917555c41""><code>493b64b</code></a> MAINT: Update 1.21.0-changelog.rst</li>
<li><a href=""https://github.com/numpy/numpy/commit/07d7e72ab6880c05b5fdd98482cf88982e778393""><code>07d7e72</code></a> MAINT: Remove accidentally created directory.</li>
<li><a href=""https://github.com/numpy/numpy/commit/032fca5e2e9749b152ec56153f476e05efdff287""><code>032fca5</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/19280"">#19280</a> from charris/backport-19277</li>
<li><a href=""https://github.com/numpy/numpy/commit/7d25b81025a50cc0368f5727c65e875ca769469a""><code>7d25b81</code></a> BUG: Fix refcount leak in ResultType</li>
<li><a href=""https://github.com/numpy/numpy/commit/fa5754e8c159a37fcd9345df261cf82821088ea0""><code>fa5754e</code></a> BUG: Add missing DECREF in new path</li>
<li><a href=""https://github.com/numpy/numpy/commit/61127bb4d46d523b699da1b63abaa5035670da27""><code>61127bb</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/19268"">#19268</a> from charris/backport-19264</li>
<li><a href=""https://github.com/numpy/numpy/commit/143d45fff3ed9e051bdeef7bdb4df38025ea7d1c""><code>143d45f</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/numpy/numpy/issues/19269"">#19269</a> from charris/backport-19228</li>
<li><a href=""https://github.com/numpy/numpy/commit/d80e4738f781a1d206bbc04a2e863299e5f2e104""><code>d80e473</code></a> BUG: Removed typing for == and != in dtypes</li>
<li>Additional commits viewable in <a href=""https://github.com/numpy/numpy/compare/v1.19.5...v1.21.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=numpy&package-manager=pip&previous-version=1.19.5&new-version=1.21.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Not maching versions of Mujoco,"I have an issue trying to run a script.
I get the following error - MuJoCo library version (210) does not match header version (211)

Hope someone can help me.

Thank you."
IMU in Humanoid's observation,"Hello,

   in `humanoid.xml` is IMU defined, but never used.

Thanks.
Have a nice day."
Fixed installation dm_control on M1,"Hello,

   after successfully installing the dm_control package I get an error about the Mujoco version, I must use lib from 2.1.1 because only this version is compiled for M1 and is not allowed.

```bash
(base) ➜ martin@MacBook-Pro-uzivatela-Martin  ~  python3                                               
Python 3.9.7 | packaged by conda-forge | (default, Sep 29 2021, 19:24:02) 
[Clang 11.1.0 ] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> from dm_control import suite
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/suite/__init__.py"", line 24, in <module>
    from dm_control.suite import acrobot
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/suite/acrobot.py"", line 20, in <module>
    from dm_control import mujoco
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/mujoco/engine.py"", line 42, in <module>
    from dm_control.mujoco import index
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/mujoco/index.py"", line 88, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 20, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/Users/martin/miniforge3/lib/python3.9/site-packages/dm_control/mujoco/wrapper/core.py"", line 65, in <module>
    raise Error(""MuJoCo library version ({0}) does not match header version ""
dm_control.mujoco.wrapper.core.Error: MuJoCo library version (210) does not match header version (211)
```"
OSError: /root/.mujoco/mujoco-2.1.1/lib/libmujoco.so.2.1.1: undefined symbol: __glewActiveTexture,"platform: ubuntu18.04
mujoco version: 2.1.1
```
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/suite/__init__.py"", line 24, in <module>
    from dm_control.suite import acrobot
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/suite/acrobot.py"", line 20, in <module>
    from dm_control import mujoco
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 42, in <module>
    from dm_control.mujoco import index
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/index.py"", line 88, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 20, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/wrapper/core.py"", line 29, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 17, in <module>
    mjlib = util.get_mjlib()
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/site-packages/dm_control/mujoco/wrapper/util.py"", line 123, in get_mjlib
    return ctypes.cdll.LoadLibrary(library_path)
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/ctypes/__init__.py"", line 442, in LoadLibrary
    return self._dlltype(name)
  File ""/root/miniconda3/envs/lowprec_rl/lib/python3.7/ctypes/__init__.py"", line 364, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: /root/.mujoco/mujoco-2.1.1/lib/libmujoco.so.2.1.1: undefined symbol: __glewActiveTexture
```"
Error when trying to deepcopy environment from the manipulation module,"Hi, I'm using Pytorch Lightning to solve a robotic manipulation task (reach_duplo_features) and this library makes a copy of the hyperparameters passed to its main class. When it tries to copy the environment, I get the following error:

NotImplementedError: Cannot copy from elements with attachments

Environments of the suite module work well, but those on the manipulation module crash.


P.S.: While I'm at it, environments on the manipulation domain don't allow flat observations, like those loaded using suite.load(). It would be great to have that option.

Thanks!"
Prevent potential collisions with environment in custom manipulation tasks,"Hello, thank you all for this great work! 

This issue acctually has nothing to do with a bug. I just have a question regarding to `manipulation` environment, which confused me a lot (even after spend lots of time reading the source code of dmc): 

Who (Mujoco or dmc?) or which part of the code (if it is dmc) defines the ""never touch the floor"" behaviour of a Jaco arm? I want to implement similar thing in a customed env and (in the future) on a real robot arm. This behaviour is quite attractive because it could prevent the arm do any harm (to desk or people if set them as dynamic `Entity` I think).

Codes below to demonstrate the ""never touch floor"" behaviour (which I want to know how it is defined or maybe how to modify for personal preference).

``` python
from dm_control import manipulation
from dm_control import viewer
import numpy as np

env = manipulation.load('reassemble_3_bricks_fixed_order_vision', seed=42)
action_spec = env.action_spec()

# Define a uniform random policy.
def touch_ground_policy(time_step):
  del time_step  # Unused.
  a = np.random.uniform(low=action_spec.minimum,
                           high=action_spec.maximum,
                           size=action_spec.shape)
  a = np.zeros_like(a)
  a[1] = -100
  a[2] = -100

  return a

# Launch the viewer application.
viewer.launch(env, policy=touch_ground_policy)
```

To be honest I not familiar with Mujoco and I would appreciate it a lot if you can help me with this question. Thank you very much!"
Running dm_control via Conda on macOS,"I installed the latest release 2.1.1, and made sure to run 'brew install glfw'. Then I updated dm_control with pip... however I am still getting this error:

`'Unable to load EGL library', 'dlopen(EGL, 10): image not found', 'EGL', None`

I'm not sure what the problem is. My code sets env variables as follows:

```
MKL_SERVICE_FORCE_INTEL: '1'
MUJOCO_GL: 'egl'
```

But the problem persists even when I get rid of those."
Bump lxml from 4.6.3 to 4.6.5,"Bumps [lxml](https://github.com/lxml/lxml) from 4.6.3 to 4.6.5.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/lxml/lxml/blob/master/CHANGES.txt"">lxml's changelog</a>.</em></p>
<blockquote>
<h1>4.6.5 (2021-12-12)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>
<p>A vulnerability (GHSL-2021-1038) in the HTML cleaner allowed sneaking script
content through SVG images.</p>
</li>
<li>
<p>A vulnerability (GHSL-2021-1037) in the HTML cleaner allowed sneaking script
content through CSS imports and other crafted constructs.</p>
</li>
</ul>
<h1>4.6.4 (2021-11-01)</h1>
<h2>Features added</h2>
<ul>
<li>
<p>GH#317: A new property <code>system_url</code> was added to DTD entities.
Patch by Thirdegree.</p>
</li>
<li>
<p>GH#314: The <code>STATIC_*</code> variables in <code>setup.py</code> can now be passed via env vars.
Patch by Isaac Jurado.</p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/lxml/lxml/commit/a9611ba80bc5196c1dd07a0b1964fcb603695d63""><code>a9611ba</code></a> Fix a test in Py2.</li>
<li><a href=""https://github.com/lxml/lxml/commit/a3eacbc0dcf1de1c822ec29fb7d090a4b1712a9c""><code>a3eacbc</code></a> Prepare release of 4.6.5.</li>
<li><a href=""https://github.com/lxml/lxml/commit/b7ea6871bd751b588868cf85b7784211f2c12fe7""><code>b7ea687</code></a> Update changelog.</li>
<li><a href=""https://github.com/lxml/lxml/commit/69a747356655158fdf9abaecea5feafb3bd6b5f5""><code>69a7473</code></a> Cleaner: cover some more cases where scripts could sneak through in specially...</li>
<li><a href=""https://github.com/lxml/lxml/commit/54d2985a36184a4b36017a6000fa4d11411f7292""><code>54d2985</code></a> Fix condition in test decorator.</li>
<li><a href=""https://github.com/lxml/lxml/commit/4b220b5ee6f53312418004d830d37cef4fbc1681""><code>4b220b5</code></a> Use the non-depcrecated TextTestResult instead of _TextTestResult (<a href=""https://github-redirect.dependabot.com/lxml/lxml/issues/333"">GH-333</a>)</li>
<li><a href=""https://github.com/lxml/lxml/commit/d85c6de992886dd13f6b7acb8e549674d313f6f8""><code>d85c6de</code></a> Exclude a test when using the macOS system libraries because it fails with li...</li>
<li><a href=""https://github.com/lxml/lxml/commit/cd4bec9cb62b3134b09494bd0ba6b6bc11d184df""><code>cd4bec9</code></a> Add macOS-M1 as wheel build platform.</li>
<li><a href=""https://github.com/lxml/lxml/commit/fd0d4713f258f77e57d289415001d5b9ce04ce53""><code>fd0d471</code></a> Install automake and libtool in macOS build to be able to install the latest ...</li>
<li><a href=""https://github.com/lxml/lxml/commit/f2330237440df7e8f39c3ad1b1aa8852be3b27c0""><code>f233023</code></a> Cleaner: Remove SVG image data URLs since they can embed script content.</li>
<li>Additional commits viewable in <a href=""https://github.com/lxml/lxml/compare/lxml-4.6.3...lxml-4.6.5"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=lxml&package-manager=pip&previous-version=4.6.3&new-version=4.6.5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Cost comparison of dynamic physics object from PyMJCF generation vs Extra object rendering,"Hello,

I am working on a RL project with an environment that has a base scene, as well as additional objects. 

The base scene consists of a kitchen layout (e.g. walls, counters, stovetop, etc). At the start of each episode, I want to populate this scene with 5 smaller objects from a set of 20 object meshes (e.g. plate, pan, fruit, can, etc). The objects which appear in the kitchen should to be different every episode. In short, the base scene layout remains constant each episode while the kitchen items in the scene vary. What is the recommended way to implement this?

Thus far, I can imagine two ways to generate/reset the environment at the beginning of each training episode that allow for different objects to be present in some episodes and not others:

1.  Have a base `PyMJCF RootElement` from one xml file that contains basic scene layout (floor, walls, etc), and add new elements which attach dynamically for each episode. If I understand correctly, this requires reinstatiating a physics object each time, which could be expensive. 
2. Instantiate a prebuilt XML with all objects out of frame, and at each episode reset, move a subset of them in frame. This incurs rendering costs of unused objects, which could also be expensive.

Do you have a recommendation for one procedure over the other, or another recommendation for random episode-wise object addition/injection? Thank you!

Additionally, will `dm_control` continue to be actively maintained and new features added? Another outstanding issue (#111) is also plaguing this project. I understand that is solvable in the XML (though more laboriously, via manual path adjustments), but it would be great to have the parsing functionality match that of the C compiler. "
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_CONTACTFULL,"Hi, I am trying to reproduce the experiment from paper ""Learning human behaviors from motion capture by adversarial imitation"". I used the code from https://github.com/huiwenzhang/merel-mocap-gail. But after running about 400 iterations, it throws the following error:
WARNING:absl:Pre-allocated contact buffer is full. Increase nconmax above 100. Time = 0.0000.
Traceback (most recent call last):
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/runpy.py"", line 193, in _run_module_as_main
    ""__main__"", mod_spec)
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/runpy.py"", line 85, in _run_code
    exec(code, run_globals)
  File ""/home/yh/Projects/IL/merel-mocap-gail-master/baselines/baselines/gail/run_mujoco.py"", line 268, in <module>
    main(args)
  File ""/home/yh/Projects/IL/merel-mocap-gail-master/baselines/baselines/gail/run_mujoco.py"", line 125, in main
    args.obs_only
  File ""/home/yh/Projects/IL/merel-mocap-gail-master/baselines/baselines/gail/run_mujoco.py"", line 181, in train
    obs_only=obs_only)
  File ""/home/yh/Projects/IL/merel-mocap-gail-master/baselines/baselines/gail/trpo_mpi.py"", line 316, in learn
    seg = seg_gen.__next__()
  File ""/home/yh/Projects/IL/merel-mocap-gail-master/baselines/baselines/gail/trpo_mpi.py"", line 132, in traj_segment_generator
    env.reset()
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/site-packages/dm_control/rl/control.py"", line 82, in reset
    self._task.initialize_episode(self._physics)
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/site-packages/dm_control/suite/humanoid_CMU.py"", line 136, in initialize_episode
    physics.after_reset()
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 298, in after_reset
    self.forward()
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 308, in forward
    mjlib.mj_forward(self.model.ptr, self.data.ptr)
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/contextlib.py"", line 119, in __exit__
    next(self.gen)
  File ""/home/yh/anaconda3/envs/gail/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 331, in check_invalid_state
    raise _control.PhysicsError(message)
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_CONTACTFULL



I have tried all dm_control version."
AttributedError when run bash scripts/run.sh,"when i run the command ""bash scripts/run.sh"", i got the following error:

AttributeError: ~/.mujoco/mujoco210/bin/libmujoco210.so: undefined symbol: mj_certQuestion

how can i fix it?
Thanks a lot. I'm looking forward to your reply."
Colab notebook seems broken,"The [colab notebook](https://colab.research.google.com/github/deepmind/dm_control/blob/master/tutorial.ipynb) linked in the readme seems to be broken.

Once it reaches the first section that uses `mujoco` it breaks, screen-shot attached
![image](https://user-images.githubusercontent.com/24539556/142645975-650f3a1f-2d47-4d7b-b131-eef0dd2f79f4.png)

I apologize for this somewhat lazy issue, but I am not really sure what to do to fix it. I tried adding `import mujoco` to the imports cell but that itself throws a package not found error (even though I ran the very first cell which seems to install all mujoco related dependencies)"
Single step the viewer render?,"Is there a recommend way to single step the viewer renderer?

In the example code snippet, I would like to grab input (ex: keyboard presses for direction) and update viewer frames. Currently, viewer.launch(env) blocks. 

```
if __name__ == ""__main__"":

    physics = mujoco.Physics.from_xml_path(MODEL_PATH_XML)
    task = Xarm7()
    env = control.Environment(
        physics, task, time_limit=_TIME_LIMIT, control_timestep=_CONTROL_TIMESTEP
    )

    action_spec = env.action_spec()
    time_step = env.reset()
    viewer.launch(env)
```
An alternative is to encode the teleoperation input as a policy, however it's a bit unclear how that structure would look. Any example snippets would greatly appreciated!"
Rope,"Hi,
How can I remove the golden cube in the default rope of Mujoco?

    <worldbody>
        <body name=""B10"" pos=""0 0 1"">
            <freejoint/>
            <composite type=""rope"" count=""21 1 1"" spacing=""0.04"" offset=""0 0 2"">
                <joint kind=""main"" damping=""0.005""/>
                <geom  type=""capsule"" size="".01 .015"" rgba="".8 .2 .1 1""/>
            </composite>
        </body>
    </worldbody>


![rope](https://user-images.githubusercontent.com/41970839/141692849-9f4804b3-1e5c-4cfb-b05e-7830afd9c25f.png)

"
Add pyproject.toml to silence wheel build errors,"Right now when attempting to install dm_control from the Git repo with
```
pip install git+git://github.com/deepmind/dm_control.git
```
in a new virtual environment will produce errors mentioning that `pyparsing/absl` cannot be found using the wheel install. Although pip will fall back to use `python setup.py install` to install the package, it produces error messages which may be confusing to users.

This PR adds a `pyproject.toml` file following the PEP 517 to specify the build time dependencies [1, 2], which are the dependencies needed for running the autowrap executable correctly. This will suppress the error messages. As a result, the following command should not throw any error.
```
python3 -m venv ~/virtualenvs/dm_control
source ~/virtualenvs/dm_control/bin/activate
pip install -U wheel pip setuptools
pip install git+git://github.com/deepmind/dm_control.git
```

References
[1] https://snarky.ca/what-the-heck-is-pyproject-toml/
[2] https://www.python.org/dev/peps/pep-0517/
"
libEGL warning: failed to open /dev/dri/renderD128: Permission denied,"The following warnings appear when running mujoco environments on a headless machine using egl.
I've set the MUJOCO_GL environment variable to egl using the `export MUJOCO_GL=egl` command.

>libEGL warning: failed to open /dev/dri/renderD129: Permission denied
libEGL warning: failed to open /dev/dri/renderD129: Permission denied
libEGL warning: failed to open /dev/dri/renderD128: Permission denied
libEGL warning: failed to open /dev/dri/renderD128: Permission denied

As they are warnings not errors, the program terminates normally, but it feels a bit slow.
#209 seems to have solved a similar problem by using the `nvidia/cudagl` image,
but I'm using a real machine not a virtual one, so the solution cannot be applied directly.

Any help would be greatly appreciated."
Making Tasks Infinite Horizon,"Hi, from the White Paper I found that these tasks terminate after 1000 steps. I'm working with Infinite Horizon Problems for which I need continuing/ infinite-horizon/ never ending tasks. Is there any way by which I can remove the 1000 steps constraint.

Also, I want to train a DQN agent for which I need discrete actions. Is there any way of discretezing the continuous action space for this suite?

Any help would be really appreciated.
Thanks."
Hardware accelerated rendering on TPUs,"Hi,
I am trying to use Cloud TPUs and rendering seems to be the bottleneck b/c the it is not hardware accelerated. Is there a way to use EGL for rendering on TPUs? "
How to create an environment to give depth images?,"The vision environment provide only RGB images, instead of RGBD (depth) images, but I see some partial implementation of depth images. Here's my attempt to set `depth=True`, but it failes because the `dtype` is set to uint8 which cannot be `inf`. 

```
import collections

import numpy as np
from dm_control import manipulation
from dm_control.manipulation.bricks import _reassemble
from dm_control.manipulation.shared import registry, tags, observations
from dm_control.manipulation.shared.observations import ObservationSettings, _ENABLED_FEATURE, _ENABLED_FTT, \
    _DISABLED_FEATURE, CameraObservableSpec, ObservableSpec


class MyCameraObservableSpec(collections.namedtuple(
    'CameraObservableSpec', ('depth', 'height', 'width') + ObservableSpec._fields)):
    """"""Configuration options for camera observables.""""""
    __slots__ = ()


ENABLED_CAMERA_DEPTH = MyCameraObservableSpec(
    height=84,
    width=84,
    enabled=True,
    depth=True,
    update_interval=1,
    buffer_size=1,
    delay=0,
    aggregator=None,
    corruptor=None)

VISION_DEPTH = ObservationSettings(
    proprio=_ENABLED_FEATURE,
    ftt=_ENABLED_FTT,
    prop_pose=_DISABLED_FEATURE,
    camera=ENABLED_CAMERA_DEPTH)


@registry.add(tags.VISION)
def my_env():
    return _reassemble(obs_settings=VISION_DEPTH,
                       num_bricks=5,
                       randomize_initial_order=True,
                       randomize_desired_order=True)


env = manipulation.load('my_env', seed=0)

spec = env.action_spec()

for i in range(10):
    a = np.random.uniform(spec.minimum, spec.maximum, spec.shape)
    time_step = env.step(a)
```"
pip install from git fails,"I tested it on several machines in clean conda installations and got exactly the same error message. All machines run Ubuntu 20.04.

```bash
pip install git+git://github.com/deepmind/dm_control.git
```

fails with the following error message

```bash
ERROR: Command errored out with exit status 1:
     command: /home/kostrikov/miniconda3/envs/test/bin/python -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-req-build-e4i_e72j/setup.py'""'""'; __file__='""'""'/tmp/pip-req-build-e4i_e72j/setup.py'""'""';f = getattr(tokenize, '""'""'open'""'""', open)(__file__) if os.path.exists(__file__) else io.StringIO('""'""'from setuptools import setup; setup()'""'""');code = f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-celpm6j2/install-record.txt --single-version-externally-managed --compile --install-headers /home/kostrikov/miniconda3/envs/test/include/python3.9/dm-control
         cwd: /tmp/pip-req-build-e4i_e72j/
    Complete output (41 lines):
    running install
    running build_mjbindings
    Traceback (most recent call last):
      File ""/tmp/pip-req-build-e4i_e72j/dm_control/autowrap/autowrap.py"", line 149, in <module>
        app.run(main)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/site-packages/absl/app.py"", line 312, in run
        _run_main(main, args)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/site-packages/absl/app.py"", line 258, in _run_main
        sys.exit(main(argv))
      File ""/tmp/pip-req-build-e4i_e72j/dm_control/autowrap/autowrap.py"", line 113, in main
        parser.parse_consts_typedefs(src)
      File ""/tmp/pip-req-build-e4i_e72j/dm_control/autowrap/binding_generator.py"", line 355, in parse_consts_typedefs
        self.recurse_into_conditionals(tokens)
      File ""/tmp/pip-req-build-e4i_e72j/dm_control/autowrap/binding_generator.py"", line 370, in recurse_into_conditionals
        self.typedefs_dict.update({token.name: token.typename})
      File ""/tmp/pip-req-build-e4i_e72j/dm_control/autowrap/codegen_util.py"", line 78, in __setitem__
        raise ValueError(""Key '{}' already exists."".format(k))
    ValueError: Key 'mjtNum' already exists.
    Traceback (most recent call last):
      File ""<string>"", line 1, in <module>
      File ""/tmp/pip-req-build-e4i_e72j/setup.py"", line 176, in <module>
        setup(
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/site-packages/setuptools/__init__.py"", line 153, in setup
        return distutils.core.setup(**attrs)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/distutils/core.py"", line 148, in setup
        dist.run_commands()
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/distutils/dist.py"", line 966, in run_commands
        self.run_command(cmd)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/distutils/dist.py"", line 985, in run_command
        cmd_obj.run()
      File ""/tmp/pip-req-build-e4i_e72j/setup.py"", line 140, in run
        self.run_command('build_mjbindings')
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/distutils/cmd.py"", line 313, in run_command
        self.distribution.run_command(command)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/distutils/dist.py"", line 985, in run_command
        cmd_obj.run()
      File ""/tmp/pip-req-build-e4i_e72j/setup.py"", line 115, in run
        subprocess.check_call(command)
      File ""/home/kostrikov/miniconda3/envs/test/lib/python3.9/subprocess.py"", line 373, in check_call
        raise CalledProcessError(retcode, cmd)
    subprocess.CalledProcessError: Command '['/home/kostrikov/miniconda3/envs/test/bin/python', 'dm_control/autowrap/autowrap.py', '--header_paths=/home/kostrikov/.mujoco/mujoco210/include/mjdata.h /home/kostrikov/.mujoco/mujoco210/include/mjmodel.h /home/kostrikov/.mujoco/mujoco210/include/mjrender.h /home/kostrikov/.mujoco/mujoco210/include/mjui.h /home/kostrikov/.mujoco/mujoco210/include/mjvisualize.h /home/kostrikov/.mujoco/mujoco210/include/mjxmacro.h /home/kostrikov/.mujoco/mujoco210/include/mujoco.h', '--output_dir=/tmp/pip-req-build-e4i_e72j/build/lib/dm_control/mujoco/wrapper/mjbindings']' returned non-zero exit status 1.
    ----------------------------------------
ERROR: Command errored out with exit status 1: /home/kostrikov/miniconda3/envs/test/bin/python -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-req-build-e4i_e72j/setup.py'""'""'; __file__='""'""'/tmp/pip-req-build-e4i_e72j/setup.py'""'""';f = getattr(tokenize, '""'""'open'""'""', open)(__file__) if os.path.exists(__file__) else io.StringIO('""'""'from setuptools import setup; setup()'""'""');code = f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-celpm6j2/install-record.txt --single-version-externally-managed --compile --install-headers /home/kostrikov/miniconda3/envs/test/include/python3.9/dm-control Check the logs for full command output.
```"
egl rendering is slow (same rendering speed as osmesa)?,"Hi! I recently tried running the suite for pixel observation mujoco environments on Azure V100/P100 headless machines using egl rendering. However I found that it seems egl rendering runs at the same speed as osmesa software rendering. It runs alright without any warning or error messages, just being slow, so I'm curious 1) is this the expected behavior (egl same speed as osmesa)? 2) If not, is there any extra libraries I should install to make egl render faster? 

Thank you so much!"
Documentation Plans,Are there any plans to create a readthedocs for enhanced readability and API lookup?
OpenGL on Macbook?,"It's great to see that MuJoCo is open-sourced and the installation process is more streamlined! I'm testing if the Mac version would work on my M1 MacBook, and I keep getting:

```
    raise ImportError(""Unable to load EGL library"", *err.args)
ImportError: ('Unable to load EGL library', 'dlopen(EGL, 10): image not found', 'EGL', None)
```

I tried the following:
`pip install PyOpenGL-accelerate`
and
`conda install pyopengl`

Both installed successfully, but I get the same error."
Won't run on school's compute,"This is the last thing the system admin said:

`yeah I saw seg faults as well.  I think at this point we might have to throw up our hands.  this code seems to be somewhat ubuntu specific and I’m not sure if it’s been tested on RHEL.  we could try posting an issue on github`

"
Generalize inverse kinematics to any number of target sites,Would you be interested in generalizing [this](https://github.com/deepmind/dm_control/blob/master/dm_control/utils/inverse_kinematics.py#L37) function to support any number of target sites? Currently it only works for one site. I could prepare a PR if interesting.
Running Simultaneous Agents?,"Is it possible to configure DM Control, to run Agents simultaneously? For example, can I have 10 Walkers instead of just one? Is that possible from DM Control side and Mujoco side?
My motivation is doing something like ML-Agents (Unity), which allows running multiple environments at the same time and even multiple unity instances."
How can I install dm_control in python2.7?,"Hello, I want to use dm_control in python2.7,
How can I install it?"
Faster version of quaternion multiplication `quat_mul`,This is a proposed change for #201. With this simple change the function should be about 2.5x faster than the original because it avoids the overhead associated with matrix multiplication.
Faster quaternion multiplication in `transformations.quat_mul`,"Another simple idea: speed up `quat_mul` by about a factor of 2.5x here:

https://github.com/deepmind/dm_control/blob/master/dm_control/utils/transformations.py#L345

This can be done by writing the Hamilton product directly, as opposed to using matrix multiplication. I can submit a PR if helpful."
Faster implementation of bounded quaternion distance,"This is a proposed change for #197 , a faster version of bounded quaternion distance calculation.

A few points:
* The speedup is a bit above 10x on my machine, compared to the previous implementation.
* To ensure that the change (apart from the speedup) is invisible to the caller of this function, I had to divide the result by 2 and add an extra axis to the returned array. This is only for consistency with the codebase and is not necessary in principle.
* In the docstring function description, I corrected the range of the returned distance to `pi/2` (which was mistakenly saying `pi` before)."
ik: use ||vec(q_t q^*)||^2 error + corresponding jacobian for LM,"fix for #196

@yuvaltassa  I can add tests (~simple FD checks) if you're inclined to merge this."
Bump pillow from 8.2.0 to 8.3.2,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 8.2.0 to 8.3.2.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>8.3.2</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.3.2.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.3.2.html</a></p>
<h2>Security</h2>
<ul>
<li>
<p>CVE-2021-23437 Raise ValueError if color specifier is too long
[hugovk, radarhere]</p>
</li>
<li>
<p>Fix 6-byte OOB read in FliDecode
[wiredfool]</p>
</li>
</ul>
<h2>Python 3.10 wheels</h2>
<ul>
<li>Add support for Python 3.10 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5569"">#5569</a>, <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5570"">#5570</a>
[hugovk, radarhere]</li>
</ul>
<h2>Fixed regressions</h2>
<ul>
<li>
<p>Ensure TIFF <code>RowsPerStrip</code> is multiple of 8 for JPEG compression <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5588"">#5588</a>
[kmilos, radarhere]</p>
</li>
<li>
<p>Updates for <code>ImagePalette</code> channel order <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5599"">#5599</a>
[radarhere]</p>
</li>
<li>
<p>Hide FriBiDi shim symbols to avoid conflict with real FriBiDi library <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5651"">#5651</a>
[nulano]</p>
</li>
</ul>
<h2>8.3.1</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.3.1.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.3.1.html</a></p>
<h2>Changes</h2>
<ul>
<li>Catch OSError when checking if fp is sys.stdout <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5585"">#5585</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Handle removing orientation from alternate types of EXIF data <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5584"">#5584</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Make Image.<strong>array</strong> take optional dtype argument <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5572"">#5572</a> [<a href=""https://github.com/t-vi""><code>@​t-vi</code></a>]</li>
</ul>
<h2>8.3.0</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.3.0.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.3.0.html</a></p>
<h2>Changes</h2>
<ul>
<li>Use snprintf instead of sprintf <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5567"">#5567</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Limit TIFF strip size when saving with LibTIFF <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5514"">#5514</a> [<a href=""https://github.com/kmilos""><code>@​kmilos</code></a>]</li>
<li>Allow ICNS save on all operating systems <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4526"">#4526</a> [<a href=""https://github.com/newpanjing""><code>@​newpanjing</code></a>]</li>
<li>De-zigzag JPEG's DQT when loading; deprecate convert_dict_qtables <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4989"">#4989</a> [<a href=""https://github.com/gofr""><code>@​gofr</code></a>]</li>
<li>Do not use background or transparency index for new color <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5564"">#5564</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Simplified code <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5315"">#5315</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Replaced xml.etree.ElementTree <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5565"">#5565</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/master/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>8.3.2 (2021-09-02)</h2>
<ul>
<li>
<p>CVE-2021-23437 Raise ValueError if color specifier is too long
[hugovk, radarhere]</p>
</li>
<li>
<p>Fix 6-byte OOB read in FliDecode
[wiredfool]</p>
</li>
<li>
<p>Add support for Python 3.10 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5569"">#5569</a>, <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5570"">#5570</a>
[hugovk, radarhere]</p>
</li>
<li>
<p>Ensure TIFF <code>RowsPerStrip</code> is multiple of 8 for JPEG compression <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5588"">#5588</a>
[kmilos, radarhere]</p>
</li>
<li>
<p>Updates for <code>ImagePalette</code> channel order <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5599"">#5599</a>
[radarhere]</p>
</li>
<li>
<p>Hide FriBiDi shim symbols to avoid conflict with real FriBiDi library <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5651"">#5651</a>
[nulano]</p>
</li>
</ul>
<h2>8.3.1 (2021-07-06)</h2>
<ul>
<li>
<p>Catch OSError when checking if fp is sys.stdout <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5585"">#5585</a>
[radarhere]</p>
</li>
<li>
<p>Handle removing orientation from alternate types of EXIF data <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5584"">#5584</a>
[radarhere]</p>
</li>
<li>
<p>Make Image.<strong>array</strong> take optional dtype argument <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5572"">#5572</a>
[t-vi, radarhere]</p>
</li>
</ul>
<h2>8.3.0 (2021-07-01)</h2>
<ul>
<li>
<p>Use snprintf instead of sprintf. CVE-2021-34552 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5567"">#5567</a>
[radarhere]</p>
</li>
<li>
<p>Limit TIFF strip size when saving with LibTIFF <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5514"">#5514</a>
[kmilos]</p>
</li>
<li>
<p>Allow ICNS save on all operating systems <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4526"">#4526</a>
[baletu, radarhere, newpanjing, hugovk]</p>
</li>
<li>
<p>De-zigzag JPEG's DQT when loading; deprecate convert_dict_qtables <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4989"">#4989</a>
[gofr, radarhere]</p>
</li>
<li>
<p>Replaced xml.etree.ElementTree <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5565"">#5565</a>
[radarhere]</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/8013f130a5077b238a4346b73e149432b180a8ea""><code>8013f13</code></a> 8.3.2 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/23c7ca82f09df6ba1047d2d96714eb825f0d7948""><code>23c7ca8</code></a> Update CHANGES.rst</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/8450366be331762ae327036e3c6658c517b05638""><code>8450366</code></a> Update release notes</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/a0afe89990f5ba40a019afc2f22e1b656f8cfd03""><code>a0afe89</code></a> Update test case</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/9e08eb8f78fdfd2f476e1b20b7cf38683754866b""><code>9e08eb8</code></a> Raise ValueError if color specifier is too long</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/bd5cf7db87c6abf7c3510a50170851af5538249f""><code>bd5cf7d</code></a> FLI tests for Oss-fuzz crash.</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/94a0cf1b14f09626c7403af83fa9fef0dfc9bb47""><code>94a0cf1</code></a> Fix 6-byte OOB read in FliDecode</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/cece64f4be10ab28b12a83a3555af579dad343a5""><code>cece64f</code></a> Add 8.3.2 (2021-09-02) [CI skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/e42238637651f191c2fc6e3f4024348c126e0ccc""><code>e422386</code></a> Add release notes for Pillow 8.3.2</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/08dcbb873217874eee0830fc5aaa1f231c5af4fa""><code>08dcbb8</code></a> Pillow 8.3.2 supports Python 3.10 [ci skip]</li>
<li>Additional commits viewable in <a href=""https://github.com/python-pillow/Pillow/compare/8.2.0...8.3.2"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=8.2.0&new-version=8.3.2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Fast calculation of bounded quaternion distance,"I think there's a faster way of doing this calculation:
https://github.com/deepmind/dm_control/blob/master/dm_control/locomotion/tasks/reference_pose/rewards.py#L26

The bounded distance can be computed with a one-liner `np.arccos(2 * np.sum(quat1 * quat2)**2 - 1)` where `quat1`, `quat2` are (4,) arrays assumed to be unit quaternions.

I timed about a factor of 20 speedup with this one.

Also, the returned distance will be 2x larger than in the original function because, in fact, the original function computes half-angle."
Incorrect Jacobian used for orientation IK,"The gradient used here is weird,
https://github.com/deepmind/dm_control/blob/master/dm_control/utils/inverse_kinematics.py#L165

```quat2vel``` does axis-angle conversion of the error quaternion ```q q_t^*```, but the jacr here is actually mapping to ```2 vec(\dot{q} q*) = (0, \omega)```. it's unclear what the loss function is, or how the dual (of an undefined loss) is pulled back to id.

Edit:
Ideally, you'd just take the gradient of the vec(err) and use the jacobian for vec(err) (not jacr).
Let me know if this is the intention and I'll send a PR."
Setting MoCap for dm_control simulations.,"Hello, how can I set the position and orientation of a MoCap object in dm_control? The MjData object has mocap_pos and mocap_quat attributes, but unlike gym no set_mocap_pos and set_mocap_quat functions. "
segmentation fault (core dumped) when initialize pixels.Wrapper,"Hi, I encountered segmentation fault with no additional information when my code run some statement  like this:

```
self._env = pixels.Wrapper(self._env)
```

Here is the error message (**only one line**):

```
[1]    2831350 segmentation fault (core dumped)  python main.py --algo dreamer --env walker-walk --action-repeat 2 --id 
```

I ensured that this issue comes with rendering with EGL. When I turned to `export MUJOCO_GL=osmesa`, it works well, which is however, too slow for me."
Training time compare to PyBullet,"Hi all, I am new to the dm_control suite. I am doing transfer learning on dm_control since it provides different tasks for a same robot. However, I found that it takes way longer time to train an agent on 'hopper-hop' than on 'Hopper-V2'. Usually, td3 can converge within 1e6 steps on 'Hopper-V2', but it still performs very poorly on 'hopper-hop' after the same amount of steps, what is the intuition behind this? Aren't 'hopper-hop' and 'Hopper-V2' similar kind of problem?"
Problem with CMUHumanoidPositionControlledV2020 on GoToTarget task,"dm_control/locomotion/walkers/cmu_humanoid.py contains code to support both versions (2019 & 2020) of the CMU humanoid. But the initial z position of 0.94, specified by _UPRIGHT_POS on line 174, only works for the older humanoid. When selecting the 2020 humanoid on the GoToTarget task, the feet end up well below floor level, which catapults the humanoid upwards and terminates the episode. Changing this value from 0.94 to 1.143 solves the problem for 2020. 

Should there be separate versions of _UPRIGHT_POS for the two CMU humanoids? Or are there other reasons that CMUHumanoidPositionControlledV2020 won't work on the GoToTarget task?"
Are there any well_trained dm_control suite envs repo or pakage?,"hi, everyone here. it is not exactely an issue, i am just wondering, is there any well_trained dm_control suite models? with reinforcement learning algorithms or any algorithms. i am trying to train ball_in_cup env for my project recently. and find nothing well_trained online. "
Why state and observation in Control Suite have different dimensions?,"I read the ""dm_control: Software and Tasks for Continuous Control"". In section 6.2 Domains and Tasks, I notice that state and observation in Control Suite have different dimensions. It makes me a little confused. In my understanding, observation is the partial version of state.(Agents may be unable to get global state because of some factors such as fog of war.) The dimension of state should be the same as the one of observation.
![image](https://user-images.githubusercontent.com/19870128/123724638-41d89c00-d8bf-11eb-8211-43f3a9918fdb.png)
"
How to change the parameters of mujoco tasks?,"For example, I want to change the length of pole in Cartpole task and observe the effect of this change."
segmenting rendered mujoco env,"In mujoco envs, I want to know which pixels of rendered image belong to the robot. A bounding box can help too. 
Also, I've seen [this](https://github.com/openai/mujoco-py/pull/537) in mujoco-py but I'm not sure it is what I want and I don't know how to use it.
Can anybody help?"
Setting states does not yield consistent rendering,"I am running deepmind control and rendering with OSmesa. When setting the states, the rendered results are not consistent. Consider the example below, where I manually set the state before and after taking an action. Since I set the state, I would expect the same output from the rendered:

```
from dm_control import suite

env = suite.load(domain_name='cartpole', task_name='swingup')
state = np.array([1.3, 5.3, 0.1, 2.3])
action = np.array([0.3])
env.reset()
phys = env.physics

phys.set_state(state)
obs1 = phys.render()
env.step(action)
phys.set_state(state)
obs2 = phys.render()
h = lambda img : hash(img.data.tobytes())
print('>>>> should be equal', h(obs1), h(obs2))
```

However, the rendered images are not the same and I get:

```
>>>> should be equal 4676723617026791659 7575396285825095944
```

When I comment out ```env.step(action)```, I get consistent results, so it's not an issue with the rendering itself: 

```
>>>> should be equal -9159741910536992866 -9159741910536992866
```

Is there an issue with my installation, or am I misunderstanding the semantics?


"
Bump pillow from 8.1.1 to 8.2.0,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 8.1.1 to 8.2.0.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>8.2.0</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.2.0.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.2.0.html</a></p>
<h2>Changes</h2>
<ul>
<li>Security fixes for 8.2.0 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5377"">#5377</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Move getxmp() to JpegImageFile <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5376"">#5376</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added getxmp() method <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5144"">#5144</a> [<a href=""https://github.com/UrielMaD""><code>@​UrielMaD</code></a>]</li>
<li>Compile LibTIFF with CMake on Windows <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5359"">#5359</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Add ImageShow support for GraphicsMagick <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5349"">#5349</a> [<a href=""https://github.com/latosha-maltba""><code>@​latosha-maltba</code></a>]</li>
<li>Tiff crash fixes in TiffDecode.c <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5372"">#5372</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>Remove redundant check (addition to <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5364"">#5364</a>) <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5366"">#5366</a> [<a href=""https://github.com/kkopachev""><code>@​kkopachev</code></a>]</li>
<li>Do not load transparent pixels from subsequent GIF frames <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5333"">#5333</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use LZW encoding when saving GIF images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5291"">#5291</a> [<a href=""https://github.com/raygard""><code>@​raygard</code></a>]</li>
<li>Set all transparent colors to be equal in quantize() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5282"">#5282</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Allow PixelAccess to use Python <strong>int</strong> when parsing x and y <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5206"">#5206</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Removed Image._MODEINFO <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5316"">#5316</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Add preserve_tone option to autocontrast <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5350"">#5350</a> [<a href=""https://github.com/elejke""><code>@​elejke</code></a>]</li>
<li>Only import numpy when necessary <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5323"">#5323</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fixed linear_gradient and radial_gradient I and F modes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5274"">#5274</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Add support for reading TIFFs with PlanarConfiguration=2  <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5364"">#5364</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>More OSS-Fuzz support <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5328"">#5328</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>Do not premultiply alpha when resizing with Image.NEAREST resampling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5304"">#5304</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Use quantization method attributes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5353"">#5353</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Dynamically link FriBiDi instead of Raqm <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5062"">#5062</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Removed build_distance_tables return value <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5363"">#5363</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Allow fewer PNG palette entries than the bit depth maximum when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5330"">#5330</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use duration from info dictionary when saving WebP <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5338"">#5338</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Improved efficiency when creating GIF disposal images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5326"">#5326</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Stop flattening EXIF IFD into getexif() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4947"">#4947</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Replaced tiff_deflate with tiff_adobe_deflate compression when saving TIFF images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5343"">#5343</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Save ICC profile from TIFF encoderinfo <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5321"">#5321</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Moved RGB fix inside ImageQt class <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5268"">#5268</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix -Wformat error in TiffDecode <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5305"">#5305</a> [<a href=""https://github.com/lukegb""><code>@​lukegb</code></a>]</li>
<li>Allow alpha_composite destination to be negative <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5313"">#5313</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Ensure file is closed if it is opened by ImageQt.ImageQt <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5260"">#5260</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added ImageDraw rounded_rectangle method <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5208"">#5208</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added IPythonViewer <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5289"">#5289</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Only draw each rectangle outline pixel once <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5183"">#5183</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use mmap instead of built-in Win32 mapper <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5224"">#5224</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Handle PCX images with an odd stride <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5214"">#5214</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Only read different sizes for &quot;Large Thumbnail&quot; MPO frames <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5168"">#5168</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<h2>Dependencies</h2>
<ul>
<li>Updated harfbuzz to 2.8.0 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5334"">#5334</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<h2>Deprecations</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/master/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>8.2.0 (2021-04-01)</h2>
<ul>
<li>
<p>Added getxmp() method <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5144"">#5144</a>
[UrielMaD, radarhere]</p>
</li>
<li>
<p>Add ImageShow support for GraphicsMagick <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5349"">#5349</a>
[latosha-maltba, radarhere]</p>
</li>
<li>
<p>Do not load transparent pixels from subsequent GIF frames <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5333"">#5333</a>
[zewt, radarhere]</p>
</li>
<li>
<p>Use LZW encoding when saving GIF images <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5291"">#5291</a>
[raygard]</p>
</li>
<li>
<p>Set all transparent colors to be equal in quantize() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5282"">#5282</a>
[radarhere]</p>
</li>
<li>
<p>Allow PixelAccess to use Python <strong>int</strong> when parsing x and y <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5206"">#5206</a>
[radarhere]</p>
</li>
<li>
<p>Removed Image._MODEINFO <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5316"">#5316</a>
[radarhere]</p>
</li>
<li>
<p>Add preserve_tone option to autocontrast <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5350"">#5350</a>
[elejke, radarhere]</p>
</li>
<li>
<p>Fixed linear_gradient and radial_gradient I and F modes <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5274"">#5274</a>
[radarhere]</p>
</li>
<li>
<p>Add support for reading TIFFs with PlanarConfiguration=2 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5364"">#5364</a>
[kkopachev, wiredfool, nulano]</p>
</li>
<li>
<p>Deprecated categories <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5351"">#5351</a>
[radarhere]</p>
</li>
<li>
<p>Do not premultiply alpha when resizing with Image.NEAREST resampling <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5304"">#5304</a>
[nulano]</p>
</li>
<li>
<p>Dynamically link FriBiDi instead of Raqm <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5062"">#5062</a>
[nulano]</p>
</li>
<li>
<p>Allow fewer PNG palette entries than the bit depth maximum when saving <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5330"">#5330</a>
[radarhere]</p>
</li>
<li>
<p>Use duration from info dictionary when saving WebP <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5338"">#5338</a>
[radarhere]</p>
</li>
<li>
<p>Stop flattening EXIF IFD into getexif() <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4947"">#4947</a>
[radarhere, kkopachev]</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/e0e353c0ef7516979a9aedce3792596649ce4433""><code>e0e353c</code></a> 8.2.0 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/ee635befc6497f1c6c4fdb58c232e62d922ec8b7""><code>ee635be</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5377"">#5377</a> from hugovk/security-and-release-notes</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/694c84f88f4299319bac49b20bd9baae82ca41b8""><code>694c84f</code></a> Fix typo [ci skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/8febdad8dd51ad5c75a1db78492973588c7cbf6b""><code>8febdad</code></a> Review, typos and lint</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/fea419665b75f11910e44cfe6f89622fda63e78b""><code>fea4196</code></a> Reorder, roughly alphabetic</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/496245aa4365d0827390bd0b6fbd11287453b3a1""><code>496245a</code></a> Fix BLP DOS -- CVE-2021-28678</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/22e9bee4ef225c0edbb9323f94c26cee0c623497""><code>22e9bee</code></a> Fix DOS in PSDImagePlugin -- CVE-2021-28675</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/ba65f0b08ee8b93195c3f3277820771f5b62aa52""><code>ba65f0b</code></a> Fix Memory DOS in ImageFont</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/bb6c11fb889e6c11b0ee122b828132ee763b5856""><code>bb6c11f</code></a> Fix FLI DOS -- CVE-2021-28676</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/5a5e6db0abf4e7a638fb1b3408c4e495a096cb92""><code>5a5e6db</code></a> Fix EPS DOS on _open -- CVE-2021-28677</li>
<li>Additional commits viewable in <a href=""https://github.com/python-pillow/Pillow/compare/8.1.1...8.2.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=8.1.1&new-version=8.2.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Cannot set device_id for headless GPU rendering,"I am using dm_control for headless GPU rendering for mujoco. My target is to set an argument like device_id in mujoco_py but found out there is no such argument in render() in dm_control. Without this argument, the training is very slow as rendering and training share the same GPU.
Wondering how can I set a different GPU for rendering from that for training. "
Difference in environment rendering between dm_control and gym,"Hello!
I am trying to compare the reacher in dm_control against the default reacher in gym (Reacher-v2) 
When I render the observations to an image, their colors are different, lighter for dm_control (top image), and darker for the default gym (bottom image). 
I used gym's reacher.xml to configure dm_control's environment to be the same and have a common appearance,
 however it seems that there is another factor that determines how the images will appear, something like a default
 background lighting.
Is there something that I am missing?
Thank you
![DM_control_output](https://user-images.githubusercontent.com/51006386/118280196-a4730580-b4d4-11eb-9178-7b7498c06ba8.jpg)
![Learner_output](https://user-images.githubusercontent.com/51006386/118280221-a9d05000-b4d4-11eb-904d-e02b369474de.jpg)

"
Do you plan to add support for open simulator ?,"dm_control is becoming a reference as far as evaluating RL benchmark is concerned. Unfortunately it is based on a Mujoco  which is a closed and not easily accessible for every one. Furthermore, the development of MuJoCo seems to be dead, last release 3 years ago, no support for such an expensive product.
With the research reproducibility in mind, why did Deepmind not choose an open simulator as a backend for dm_control ? Or add possibilities to use several backend ?"
How to use an image as background?,"I want to change the background and grid floor to other images and eventually play video in the background. Any ideas on how can this be done?
"
Physics.set_state not setting angle?,"Hi, 

I'm trying to set the CartPole state as follows. When I compare the newly set state and the input state, it looks all fine.
```
import numpy as np
from dm_control import suite
env = suite.load(domain_name='cartpole', task_name='swingup')
# cart_pos, th, cart_vel, pole_vel
input_state = np.array([ 1.234, 2.345, -3.456, 4.567], dtype=np.float64)
env.physics.set_state(input_state)
print(env.physics.state() - input_state) # all zeros
```

But then when I try to get the observations as follows,  
```
env._task.get_observation(env._physics)
```
the output becomes
```
OrderedDict([('position', array([1.234, 1.   , 0.   ])), ('velocity', array([-3.456,  4.567]))])
```
In other words, the angle observations (and only they) are wrong. Note that for any `input_state`, they are always `[1,0]`. 

May there be a bug or do I call wrong functions for some reason?

Thanks!"
Is it possible to get running on M1 MacBooks?,
Cannot install package dm-tree in raspbian os.,"'pip install dm-tree' hangs forever on Raspberry pi 3 (armv7l) with Raspbian buster OS. can you please help.
Thanks"
Fixes docstring in autowrap.py to include mjui.h,Added mjui.h to the docstring for autowrap so those that need to run autowrap directly will not forget to include it in the arguments
Bump lxml from 4.6.2 to 4.6.3,"Bumps [lxml](https://github.com/lxml/lxml) from 4.6.2 to 4.6.3.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/lxml/lxml/blob/master/CHANGES.txt"">lxml's changelog</a>.</em></p>
<blockquote>
<h1>4.6.3 (2021-03-21)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>A vulnerability (CVE-2021-28957) was discovered in the HTML Cleaner by Kevin Chung,
which allowed JavaScript to pass through.  The cleaner now removes the HTML5
<code>formaction</code> attribute.</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/lxml/lxml/commit/a5f9cb52079dc57477c460dbe6ba0f775e14a999""><code>a5f9cb5</code></a> Prepare release of lxml 4.6.3.</li>
<li><a href=""https://github.com/lxml/lxml/commit/2d01a1ba8984e0483ce6619b972832377f208a0d""><code>2d01a1b</code></a> Add HTML-5 &quot;formaction&quot; attribute to &quot;defs.link_attrs&quot; (<a href=""https://github-redirect.dependabot.com/lxml/lxml/issues/316"">GH-316</a>)</li>
<li><a href=""https://github.com/lxml/lxml/commit/e986a9cb5d54827c59aefa8803bc90954d67221e""><code>e986a9c</code></a> Fix reference in docs.</li>
<li>See full diff in <a href=""https://github.com/lxml/lxml/compare/lxml-4.6.2...lxml-4.6.3"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=lxml&package-manager=pip&previous-version=4.6.2&new-version=4.6.3)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Bump pillow from 8.0.1 to 8.1.1,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 8.0.1 to 8.1.1.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/releases"">pillow's releases</a>.</em></p>
<blockquote>
<h2>8.1.1</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.1.1.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.1.1.html</a></p>
<h2>8.1.0</h2>
<p><a href=""https://pillow.readthedocs.io/en/stable/releasenotes/8.1.0.html"">https://pillow.readthedocs.io/en/stable/releasenotes/8.1.0.html</a></p>
<h2>Changes</h2>
<ul>
<li>Fix TIFF OOB Write error <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5175"">#5175</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix for Buffer Read Overrun in PCX Decoding <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5174"">#5174</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix for SGI Decode buffer overrun <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5173"">#5173</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix OOB Read when saving GIF of xsize=1 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5149"">#5149</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>Add support for PySide6 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5161"">#5161</a> [<a href=""https://github.com/hugovk""><code>@​hugovk</code></a>]</li>
<li>Moved QApplication into one test <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5167"">#5167</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use disposal settings from previous frame in APNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5126"">#5126</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Revert &quot;skip wheels on 3.10-dev due to wheel#354&quot; <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5163"">#5163</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Better _binary module use <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5156"">#5156</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Added exception explaining that <em>repr_png</em> saves to PNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5139"">#5139</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Use previous disposal method in GIF load_end <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5125"">#5125</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Do not catch a ValueError only to raise another <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5090"">#5090</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Allow putpalette to accept 1024 integers to include alpha values <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5089"">#5089</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix OOB Read when writing TIFF with custom Metadata <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5148"">#5148</a> [<a href=""https://github.com/wiredfool""><code>@​wiredfool</code></a>]</li>
<li>Removed unused variable <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5140"">#5140</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix dereferencing of potential null pointers <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5111"">#5111</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Fixed warnings assigning to &quot;unsigned char *&quot; from &quot;char *&quot; <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5127"">#5127</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Add append_images support for ICO <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4568"">#4568</a> [<a href=""https://github.com/ziplantil""><code>@​ziplantil</code></a>]</li>
<li>Fixed comparison warnings <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5122"">#5122</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Block TIFFTAG_SUBIFD <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5120"">#5120</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Fix dereferencing potential null pointer <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5108"">#5108</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Replaced PyErr_NoMemory with ImagingError_MemoryError <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5113"">#5113</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Remove duplicate code <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5109"">#5109</a> [<a href=""https://github.com/cgohlke""><code>@​cgohlke</code></a>]</li>
<li>Moved warning to end of execution <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4965"">#4965</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Removed unused fromstring and tostring C methods <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5026"">#5026</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>init() if one of the formats is unrecognised <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5037"">#5037</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<h2>Dependencies</h2>
<ul>
<li>Updated libtiff to 4.2.0 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5153"">#5153</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated openjpeg to 2.4.0 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5151"">#5151</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated harfbuzz to 2.7.4 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5138"">#5138</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated harfbuzz to 2.7.3 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5128"">#5128</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated libraqm to 0.7.1 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5070"">#5070</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated libimagequant to 2.13.1 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5065"">#5065</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Update FriBiDi to 1.0.10 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5064"">#5064</a> [<a href=""https://github.com/nulano""><code>@​nulano</code></a>]</li>
<li>Updated libraqm to 0.7.1 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5063"">#5063</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
<li>Updated libjpeg-turbo to 2.0.6 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5044"">#5044</a> [<a href=""https://github.com/radarhere""><code>@​radarhere</code></a>]</li>
</ul>
<h2>Deprecations</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/python-pillow/Pillow/blob/master/CHANGES.rst"">pillow's changelog</a>.</em></p>
<blockquote>
<h2>8.1.1 (2021-03-01)</h2>
<ul>
<li>
<p>Use more specific regex chars to prevent ReDoS. CVE-2021-25292
[hugovk]</p>
</li>
<li>
<p>Fix OOB Read in TiffDecode.c, and check the tile validity before reading. CVE-2021-25291
[wiredfool]</p>
</li>
<li>
<p>Fix negative size read in TiffDecode.c. CVE-2021-25290
[wiredfool]</p>
</li>
<li>
<p>Fix OOB read in SgiRleDecode.c. CVE-2021-25293
[wiredfool]</p>
</li>
<li>
<p>Incorrect error code checking in TiffDecode.c. CVE-2021-25289
[wiredfool]</p>
</li>
<li>
<p>PyModule_AddObject fix for Python 3.10 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5194"">#5194</a>
[radarhere]</p>
</li>
</ul>
<h2>8.1.0 (2021-01-02)</h2>
<ul>
<li>
<p>Fix TIFF OOB Write error. CVE-2020-35654 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5175"">#5175</a>
[wiredfool]</p>
</li>
<li>
<p>Fix for Read Overflow in PCX Decoding. CVE-2020-35653 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5174"">#5174</a>
[wiredfool, radarhere]</p>
</li>
<li>
<p>Fix for SGI Decode buffer overrun. CVE-2020-35655 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5173"">#5173</a>
[wiredfool, radarhere]</p>
</li>
<li>
<p>Fix OOB Read when saving GIF of xsize=1 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5149"">#5149</a>
[wiredfool]</p>
</li>
<li>
<p>Makefile updates <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5159"">#5159</a>
[wiredfool, radarhere]</p>
</li>
<li>
<p>Add support for PySide6 <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5161"">#5161</a>
[hugovk]</p>
</li>
<li>
<p>Use disposal settings from previous frame in APNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5126"">#5126</a>
[radarhere]</p>
</li>
<li>
<p>Added exception explaining that <em>repr_png</em> saves to PNG <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5139"">#5139</a>
[radarhere]</p>
</li>
<li>
<p>Use previous disposal method in GIF load_end <a href=""https://github-redirect.dependabot.com/python-pillow/Pillow/issues/5125"">#5125</a>
[radarhere]</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/python-pillow/Pillow/commit/741d8744a54bedbc49f16922c61a06fcb3681f53""><code>741d874</code></a> 8.1.1 version bump</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/179cd1c8f94aabc47e9e522e01683ea9aadbd3a5""><code>179cd1c</code></a> Added 8.1.1 release notes to index</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/7d296653da045e18b379c991797f933e054a7476""><code>7d29665</code></a> Update CHANGES.rst [ci skip]</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/d25036fca7c8658b698492088361453bb20073e2""><code>d25036f</code></a> Credits</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/973a4c333ab6d603e82f6eb2aa6f39d1cfcecccb""><code>973a4c3</code></a> Release notes for 8.1.1</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/521dab94c7ab72b037bd9a83e9663401e0fd2cee""><code>521dab9</code></a> Use more specific regex chars to prevent ReDoS</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/8b8076bdcb3815be0ef0d279651d8d1342b8ea61""><code>8b8076b</code></a> Fix for CVE-2021-25291</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/e25be1e33dc526bfd1094bc778a54d8e29bf66c9""><code>e25be1e</code></a> Fix negative size read in TiffDecode.c</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/f891baa604636cd2506a9360d170bc2cf4963cc5""><code>f891baa</code></a> Fix OOB read in SgiRleDecode.c</li>
<li><a href=""https://github.com/python-pillow/Pillow/commit/cbfdde7b1f2295059a20a539ee9960f0bec7b299""><code>cbfdde7</code></a> Incorrect error code checking in TiffDecode.c</li>
<li>Additional commits viewable in <a href=""https://github.com/python-pillow/Pillow/compare/8.0.1...8.1.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=8.0.1&new-version=8.1.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Support selecting an `EGL_DEVICE` by UUID rather than by index,"I am encountering an error with deploying `dm_control` in a managed HPC environment. Our admin decided to use `UUID` for the device names, which causes `dm_control` (and `mujoco-py`) to raise error when parsing the available devices:

```bash
Traceback (most recent call last):
  File ""/Users/ge/mit/dmc_gen/dmc_gen_analysis/__init__.py"", line 164, in thunk
  File ""/home/gridsan/geyang/jaynes-mount/dmc_gen/2021-03-05/085031.707344/dmc_gen/dmc_gen/train.py"", line 58, in train
    image_size=image_size,
  File ""/home/gridsan/geyang/jaynes-mount/dmc_gen/2021-03-05/085031.707344/dmc_gen/dmc_gen/wrappers.py"", line 28, in make_env
    frame_skip=action_repeat
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dmc2gym/dmc2gym/__init__.py"", line 55, in make
    return gym.make(env_id)
  File ""/home/gridsan/geyang/.conda/envs/dmcgen/lib/python3.6/site-packages/gym/envs/registration.py"", line 145, in make
    return registry.make(id, **kwargs)
  File ""/home/gridsan/geyang/.conda/envs/dmcgen/lib/python3.6/site-packages/gym/envs/registration.py"", line 90, in make
    env = spec.make(**kwargs)
  File ""/home/gridsan/geyang/.conda/envs/dmcgen/lib/python3.6/site-packages/gym/envs/registration.py"", line 59, in make
    cls = load(self.entry_point)
  File ""/home/gridsan/geyang/.conda/envs/dmcgen/lib/python3.6/site-packages/gym/envs/registration.py"", line 18, in load
    mod = importlib.import_module(mod_name)
  File ""/home/gridsan/geyang/.conda/envs/dmcgen/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dmc2gym/dmc2gym/wrappers.py"", line 2, in <module>
    from dm_control import suite
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/suite/acrobot.py"", line 24, in <module>
    from dm_control import mujoco
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control import _render
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/_render/__init__.py"", line 67, in <module>
    Renderer = import_func()  # pylint: disable=invalid-name
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/_render/__init__.py"", line 36, in _import_egl
    from dm_control._render.pyopengl.egl_renderer import EGLContext
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/_render/pyopengl/egl_renderer.py"", line 69, in <module>
    EGL_DISPLAY = create_initialized_headless_egl_display()
  File ""/home/gridsan/geyang/mit/dmc_gen/custom_vendor/dm_control/dm_control/_render/pyopengl/egl_renderer.py"", line 51, in create_initialized_headless_egl_display
    devices = [devices[int(os.environ[""CUDA_VISIBLE_DEVICES""])]]
ValueError: invalid literal for int() with base 10: 'GPU-a15dc796-f172-2e06-2283-cea8159bf118'
```

The reasoning behind this  device `uuid` is explained in the following email (and issue)


> FYI, this is a known error where `dm_control` assumes CUDA_VISIBLE_DEVICES is an integer. We’re using NVIDIA’s UUID API to set the device names to the UUID, rather than the default. The problem with the default naming scheme (0,1,etc) is that it is not consistent. What’s listed as GPU 0 might change even within a job, which you can imagine would cause major problems if you have two people on a node, each allocated one GPU. This sort of alludes to what I’m talking about, but doesn’t get into using the UUID’s instead: https://stackoverflow.com/questions/26123252/inconsistency-of-ids-between-nvidia-smi-l-and-cudevicegetname. It’s a big oversight on Ray’s part to assume that the GPU names are integers, both Tensorflow and Pytorch don’t seem to have a problem with it. I think what they need to understand is that in a shared environment you have to make sure people use only the GPU that’s been allocated to them, and the way to do that is to use the UUID.
"
MJCF: Unable to set the `name` attribute for `<body>` despite being configured to accept it in the schema,"When trying to set the `name` attribute of a `<body>` using the following example:

```
model = mjcf.RootElement()
# Create a simple geom
model.worldbody.add('geom', name='mygeom', type='ellipsoid', size=(1, 1, 0.1), rgba=[1, 0, 0, 1])
# Create a simple spawn
arena = mjcf.RootElement()
spawn_site = arena.worldbody.add('site', name=""myspawn"", pos=(0, 0, 0), group=3, euler=np.array([0, 0, 0.1]))
body = spawn_site.attach(model)
body.set_attributes(name=""mybody"")
body.add('freejoint', name=f""myjoint"")
print(arena.to_xml_string())
```

I get the following error:

```
Traceback (most recent call last):
  File ""./random_scene.py"", line 72, in <module>
    body.set_attributes(name=""mybody"")
  File ""/home/k/miniconda3/envs/dmcontrol/lib/python3.7/site-packages/dm_control/mjcf/element.py"", line 534, in set_attributes
    old_value = self._get_attribute(attribute_name)
  File ""/home/k/miniconda3/envs/dmcontrol/lib/python3.7/site-packages/dm_control/mjcf/element.py"", line 507, in _get_attribute
    self._check_valid_attribute(attribute_name)
  File ""/home/k/miniconda3/envs/dmcontrol/lib/python3.7/site-packages/dm_control/mjcf/element.py"", line 504, in _check_valid_attribute
    attribute_name, self._spec.name))
AttributeError: 'name' is not a valid attribute for <body>
```

Note however that if I comment out `body.set_attributes(name=""mybody"")`, it prints the following XML:

```
<mujoco model=""unnamed_model"">
  <default>
    <default class=""/""/>
    <default class=""unnamed_model/""/>
  </default>
  <worldbody>
    <site name=""myspawn"" class=""/"" group=""3"" pos=""0 0 0"" euler=""0 0 0.10000000000000001""/>
    <body pos=""0 0 0"" euler=""0 0 0.10000000000000001"" name=""unnamed_model/"">
      <freejoint name=""unnamed_model/myjoint/""/>
      <geom name=""unnamed_model/mygeom"" class=""unnamed_model/"" type=""ellipsoid"" size=""1 1 0.10000000000000001"" rgba=""1 0 0 1""/>
    </body>
  </worldbody>
</mujoco>
```

but as you can see, the created `<body>` has a `name` attribute set to a default value (`""unnamed_model/""`), so there's no reason I shouldn't be able to set a custom one.

The `AttributeError` is generated because `name` is not within the known set of attributes for `<body>`, [as per the assert in `mjcf/element.py`](https://github.com/deepmind/dm_control/blob/a669634a9bdd5be5d78654b2370f9ef8fd987817/dm_control/mjcf/element.py#L501). Upon inspection, the accepted attributes are `'mocap', 'pos', 'quat', 'axisangle', 'xyaxes', 'zaxis', 'euler'`, which I got via`print(body._spec.attributes.keys())` run at the end of the above example. It seems like the attributes accepted is configured via the [`mjcf/schema.xml`](https://github.com/deepmind/dm_control/blob/master/dm_control/mjcf/schema.xml) file, and messing around locally I was able to confirm that I was able to delete accepted attributes for `<body>` by deleting them from this `schema.xml` file. However, the `schema.xml` for `<body>` seems to already be configured to [accept a `name` attribute](https://github.com/deepmind/dm_control/blob/a669634a9bdd5be5d78654b2370f9ef8fd987817/dm_control/mjcf/schema.xml#L1015), but for some reason this is not being reflected in the component generated. 

At this point, my best guess is that either there is a problem with the `schema.xml` (I looked at it closely to see if there were any typos, to no avail), there is a bug in the parser/element creator, or there is some other gotcha that I am unaware of. Any insight on any of these fronts would be appreciated."
mjWARN_INERTIA error for new locomotion walker,"Hi there, I want to create a new planar walker for the locomotion module like the one in the suite module.

Here is my PlanarWalker.py code:
```
""""""A two leg ""walker"" walker.""""""

import os

from dm_control import composer
from dm_control import mjcf
from dm_control.composer.observation import observable
from dm_control.locomotion.walkers import legacy_base
from dm_control.mujoco import math as mjmath
import numpy as np


_XML_PATH = os.path.join(os.path.dirname(__file__),
                            'assets/walker.xml')


class PlanarWalker(legacy_base.Walker):
    """"""A two leg ""PlanarWalker"" walker.""""""

    def _build(self, name='planar_walker', marker_rgba=None, initializer=None):
        """"""Build an PlanarWalker walker.

        Args:
            name: name of the walker.
            marker_rgba: (Optional) color the walker's legs with marker_rgba.
            initializer: (Optional) A `WalkerInitializer` object.
        """"""
        super()._build(initializer=initializer)
        self._mjcf_root = mjcf.from_path(_XML_PATH)
        if name:
            self._mjcf_root.model = name

        # Set corresponding marker color if specified.
        if marker_rgba is not None:
            for geom in self.marker_geoms:
                geom.set_attributes(rgba=marker_rgba)

        # Initialize previous action.
        self._prev_action = np.zeros(shape=self.action_spec.shape,
                                     dtype=self.action_spec.dtype)

    def create_root_joints(self, attachment_frame):
        attachment_frame.add('joint', name='slide_z', axis='0 0 1', type='slide', limited='false',
                             armature='0', damping='0')
        attachment_frame.add('joint', name='slide_x', axis='1 0 0', type='slide', limited='false',
                             armature='0', damping='0')
        attachment_frame.add('joint', name='hinge_y', axis='0 1 0', type='hinge', limited='false',
                             armature='0', damping='0')  # can only rotate around y axis

    def initialize_episode(self, physics, random_state):
        self._prev_action = np.zeros(shape=self.action_spec.shape,
                                     dtype=self.action_spec.dtype)

    def apply_action(self, physics, action, random_state):
        super().apply_action(physics, action, random_state)

        # Updates previous action.
        self._prev_action[:] = action

    def _build_observables(self):
        return PlanarWalkerObservables(self)

    @property
    def mjcf_model(self):
        return self._mjcf_root

    @property
    def marker_geoms(self):
        return [self._mjcf_root.find('geom', 'left_leg'),
                self._mjcf_root.find('geom', 'right_leg')]

    @composer.cached_property
    def actuators(self):
        return self._mjcf_root.find_all('actuator')

    @composer.cached_property
    def root_body(self):
        return self._mjcf_root.find('body', 'torso')

    @composer.cached_property
    def bodies(self):
        return tuple(self.mjcf_model.find_all('body'))

    @property
    def _foot_bodies(self):
        return (self._mjcf_root.find('body', 'left_foot'),
                self._mjcf_root.find('body', 'right_foot'))

    @composer.cached_property
    def end_effectors(self):
        return self._foot_bodies

    @composer.cached_property
    def observable_joints(self):
        return tuple(actuator.joint for actuator in self.actuators)

    @composer.cached_property
    def egocentric_camera(self):
        return self._mjcf_root.find('camera', 'egocentric')

    # def aliveness(self, physics):
    #     return (physics.bind(self.root_body).xmat[-1] - 1.) / 2.

    @composer.cached_property
    def ground_contact_geoms(self):
        foot_geoms = []
        for foot in self._foot_bodies:
            foot_geoms.extend(foot.find_all('geom'))
        return tuple(foot_geoms)

    @property
    def prev_action(self):
        return self._prev_action


class PlanarWalkerObservables(legacy_base.WalkerObservables):
    """"""Observables for the PlanarWalker.""""""

    @composer.observable
    def appendages_pos(self):
        """"""Equivalent to `end_effectors_pos` with the head's position appended.""""""
        def appendages_pos_in_egocentric_frame(physics):
            appendages = self._entity.end_effectors
            appendages_xpos = physics.bind(appendages).xpos
            root_xpos = physics.bind(self._entity.root_body).xpos
            root_xmat = np.reshape(physics.bind(self._entity.root_body).xmat, (3, 3))
            return np.reshape(
                np.dot(appendages_xpos - root_xpos, root_xmat), -1)
        return observable.Generic(appendages_pos_in_egocentric_frame)

    @composer.observable
    def bodies_quats(self):
        """"""Orientations of the bodies as quaternions, in the egocentric frame.""""""
        def bodies_orientations_in_egocentric_frame(physics):
            """"""Compute relative orientation of the bodies.""""""
            # Get the bodies
            bodies = self._entity.bodies
            # Get the quaternions of all the bodies &root in the global frame
            bodies_xquat = physics.bind(bodies).xquat
            root_xquat = physics.bind(self._entity.root_body).xquat
            # Compute the relative quaternion of the bodies in the root frame
            bodies_quat_diff = []
            for k in range(len(bodies)):
                bodies_quat_diff.append(
                    mjmath.mj_quatdiff(root_xquat, bodies_xquat[k]))  # q1^-1 * q2
            return np.reshape(np.stack(bodies_quat_diff, 0), -1)
        return observable.Generic(bodies_orientations_in_egocentric_frame)

    @composer.observable
    def bodies_pos(self):
        """"""Position of bodies relative to root, in the egocentric frame.""""""
        def bodies_pos_in_egocentric_frame(physics):
            """"""Compute relative orientation of the bodies.""""""
            # Get the bodies
            bodies = self._entity.bodies
            # Get the positions of all the bodies & root in the global frame
            bodies_xpos = physics.bind(bodies).xpos
            root_xpos, _ = self._entity.get_pose(physics)
            # Compute the relative position of the bodies in the root frame
            root_xmat = np.reshape(physics.bind(self._entity.root_body).xmat, (3, 3))
            return np.reshape(
                np.dot(bodies_xpos - root_xpos, root_xmat), -1)
        return observable.Generic(bodies_pos_in_egocentric_frame)

    @property
    def proprioception(self):
        return ([self.joints_pos, self.joints_vel,
                 self.body_height, self.end_effectors_pos,
                 self.appendages_pos, self.world_zaxis,
                 self.bodies_quats, self.bodies_pos] +
                self._collect_from_attachments('proprioception'))

```

And the xml file for it is:

```
<mujoco model=""planar walker"">
  <compiler angle=""radian""/>

  <asset>
    <material name=""self"" rgba="".7 .5 .3 1""/>
  </asset>

  <default>
    <joint damping="".1"" armature=""0.01"" limited=""true"" solimplimit=""0 .99 .01""/>
    <geom contype=""1"" conaffinity=""0"" friction="".7 .1 .1""/>
    <motor ctrlrange=""-1 1"" ctrllimited=""true""/>
    <site size=""0.01""/>
    <default class=""walker"">
      <geom material=""self"" type=""capsule""/>
      <joint axis=""0 -1 0""/>
    </default>
  </default>

  <worldbody>
    <camera name=""sideon"" pos=""0 -10 5"" fovy=""45"" mode=""targetbody"" target=""torso"" />
    <camera name=""float_far""  pos=""-4 0 2"" xyaxes=""0 -1 0 .5 0 1"" mode=""trackcom"" fovy=""90""/>
    <body name=""torso"" pos=""0 0 1.3"" childclass=""walker"">
      <light name=""light"" pos=""0 0 2"" mode=""trackcom""/>

      <camera name=""floating""  pos=""-2 0 1"" xyaxes=""0 -1 0 .5 0 1"" mode=""trackcom"" fovy=""90""/>
      <camera name=""egocentric""  pos="".07 0 .2"" xyaxes=""0 -1 0 0 0 1"" fovy=""90""/>

      <joint name=""rootz"" axis=""0 0 1"" type=""slide"" limited=""false"" armature=""0"" damping=""0""/>
      <joint name=""rootx"" axis=""1 0 0"" type=""slide"" limited=""false"" armature=""0"" damping=""0""/>
      <joint name=""rooty"" axis=""0 1 0"" type=""hinge"" limited=""false"" armature=""0"" damping=""0""/>  <!-- can only rotate around y axis -->

      <site name=""torso_touch"" type=""box"" size=""0.08 0.08 0.31"" rgba=""0 0 1 1"" group=""4""/>
      <geom name=""torso"" size=""0.07 0.3""/>
      <site name=""torso_site"" size=""0.05"" rgba=""1 0 0 1""/>

      <body name=""right_thigh"" pos=""0 -.05 -0.3"">
        <joint name=""right_hip"" range=""-0.34907 1.74533""/>  <!-- range = [-20 deg, 100 deg] -->
        <geom name=""right_thigh"" pos=""0 0 -0.225"" size=""0.05 0.225""/>
        <body name=""right_leg"" pos=""0 0 -0.7"">
          <joint name=""right_knee"" pos=""0 0 0.25"" range=""-2.61799 0""/>  <!-- range = [-150 deg, 0 deg] -->
          <geom name=""right_leg"" size=""0.04 0.25""/>
          <body name=""right_foot"" pos=""0.06 0 -0.25"">
            <joint name=""right_ankle"" pos=""-0.06 0 0"" range=""-0.78540 0.78540""/>  <!-- range = [-45 deg, 45 deg] -->
            <geom name=""right_foot"" zaxis=""1 0 0"" size=""0.05 0.1""/>
          </body>
        </body>
      </body>
      <body name=""left_thigh"" pos=""0 .05 -0.3"" >
        <joint name=""left_hip"" range=""-0.34907 1.74533""/>  <!-- range = [-20 deg, 100 deg] -->
        <geom name=""left_thigh"" pos=""0 0 -0.225"" size=""0.05 0.225""/>
        <body name=""left_leg"" pos=""0 0 -0.7"">
          <joint name=""left_knee"" pos=""0 0 0.25"" range=""-2.61799 0""/>  <!-- range = [-150 deg, 0 deg] -->
          <geom name=""left_leg"" size=""0.04 0.25""/>
          <body name=""left_foot"" pos=""0.06 0 -0.25"">
            <joint name=""left_ankle"" pos=""-0.06 0 0"" range=""-0.78540 0.78540""/>  <!-- range = [-45 deg, 45 deg] -->
            <geom name=""left_foot"" zaxis=""1 0 0"" size=""0.05 0.1""/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <sensor>
    <subtreelinvel name=""torso_subtreelinvel"" body=""torso""/>
    <touch name=""torso_touch"" site=""torso_touch""/>
    <velocimeter name=""torso_vel"" site=""torso_site""/>
    <gyro name=""torso_gyro"" site=""torso_site""/>
    <accelerometer name=""torso_accel"" site=""torso_site""/>
  </sensor>

  <actuator>
    <motor name=""right_hip"" joint=""right_hip"" gear=""100""/>
    <motor name=""right_knee"" joint=""right_knee"" gear=""50""/>
    <motor name=""right_ankle"" joint=""right_ankle"" gear=""20""/>
    <motor name=""left_hip"" joint=""left_hip"" gear=""100""/>
    <motor name=""left_knee"" joint=""left_knee"" gear=""50""/>
    <motor name=""left_ankle"" joint=""left_ankle"" gear=""20""/>
  </actuator>
</mujoco>

```

I test it like this:

```
def walker_run(random_state=None):
    walker = PlanarWalker()
    arena = corr_arenas.EmptyCorridor()
    task = corr_tasks.RunThroughCorridor(
        walker=walker,
        arena=arena,
        walker_spawn_position=(0.5, 0, 0),
        walker_spawn_rotation=0,
        contact_termination=False,
        physics_timestep=_PHYSICS_TIMESTEP,
        control_timestep=_CONTROL_TIMESTEP)

    return composer.Environment(
        time_limit=30,
        task=task,
        random_state=random_state,
        strip_singleton_obs_buffer_dim=True)

viewer.launch(environment_loader=walker_run)

import numpy as np
env = walker_run()

# Get the `action_spec` describing the control inputs.
action_spec = env.action_spec()

# Step through the environment for one episode with random actions.
time_step = env.reset()
while not time_step.last():
    action = np.random.uniform(action_spec.minimum, action_spec.maximum, size=action_spec.shape)
    time_step = env.step(action)
    print(""reward = {}, discount = {}, observations = {}."".format(
    time_step.reward, time_step.discount, time_step.observation))
```

However, the simulation always terminate by throwing the error:

```
WARNING:absl:Inertia matrix is too close to singular at DOF 2. Check model. Time = 2.2200.
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_INERTIA
```

The ant walker in the locomotion module works well. In addition, I tried to replace the `walker.xml` under the suite directory with the one I created above and the error didn't pop up. I guess there is something wrong with the `composer` used for the locomotion environment. Does anyone like to confirm this error do exist and give any advice on how to fix it?
"
Tutorial Colab raises GLEW initalization error when rendering,"The tutorial **colab** notebook crashes as soon as rendering is called:

`from dm_control import suite
  env = suite.load('cartpole', 'swingup')
  pixels = env.physics.render()`

The following error rises: 
`CRITICAL:absl:GLEW initalization error: Missing GL version `

I tried different instances with and without GPU.
After some research through the issues here and https://github.com/openai/mujoco-py/issues/268, I still wasn't able to solve it.

Thanks for your help. "
Failed Installing dm_control with Bazel loaded,"As titled, I have already loaded Bazel.

The error is as follows. Any insights would be appreciated.

```
Building wheels for collected packages: labmaze
  Building wheel for labmaze (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /home/zhibo/mujoco_env/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""'; __file__='""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""';f=getattr(tokenize, '""'""'open'""'""', open)(__file__);code=f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' bdist_wheel -d /tmp/pip-wheel-rgis3lee
       cwd: /tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/
  Complete output (126 lines):
  running bdist_wheel
  running build
  running build_py
  creating build
  creating build/lib.linux-x86_64-3.6
  creating build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/__init__.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/base.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/defaults.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/fixed_maze.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/fixed_maze_test.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/random_maze.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/random_maze_test.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/text_grid.py -> build/lib.linux-x86_64-3.6/labmaze
  copying labmaze/text_grid_test.py -> build/lib.linux-x86_64-3.6/labmaze
  creating build/lib.linux-x86_64-3.6/labmaze/assets
  copying labmaze/assets/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/assets
  copying labmaze/assets/assets_test.py -> build/lib.linux-x86_64-3.6/labmaze/assets
  creating build/lib.linux-x86_64-3.6/labmaze/cc
  copying labmaze/cc/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/cc
  creating build/lib.linux-x86_64-3.6/labmaze/cc/python
  copying labmaze/cc/python/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/cc/python
  creating build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_03/floor_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  creating build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_01/wall_cerise_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_01/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  creating build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_04/wall_cerise_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  creating build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_05/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_05/floor_light1_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_01/wall_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_04/wall_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_01/wall_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_04/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/sky_01/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  creating build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_02/wall_dblue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_03/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_01/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  copying labmaze/assets/sky_02/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  copying labmaze/assets/style_03/wall_gray_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_03/wall_cyan_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_04/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_04/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_05/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_03/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_01/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_01/wall_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/sky_02/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/sky_03/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/sky_02/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  copying labmaze/assets/style_01/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_04/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_05/floor_light2_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_01/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_05/wall_yellow_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_03/wall_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_04/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/sky_01/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/sky_03/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/style_04/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/sky_01/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/style_03/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/sky_01/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/style_05/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_01/floor_red_team_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_01/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_02/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_01/floor_blue_team_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_02/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_02/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_02/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_03/floor_light3_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_05/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_01/floor_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_03/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/sky_01/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/style_02/wall_lgreen_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_03/floor_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_02/wall_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/sky_03/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/sky_02/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  copying labmaze/assets/style_05/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_01/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_03/floor_light1_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/sky_03/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/style_02/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/sky_03/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/style_02/floor_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/sky_01/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
  copying labmaze/assets/style_04/wall_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_01/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_03/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_05/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/sky_02/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  copying labmaze/assets/style_01/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_04/floor_cyan_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_01/ceiling_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_02/wall_yellow_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/sky_03/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
  copying labmaze/assets/style_03/floor_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_05/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
  copying labmaze/assets/style_03/wall_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_01/4tile_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
  copying labmaze/assets/style_03/floor_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_03/wall_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_02/floor_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_03/wall_gray_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_03/floor_light2_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
  copying labmaze/assets/style_04/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/style_02/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_02/floor_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
  copying labmaze/assets/style_04/floor_dorange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
  copying labmaze/assets/sky_02/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
  running build_ext
  bazel build //labmaze/cc/python:_defaults --symlink_prefix=build/temp.linux-x86_64-3.6/bazel- --compilation_mode=opt
  Starting local Bazel server and connecting to it...
  Server crashed during startup. Now printing /home/zhibo/.cache/bazel/_bazel_zhibo/76b1e240ad9500159819ba8ac7d2079b/server/jvm.out
  Error occurred during initialization of VM
  Could not allocate metaspace: 1073741824 bytes
  error: command 'bazel' failed with exit status 37
  ----------------------------------------
  ERROR: Failed building wheel for labmaze
  Running setup.py clean for labmaze
Failed to build labmaze
Installing collected packages: labmaze, dm-env, dm-control
    Running setup.py install for labmaze ... error
    ERROR: Command errored out with exit status 1:
     command: /home/zhibo/mujoco_env/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""'; __file__='""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""';f=getattr(tokenize, '""'""'open'""'""', open)(__file__);code=f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-smfbrl2n/install-record.txt --single-version-externally-managed --compile --install-headers /home/zhibo/mujoco_env/include/site/python3.6/labmaze
         cwd: /tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/
    Complete output (126 lines):
    running install
    running build
    running build_py
    creating build
    creating build/lib.linux-x86_64-3.6
    creating build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/__init__.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/base.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/defaults.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/fixed_maze.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/fixed_maze_test.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/random_maze.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/random_maze_test.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/text_grid.py -> build/lib.linux-x86_64-3.6/labmaze
    copying labmaze/text_grid_test.py -> build/lib.linux-x86_64-3.6/labmaze
    creating build/lib.linux-x86_64-3.6/labmaze/assets
    copying labmaze/assets/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/assets
    copying labmaze/assets/assets_test.py -> build/lib.linux-x86_64-3.6/labmaze/assets
    creating build/lib.linux-x86_64-3.6/labmaze/cc
    copying labmaze/cc/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/cc
    creating build/lib.linux-x86_64-3.6/labmaze/cc/python
    copying labmaze/cc/python/__init__.py -> build/lib.linux-x86_64-3.6/labmaze/cc/python
    creating build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_01/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    creating build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_03/wall_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/floor_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_03/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/floor_red_team_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    creating build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_05/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    creating build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_02/floor_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_03/wall_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    creating build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_04/wall_cerise_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_03/floor_light3_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/ceiling_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/sky_03/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/sky_02/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/style_03/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_02/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_03/wall_gray_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_04/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_01/wall_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_01/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_01/wall_cerise_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_01/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_05/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_05/wall_yellow_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/sky_03/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/style_02/floor_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_03/floor_light2_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_05/floor_light1_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/sky_02/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/sky_03/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/style_05/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/sky_02/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/style_01/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_02/wall_lgreen_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    creating build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/sky_01/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/style_04/wall_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_05/floor_light2_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_03/floor_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_04/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_02/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/sky_01/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/style_04/floor_dorange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_01/floor_blue_team_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_02/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_01/wall_light_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/sky_02/lf.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/style_03/floor_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_03/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/sky_01/ft.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/sky_03/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/style_02/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_05/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_04/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_04/wall_red_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_01/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_04/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_04/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/sky_01/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/style_03/floor_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_03/wall_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/sky_01/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/style_01/4tile_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_01/floor_orange_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_03/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_03/wall_gray_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/wall_purple_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/style_04/wall_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_03/floor_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/sky_01/bk.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_01
    copying labmaze/assets/style_02/floor_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_01/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    copying labmaze/assets/sky_02/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/style_05/wall_red_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_05/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/style_02/wall_yellow_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_02/wall_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_04/floor_cyan_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/style_05/floor_orange_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_05
    copying labmaze/assets/sky_03/up.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/style_03/floor_light1_m.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/sky_02/rt.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_02
    copying labmaze/assets/style_03/floor_green_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_04/floor_blue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_04
    copying labmaze/assets/sky_03/dn.png -> build/lib.linux-x86_64-3.6/labmaze/assets/sky_03
    copying labmaze/assets/style_02/wall_blue_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_02/wall_yellow_bright_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_02/wall_dblue_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_02
    copying labmaze/assets/style_03/wall_cyan_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_03
    copying labmaze/assets/style_01/wall_green_d.png -> build/lib.linux-x86_64-3.6/labmaze/assets/style_01
    running build_ext
    bazel build //labmaze/cc/python:_defaults --symlink_prefix=build/temp.linux-x86_64-3.6/bazel- --compilation_mode=opt
    Starting local Bazel server and connecting to it...
    Server crashed during startup. Now printing /home/zhibo/.cache/bazel/_bazel_zhibo/76b1e240ad9500159819ba8ac7d2079b/server/jvm.out
    Error occurred during initialization of VM
    Could not allocate metaspace: 1073741824 bytes
    error: command 'bazel' failed with exit status 37
    ----------------------------------------
ERROR: Command errored out with exit status 1: /home/zhibo/mujoco_env/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""'; __file__='""'""'/tmp/pip-install-8952tcao/labmaze_a6a968ff04254ef58eca0e34b0f3433e/setup.py'""'""';f=getattr(tokenize, '""'""'open'""'""', open)(__file__);code=f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-smfbrl2n/install-record.txt --single-version-externally-managed --compile --install-headers /home/zhibo/mujoco_env/include/site/python3.6/labmaze Check the logs for full command output.
```"
Exposed `Camera` matrix components,"Added a new `Camera` member function `matrices()` which returns the component matrices used to construct the camera matrix returned by the `Camera` property `matrix`. Exposing this API will allow for easier selective transformations.

This change does not break any API compatibility."
Out-of-date pip version of `dm_control` causes the `tutorial.ipynb` to fail,"If I install `dm_control` via pip, it installs version `0.0.322773188` (from `!pip show dm_control`) which is missing a `.matrix` field in `mujoco.Camera` which causes the `tutorial.ipynb` section _Projecting from world to camera coordinates_ to fail; however, if `dm_control` is installed from source, installing version `0.0.355168290`, the `.matrix` field is available."
expected LP_MJMODEL instance instead of MjModel,"Hi,
I had an error while using functions from ```mjlib```
Here's an example:
```
>>> from dm_control.mujoco.wrapper.mjbindings import mjlib
>>> H=np.zeros(sim.model.nv * sim.model.nv)
>>> mjlib.mj_fullM(sim.model, H, sim.data.qM)
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
ctypes.ArgumentError: argument 1: <class 'TypeError'>: expected LP_MJMODEL instance instead of MjModel
```

Could anyone tell me which object should I input for the first argument? Thanks a lot!"
"difference between ""CheetahRun-v0"" on DM vs ""half-cheetah-v2"" on Mujuco ","What is the difference between ""CheetahRun-v0"" on DM vs ""half-cheetah-v2"" on Mujuco?

From what I can tell, do they only differ by the reward functions? 
Both environments output action as 6 dimensions. "
missed files,"from dm_control.mujoco.wrapper.mjbindings import constants
from dm_control.mujoco.wrapper.mjbindings import enums
from dm_control.mujoco.wrapper.mjbindings import sizes
from dm_control.mujoco.wrapper.mjbindings import types
from dm_control.mujoco.wrapper.mjbindings import wrappers

missed files 'constants', 'enums', 'sizes', 'types', 'wrappers'
"
Multiprocessing image-based environments ,"Hello!

I managed to use multiprocessing version of gym environments for training RL algos: here link of my DDPG implementation using multiprocessing envs [https://github.com/nik31096/control_algorithms/blob/master/robotics/DDPG/main.py](text) and "
Bump lxml from 4.5.0 to 4.6.2,"Bumps [lxml](https://github.com/lxml/lxml) from 4.5.0 to 4.6.2.
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/lxml/lxml/blob/master/CHANGES.txt"">lxml's changelog</a>.</em></p>
<blockquote>
<h1>4.6.2 (2020-11-26)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>A vulnerability (CVE-2020-27783) was discovered in the HTML Cleaner by Yaniv Nizry,
which allowed JavaScript to pass through.  The cleaner now removes more sneaky
&quot;style&quot; content.</li>
</ul>
<h1>4.6.1 (2020-10-18)</h1>
<h2>Bugs fixed</h2>
<ul>
<li>A vulnerability was discovered in the HTML Cleaner by Yaniv Nizry, which allowed
JavaScript to pass through.  The cleaner now removes more sneaky &quot;style&quot; content.</li>
</ul>
<h1>4.6.0 (2020-10-17)</h1>
<h2>Features added</h2>
<ul>
<li>
<p>GH#310: <code>lxml.html.InputGetter</code> supports <code>__len__()</code> to count the number of input fields.
Patch by Aidan Woolley.</p>
</li>
<li>
<p><code>lxml.html.InputGetter</code> has a new <code>.items()</code> method to ease processing all input fields.</p>
</li>
<li>
<p><code>lxml.html.InputGetter.keys()</code> now returns the field names in document order.</p>
</li>
<li>
<p><a href=""https://github-redirect.dependabot.com/lxml/lxml/issues/309"">GH-309</a>: The API documentation is now generated using <code>sphinx-apidoc</code>.
Patch by Chris Mayo.</p>
</li>
</ul>
<h2>Bugs fixed</h2>
<ul>
<li>
<p>LP#1869455: C14N 2.0 serialisation failed for unprefixed attributes
when a default namespace was defined.</p>
</li>
<li>
<p><code>TreeBuilder.close()</code> raised <code>AssertionError</code> in some error cases where it
should have raised <code>XMLSyntaxError</code>.  It now raises a combined exception to
keep up backwards compatibility, while switching to <code>XMLSyntaxError</code> as an
interface.</p>
</li>
</ul>
<p>4.5.2 (2020-07-09)</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/lxml/lxml/commit/4cb57362deb23bca0f70f41ab1efa13390fcdbb1""><code>4cb5736</code></a> Work around Py2's lack of &quot;re.ASCII&quot;.</li>
<li><a href=""https://github.com/lxml/lxml/commit/c30106ff2648cdafe7857654e9606c491b1acf4d""><code>c30106f</code></a> Prepare release of 4.6.2.</li>
<li><a href=""https://github.com/lxml/lxml/commit/a105ab8dc262ec6735977c25c13f0bdfcdec72a7""><code>a105ab8</code></a> Prevent combinations of &lt;math/svg&gt; and &lt;style&gt; to sneak JavaScript through th...</li>
<li><a href=""https://github.com/lxml/lxml/commit/c053dc159c7f0a6a98922c937a0baede7ce7af9d""><code>c053dc1</code></a> Add a recipe for a look-ahead generator to allow modifications during tree it...</li>
<li><a href=""https://github.com/lxml/lxml/commit/b083124281d824eb861ff58e7276a5c1f1d8c18d""><code>b083124</code></a> lxml actually works in Py3.9.</li>
<li><a href=""https://github.com/lxml/lxml/commit/0f80590d7ebe62c61d2bdf2a220a093821dcbab8""><code>0f80590</code></a> lxml actually works in Py3.9.</li>
<li><a href=""https://github.com/lxml/lxml/commit/fd8893ccb538e95c5acb2a2b47f0e87003de5b0d""><code>fd8893c</code></a> Add a doc note that the .find() methods are usually faster than one might exp...</li>
<li><a href=""https://github.com/lxml/lxml/commit/eb6df27fc265cea4462f966282a701acdad5d167""><code>eb6df27</code></a> Update release version on homepage.</li>
<li><a href=""https://github.com/lxml/lxml/commit/69b5c9bd575800f80a6515aeef6421f33db0294d""><code>69b5c9b</code></a> Automate the build artefact downloading from github and appveyor.</li>
<li><a href=""https://github.com/lxml/lxml/commit/61432a8489657744ed32367ed9fb17fafe405d8e""><code>61432a8</code></a> Prepare release of lxml 4.6.1.</li>
<li>Additional commits viewable in <a href=""https://github.com/lxml/lxml/compare/lxml-4.5.0...lxml-4.6.2"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=lxml&package-manager=pip&previous-version=4.5.0&new-version=4.6.2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
Viewer for general purpose interactive rendering,"Hi,
Thanks for sharing this awesome repo. I have a question about the viewer for the environment. Is it limited to the environments provided in dm_control.suite? For example, if I have a custom environment that's not designed for control task, is there anyway to use the viewer for interactive rendering? 
Thanks in advance!"
Colab error from this link An introductory tutorial for this package is available as a Colaboratory notebook: ,"There was an error loading this notebook. Ensure that the file is accessible and try again.

JSON.parse: unexpected character at line 40 column 7 of the JSON data
https://github.com/deepmind/dm_control/blob/master/tutorial.ipynb

JSON.parse: unexpected character at line 40 column 7 of the JSON data
c/<@https://colab.research.google.com/v2/external/external_polymer_binary.js?vrz=colab-20201222-085609-RC00_348636243:1315:452
Ea@https://colab.research.google.com/v2/external/external_polymer_binary.js?vrz=colab-20201222-085609-RC00_348636243:19:336
Ca.prototype.next_@https://colab.research.google.com/v2/external/external_polymer_binary.js?vrz=colab-20201222-085609-RC00_348636243:17:503
Ga/this.next@https://colab.research.google.com/v2/external/external_polymer_binary.js?vrz=colab-20201222-085609-RC00_348636243:20:206
f@https://colab.research.google.com/v2/external/external_polymer_binary.js?vrz=colab-20201222-085609-RC00_348636243:70:101
"
Update inverse_kinematics.py,replace `quarternion` with`'quaternion`
Manipulator Env xpos and xmat are relative to a rotating reference frame,"It seems that ""global"" positions and orientations for the manipulator environment are reported with respect to the `arm_root` body which can rotate.

```python
from dm_control import suite

env = suite.load('manipulator', 'bring_ball')

# Set environment to arbitrary state
env.reset()

# Ensure states are up to date
env.physics.forward()

# Get 'global' position of the second joint
pos = env.physics.data.xpos[1]

print(""Second Joint Pos: {}"".format(pos))
```

The result is always `Second Joint Pos: [0.  0.  0.4]`, despite having different orientations for the first arm joint i.e. `arm_root`. This is a bit troublesome if we need to work with a fixed global coordinate system. I believe the `xpos` and `xmat` properties in Mujoco are meant to work with a fixed global coordinate system, leaving relative positions/orientations to the `qpos` property. "
manipulation vs suite and applying visual changes,"Is there a specific reason these two are separate entities for the time being? It seems like the way they are setup is different, and the way you create the environment etc.

Also, I found that applying visual changes (related to this [issue](https://github.com/deepmind/dm_control/issues/125)) is somewhat trickier inside the manipulation tasks, like the jaco_arm.xml
I assume there is a way to pass properties like texture (for the background colour etc) down to the engine, but at the moment, it doesnt seem like these properties are being passed down in these manipulation envs via the .xml file

Is there an easy/clean way to do this?

Update: I guess one way that I found is by modifying the `reach.py` environment where things like the target site is being added after parsing the model, through workspaces and accessing the texture via
```
self.root_entity.mjcf_model.asset.texture[0].mark='random'
self.root_entity.mjcf_model.asset.texture[0].rgb1 = np.array([.8, .1, .4])
....
workspaces.add_bbox_site(body=self.root_entity.mjcf_model.worldbody,
    lower=workspace.tcp_bbox.lower,
    upper=workspace.tcp_bbox.upper,
    rgba=constants.GREEN,
    name='tcp_spawn_area')
```
to set the attributes, since its ignoring these from `jaco_arm.xml` and opting to the default values. I'm guessing this is a design choice to leave all these attributes outside of the xml and add them later in the code?



Thanks"
dm_control.mujoco.wrapper.core.Error: Could not register license; CRITICAL:absl:Invalid activation key,"Hi my friends,

dm_control suit is an awesome project which provides the most  useful and fruitful environments for people in this field.
  
I'm current training an Deep RL agent from pixel input. One month ago, I applied for a MuJoCo trial license, I install MuJoCo, mujoco_py and set it up with dm_control suit on my computer. It worked well on my computer which has a 1080ti GPU. 

Recently I applied for a MuJoCo student license through my university email, and replaced it with the previous trial license. In addition, I changed my 1080ti GPU to 2080ti GPU. After I did these, I ran the program, however, it says 

""...
_CRITICAL:absl:Invalid activation key
...
dm_control.mujoco.wrapper.core.Error: Could not register license._
... ""

The whole respond from the terminal is:
`(pytorch_1.6) jacky@asus:~/PycharmProjects/AE_A3C$ python3 train.py
[[V: not found
sh: 2: [
        : not found

[[V: not found
sh: 2: [
        : not found

[[V: not found
sh: 2: Syntax error: ""("" unexpected

[[V: not found
sh: 2: Syntax error: ""("" unexpected

CRITICAL:absl:Invalid activation key

Traceback (most recent call last):
  File ""train.py"", line 254, in <module>
    main()

  File ""train.py"", line 150, in main
    frame_skip=args.action_repeat

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dmc2gym-1.0.0-py3.6.egg/dmc2gym/__init__.py"", line 52, in make

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/gym/envs/registration.py"", line 145, in make
    return registry.make(id, **kwargs)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/gym/envs/registration.py"", line 90, in make
    env = spec.make(**kwargs)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/gym/envs/registration.py"", line 60, in make
    env = cls(**_kwargs)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dmc2gym-1.0.0-py3.6.egg/dmc2gym/wrappers.py"", line 66, in __init__

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/suite/__init__.py"", line 118, in load
    environment_kwargs, visualize_reward)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/suite/__init__.py"", line 152, in build_environment
    env = domain.SUITE[task_name](**task_kwargs)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/suite/cheetah.py"", line 49, in run
    physics = Physics.from_xml_string(*get_model_and_assets())

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 428, in from_xml_string
    model = wrapper.MjModel.from_xml_string(xml_string, assets=assets)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 476, in from_xml_string
    model_ptr = _get_model_ptr_from_xml(xml_string=xml_string, assets=assets)

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 347, in _get_model_ptr_from_xml
    _maybe_register_license()

  File ""/home/jacky/anaconda3/envs/pytorch_1.6/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 132, in _maybe_register_license
    raise Error(""Could not register license."")

dm_control.mujoco.wrapper.core.Error: Could not register license.
`

=== ===

Could u please give some help, any suggestion would be really appreciate :+1: 

Btw,  I'm pretty sure my license is valid because I checked the tutorial example from mujoco_py official website and it worked well."
Crash on macOS with matplotlib and dm_control.suite,"I'm seeing a crash with the following program:
```python
import matplotlib.pyplot as plt
from dm_control import suite

plt.plot()
plt.show()
```

If I disable the dm_control import, or if I `import dm_control` without importing `suite`, the empty figure displays normally.

If I leave it as-is, I get the following error:

```
2020-09-21 09:26:23.494 Python[24974:1597019] -[NSApplication _setup:]: unrecognized selector sent to instance 0x7fa5e2974e80
2020-09-21 09:26:23.496 Python[24974:1597019] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSApplication _setup:]: unrecognized selector sent to instance 0x7fa5e2974e80'
*** First throw call stack:
(
	0   CoreFoundation                      0x00007fff344e1acd __exceptionPreprocess + 256
	1   libobjc.A.dylib                     0x00007fff5ebe5a17 objc_exception_throw + 48
	2   CoreFoundation                      0x00007fff3455b8d6 -[NSObject(NSObject) __retain_OA] + 0
	3   CoreFoundation                      0x00007fff3448393f ___forwarding___ + 1485
	4   CoreFoundation                      0x00007fff344832e8 _CF_forwarding_prep_0 + 120
	5   Tk                                  0x00007fff4026e7d8 TkpInit + 466
	6   Tk                                  0x00007fff401edb86 Tk_Init + 1706
[...]
	54  Python                              0x000000010b315d0b _PyEval_EvalFrameDefault + 6576
	55  Python                              0x000000010b31d7a6 _PyEval_EvalCodeWithName + 1870
	56  Python                              0x000000010b2876e5 _PyFunction_FastCallDict + 441
	57  Python                              0x000000010b35a35c pymain_run_module + 147
	58  Python                              0x000000010b3593f5 pymain_main + 4196
	59  Python                              0x000000010b359f80 _Py_UnixMain + 56
	60  libdyld.dylib                       0x00007fff603b43d5 start + 1
)
libc++abi.dylib: terminating with uncaught exception of type NSException
Abort trap: 6
```

I'm running Python 3.7.4 on MacOS 10.14.6 and `pip list` shows the following versions:
```
dm-control             0.0.322773188
dm-env                 1.2
dm-tree                0.1.5
matplotlib             3.3.2
```

Seems related to issues #62 and #80.
"
implement egl device selection,"Implement the EGL render device selection in issue #118 
Select render GPU is a critical feature for running batch of experiments on multi-gpu servers.

Users will be able to select a gpu used for rendering by setting environment variable EGL_DEVICE_ID=x"
Contact Full error in CMU Humanoid Run,"I'm hitting the following error when I try to use the CMU Humanoid run environment. The error pops up after several hours of training.

  File ""/dmc2gym/dmc2gym/wrappers.py"", line 159, in reset
    time_step = self._env.reset()
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/rl/control.py"", line 89, in reset
    self._task.initialize_episode(self._physics)
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/suite/humanoid_CMU.py"", line 140, in initialize_episode
    physics.after_reset()
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/mujoco/engine.py"", line 299, in after_reset
    self.forward()
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/mujoco/engine.py"", line 309, in forward
    mjlib.mj_forward(self.model.ptr, self.data.ptr)
  File ""/usr/lib/python3.6/contextlib.py"", line 88, in __exit__
    next(self.gen)
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/mujoco/engine.py"", line 332, in check_invalid_state
    raise _control.PhysicsError(message)
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_CONTACTFULL"
Training Jaco reach duplo features environment,"Hello, I am trying to train a policy using the jaco manipulation environment and I have a few questions with regards to the environment setup:

- The current implementation seems to be using a position controller to send the arm to the home position, and the agent is learning a velocity controller. I was wondering if this can make the task of an RL agent harder? Specially when learning from pixel observations. Did you try training any algorithm with this env?
- Do you have plans on adding either an end-effector controller that is typically used in other robotic arm manipulation tasks?

@alimuldal Tagging you here since you seem to be the author for this code.

Thanks in advance!"
The size of the frames is too small,"Hello, I am using the jaco manipulation environment, and I tried the tutorial.ipynb. I find that the frames generated by the display_video function are too small, which is not convenient for me to check. Is there any method to zoom in the frames? Thank you!"
How can I disable render in docker container.,"As the title mentioned, I require running the env in a docker container, so I hope to disable render function."
WARNING:absl:Failed to converge after 99 steps: err_norm=0.0107458,"HI, when I using the default reacher_easy env to train the sac agent, the error raises.
It seems that the code can work but I don't what happended. Is there anyone meet the same error?
```
WARNING:absl:Failed to converge after 99 steps: err_norm=0.0107458
```"
seet the mainplot env's time_limation,"Hi, could you please tell me how to control the mainplot env, such as the suit env?
It seems the only thing I can set is the seed.
Can I seet the time_limitations such as suit_env?"
Asterisks in filenames prevents checkout in Windows environment,"Many of the file names in:
https://github.com/deepmind/dm_control/tree/master/dm_control/suite/dog_assets/extras
contain * symbols, which prevents Windows users from checking out the code. I know Windows is not officially supported, but it seems like up until now it has been possible to get the environment working with a little bit of effort. Is there any chance of renaming these files?"
 Importing ABC directly from collections will be removed in Python 3.10,"Use collections in Python 2 and collections.abc in Python 3.

https://github.com/deepmind/dm_control/blob/57a1a95559312e525e9af0dc4f2c1bdd5eda1bba/dm_control/suite/wrappers/pixels.py#L63"
How to get the output when agents kicks,I'm thinking about how to reward and want to get the output when the agent kicks. How can I get the output when the agent kicks?
Initialization the soccer environment for each episode,"I want to fix the position and velocity of the agent and the position and velocity of the ball when initializing the episode.
Which file should be rewritten and how should it be rewritten?"
dm_control.mujoco.wrapper.core.Error:Could not register license ,"- First I set the Environment Variables with the following command
export MUJOCO_GL=""glfw""
export MJLIB_PATH=$HOME/.mujoco/mujoco200/bin/libmujoco200.dylib
export MJKEY_PATH=$HOME/.mujoco/mujoco200/mjkey.txt
export LD_LIBRARY_PATH=$HOME/.mujoco/mujoco200/bin:$LD_LIBRARY_PATH
export MUJOCO_PY_MJPRO_PATH=$HOME/.mujoco/mujoco200/
export MUJOCO_PY_MJKEY_PATH=$HOME/.mujoco/mujoco200/mjkey.txt

then I clone the dm_control suite from the Site. then I move to folder and then i install the package with command with pip3 install . to check whether it works for me or not
After installing with pip3 install .  i check the all available package in terminals 
Now When I try to run the code examples given with control suites then following error happen which is also title of ISSUE
"
Availability on Linux Mint 19.2 (Tina)?,"I was wondering whether I can use dm-control on my plattform although it is not regularly tested? In specific, do you know links of ported repositories in case this one doesn't work? Thanks a lot!"
Question - Discount factor.,"I read the below description. And wonder why you set the discount factor like this. Could you give more explanation? I couldn't find an explanation about this in the paper. 
If an agent scores a goal, only the action just before scoring a goal is rewarded?

- EMERGENT COORDINATION THROUGH COMPETITION -
Episodes will terminate immediately with a discount factor of 0 when either side scores a goal. There is also a per-episode time_limit (45 seconds by default). If neither team scores within this time then the episode will terminate with a discount factor of 1."
Merging dev into master,
Collision detection for multi-agent testing,I'm writing a custom task for 2 agents in the same environment. I need to know when the 2 agents collide and which body parts of each are colliding for reward calculation. I'm imagining something similar to Unity's OnCollisionEnter. Is there a way to do this with dm_control?
Cannot open STL file,"Hi, does anyone know how I can solve this issue?

dm_control.mujoco.wrapper.core.Error: Error: could not open STL file"
how can I sample a random state from an environment?,"In my project, I need to be able to sample a random but valid state (the underlying physics state, not the observation) from any environment, let's say cartpole.
In order to do that, I have to know the range of each element in qpos and qvel, however I cannot find any of those information online.
Can anyone help me with this please?"
RuntimeWarning: invalid value encountered in add,"Hi,

When I load the environment ```lqr```. Since the action bounds are ```[-inf, inf]```, the code in ```dm_control/viewer/runtime.py:line 72``` gives me the above error.

Now this error is occurring because two infinite values are being added at that line. Is this expected behavior? if not I can try to submit a pull request which fixes it. "
How can I get the true meaning of states,"I have read corresponding paper of this environment. But I am wondering what is the true meaning of each feature. Such as the Cartpole environment, there are four positions and two speeds. I wish to know what is it."
Headless rendering error when executing in Docker,"I'm having troubles executing a script in Docker 

The script is:
```
import os
os.environ['DISABLE_MUJOCO_RENDERING'] = '1'

from dm_control import suite

env = suite.load(domain_name=""humanoid"", task_name=""stand"")
action_spec = env.action_spec()


print(action_spec)

```

What doesn't make sense to me is that when I ssh the machine and execute this script it works without a problem but after building a docker image and running it I get the following:
```
Traceback (most recent call last):
  File ""test_dm_control.py"", line 4, in <module>
    from dm_control import suite
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/suite/acrobot.py"", line 24, in <module>
    from dm_control import mujoco
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control import _render
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/_render/__init__.py"", line 75, in <module>
    Renderer = import_func()
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/_render/__init__.py"", line 36, in _import_egl
    from dm_control._render.pyopengl.egl_renderer import EGLContext
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/_render/pyopengl/egl_renderer.py"", line 43, in <module>
    from dm_control._render.pyopengl import egl_ext as EGL
  File ""/usr/local/lib/python3.6/dist-packages/dm_control/_render/pyopengl/egl_ext.py"", line 33, in <module>
    from OpenGL import EGL
  File ""/usr/local/lib/python3.6/dist-packages/OpenGL/EGL/__init__.py"", line 2, in <module>
    from OpenGL.raw.EGL._types import *
  File ""/usr/local/lib/python3.6/dist-packages/OpenGL/raw/EGL/_types.py"", line 87, in <module>
    raw_eglQueryString = _p.PLATFORM.EGL.eglQueryString
AttributeError: 'NoneType' object has no attribute 'eglQueryString'
```
The docker file is:
```
# Use the official image as a parent image
FROM tensorflow/tensorflow:2.0.0-gpu-py3

ENV MJLIB_PATH=/tf/mujoco200_linux/bin/libmujoco200.so
ENV MJKEY_PATH=/tf/mujoco200_linux/bin/mjkey.txt
ENV LD_LIBRARY_PATH=/tf/mujoco200_linux/bin/
ENV PYGLFW_LIBRARY=/tf/mujoco200_linux/bin/libglfw.so.3

# i need this for ffmpeg
ENV PATH=""/tf/.local/bin/:${PATH}""

# Run the command inside your image filesystem
RUN pip install --upgrade pip && \
        pip install gym && \
    pip install gym[atari] && \
        pip install dm_control && \
        pip install tqdm && \
        pip install np_utils && \
        pip install opencv-python
```
The OS both on the server and in Docker is Ubuntu.
Thanks a lot for any help you can provide!


"
Cannot install with Python3.8,"After  unzipping mujoco in ~/.mujoco/ and installing bazel, pip install dm_control gives the following error:
```
Installing collected packages: dm-tree, dm-env, dm-control
    Running setup.py install for dm-tree ... error
    ERROR: Command errored out with exit status 1:
     command: /home/ludovic/.general_env/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-install-21tka1qj/dm-tree/setup.py'""'""'; __file__='""'""'/tmp/pip-install-21tka1qj/dm-tree/setup.py'""'""';f=getattr(tokenize, '""'""'open'""'""', open)(__file__);code=f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-ou4ug0ty/install-record.txt --single-version-externally-managed --compile --install-headers /home/ludovic/.general_env/include/site/python3.8/dm-tree
         cwd: /tmp/pip-install-21tka1qj/dm-tree/
    Complete output (37 lines):
    running install
    running build
    running build_py
    creating build
    creating build/lib.linux-x86_64-3.8
    creating build/lib.linux-x86_64-3.8/tree
    copying tree/tree_test.py -> build/lib.linux-x86_64-3.8/tree
    copying tree/tree_benchmark.py -> build/lib.linux-x86_64-3.8/tree
    copying tree/__init__.py -> build/lib.linux-x86_64-3.8/tree
    running build_ext
    bazel build //tree:_tree --symlink_prefix=build/temp.linux-x86_64-3.8/bazel- --compilation_mode=opt
    Starting local Bazel server and connecting to it...
    Loading:
    Loading: 0 packages loaded
    Analyzing: target //tree:_tree (1 packages loaded, 0 targets configured)
    INFO: Analyzed target //tree:_tree (23 packages loaded, 286 targets configured).
    INFO: Found 1 target...
    [0 / 26] [Prepa] BazelWorkspaceStatusAction stable-status.txt
    ERROR: /tmp/pip-install-21tka1qj/dm-tree/tree/BUILD:27:1: C++ compilation of rule '//tree:_tree.so' failed (Exit 1) gcc failed: error executing command /usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections ... (remaining 47 argument(s) skipped)
    
    Use --sandbox_debug to see verbose messages from the sandbox
    In file included from external/python_headers/object.h:4,
                     from external/python_headers/pytime.h:6,
                     from external/python_headers/Python.h:85,
                     from ./tree/tree.h:19,
                     from tree/tree.cc:15:
    external/python_headers/pymem.h:142:13: fatal error: cpython/pymem.h: No such file or directory
      142 | #  include  ""cpython/pymem.h""
          |             ^~~~~~~~~~~~~~~~~
    compilation terminated.
    Target //tree:_tree failed to build
    Use --verbose_failures to see the command lines of failed build steps.
    INFO: Elapsed time: 2.571s, Critical Path: 0.21s
    INFO: 1 process: 1 linux-sandbox.
    FAILED: Build did NOT complete successfully
    FAILED: Build did NOT complete successfully
    error: command 'bazel' failed with exit status 1
    ----------------------------------------
ERROR: Command errored out with exit status 1: /home/ludovic/.general_env/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '""'""'/tmp/pip-install-21tka1qj/dm-tree/setup.py'""'""'; __file__='""'""'/tmp/pip-install-21tka1qj/dm-tree/setup.py'""'""';f=getattr(tokenize, '""'""'open'""'""', open)(__file__);code=f.read().replace('""'""'\r\n'""'""', '""'""'\n'""'""');f.close();exec(compile(code, __file__, '""'""'exec'""'""'))' install --record /tmp/pip-record-ou4ug0ty/install-record.txt --single-version-externally-managed --compile --install-headers /home/ludovic/.general_env/include/site/python3.8/dm-tree Check the logs for full command output.
```

I am attempting to install with python3.8 (tried on archlinux and ubuntu), I tried the same procedure with python3.6 (redhat) and had no issue. I played around in the install files and I assume the problem comes from the installer not being able to find the relative include: cpython/\<HEADER\>.h (they do exist despite the No such file error).

In the example above, the problem comes from cpython/pymem.h but removing the dependency in the pymem.h file just moves the problem to another header file that depends on a file in cpython/.

I don't really know the inner workings of the installer, it might be very easy to fix but I have no clue."
Cannot set velocity on Entity with no free joint in soccer environment,"I try to run and view the  soccer environment. However when I execute dm_control/locomotion/soccer/explore.py as shown in corresponding README.md, I got an error like 'Cannot set velocity on Entity with no free joint'. Does anyone get the same issue or know how to fix it? I am here for help."
No module named LabMaze in labmaze_texture,"Traceback (most recent call last):
  File ""rodent.py"", line 1, in <module>
    from dm_control.locomotion.arenas import corridors as corr_arenas
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/dm_control/locomotion/arenas/__init__.py"", line 22, in <module>
    from dm_control.locomotion.arenas.labmaze_textures import FloorTextures
  File ""/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/dm_control/locomotion/arenas/labmaze_textures.py"", line 23, in <module>
    from labmaze import assets as labmaze_assets
ModuleNotFoundError: No module named 'labmaze'"
Mujoco Soccer simulation too slow,"I am trying to train a 1v1 soccer games in the soccer environment. However, the training is really slow. Is there any method to speed up the simulation?

"
can we change the robot physical parameters?,So I created environments using the physics module and change some parameters such as body_mass to another vector that is slightly perturbed from the original vector. Will the simulation results still be correct?
Loading msh files with texture,"I'm looking at the test environment defined here:
https://github.com/deepmind/dm_control/blob/master/dm_control/mjcf/test_assets/model_with_assets.xml

When I load the env, the cube msh mesh doesn't have any texture associated with it. The other stl meshes all have textures.

I have two questions in this regard:
1. How is cube.msh generated? 
2. I changed texture type to ""2d"" from the default ""cube"" type and the texture now gets loaded for the msh mesh. But the pattern seems off. How is the ""texcoord"" attribute defined in cube.msh?
"
Headless rendering on ubuntu machine,"I'm trying to get visual observations from a headless Ubuntu machine with `MUJOCO_GL=egl`, and got the following error report:

        AttributeError: 'GLXPlatform' object has no attribute 'EGL'

The same code can run on a desktop ubuntu with monitor without error report. It seems like this is related with the pyopengl package but I'm not sure how to solve this. 
"
Rendering Issue on Windows 10 (x64): GLFWError: (65539),"I know dm_control isn't officially supported on windows, but I managed to get dm_control working last summer and am since trying to continue that work with a new install.

dm_control and MuJoCo appears to mostly work, I can run simulations and use most functions. The only issue is that trying to render with `pixels = env.physics.render()` results in the following error:

```
runfile('C:/Users/user/OneDrive/Documents/FYP/python/DM Control Rendering.py', wdir='C:/Users/user/OneDrive/Documents/FYP/python')
Traceback (most recent call last):

  File ""<ipython-input-5-346c1f7f484f>"", line 1, in <module>
    runfile('C:/Users/user/OneDrive/Documents/FYP/python/DM Control Rendering.py', wdir='C:/Users/user/OneDrive/Documents/FYP/python')

  File ""C:\Users\user\Anaconda3\lib\site-packages\spyder_kernels\customize\spydercustomize.py"", line 827, in runfile
    execfile(filename, namespace)

  File ""C:\Users\user\Anaconda3\lib\site-packages\spyder_kernels\customize\spydercustomize.py"", line 110, in execfile
    exec(compile(f.read(), filename, 'exec'), namespace)

  File ""C:/Users/user/OneDrive/Documents/FYP/python/DM Control Rendering.py"", line 17, in <module>
    pixels = env.physics.render()

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\mujoco\engine.py"", line 183, in render
    physics=self, height=height, width=width, camera_id=camera_id)

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\mujoco\engine.py"", line 602, in __init__
    if self._physics.contexts.mujoco is not None:

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\mujoco\engine.py"", line 459, in contexts
    self._make_rendering_contexts()

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\mujoco\engine.py"", line 443, in _make_rendering_contexts
    max_width=max_width, max_height=max_height)

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\_render\glfw_renderer.py"", line 49, in __init__
    executor.PassthroughRenderExecutor)

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\_render\base.py"", line 68, in __init__
    ctx.call(self._platform_init, max_width, max_height)

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\_render\executor\render_executor.py"", line 142, in call
    return func(*args, **kwargs)

  File ""C:\Users\user\Anaconda3\lib\site-packages\dm_control\_render\glfw_renderer.py"", line 59, in _platform_init
    glfw.window_hint(glfw.DOUBLEBUFFER, 0)

  File ""C:\Users\user\Anaconda3\lib\site-packages\glfw\__init__.py"", line 1110, in window_hint
    _glfw.glfwWindowHint(hint, value)

  File ""C:\Users\user\Anaconda3\lib\site-packages\glfw\__init__.py"", line 609, in errcheck
    _reraise(exc[1], exc[2])

  File ""C:\Users\user\Anaconda3\lib\site-packages\glfw\__init__.py"", line 45, in _reraise
    raise exception.with_traceback(traceback)

  File ""C:\Users\user\Anaconda3\lib\site-packages\glfw\__init__.py"", line 588, in callback_wrapper
    return func(*args, **kwargs)

  File ""C:\Users\user\Anaconda3\lib\site-packages\glfw\__init__.py"", line 800, in _raise_glfw_errors_as_exceptions
    raise GLFWError(message)

GLFWError: (65539) b'Invalid argument for enum parameter'
```

While reading through other issues here on github, I have confirmed that `import glfw` and `assert glfw.init()` both work.

Any ideas? Happy to give more info. Many thanks for reading and helping."
why is the state from physics different from the state from time_step?,"I'm trying two ways of getting states from a ""control"" environment. So I created an environment using suite, for example 

`env = suite.load(domain_name=""cartpole"", task_name=""swingup"")`, 

and 

`time_step=env.reset()`

, then I can get state either by 

`obs = time_step.observation`

 or by 

`env._physics.get_state()`

which one is the better one? If I want to use vision based control, can I call 
`env._physics.render()`

to get the observation?"
use openai gym mujoco xml files in physics,Can I directly initialize an environment not by using the xml files provided in this repo but from openai gym's mujoco xml files? Will there be any discrepancy? 
change visual appearance of rendered environment?,"I found that in some of the xml files there is no parameter for defining the color of objects, or the size of objects. However, in the original MuJoCo environment, just change the xml file can do this.  Is there any quick way to change the visual appearance of the environments such as object color and size?

Update: I think I found them somewhere in the common assets xml files. Thanks."
Indexing result of inverse kinematics,"I found the IKResult.qpos in [inverse_kinematics.py](https://github.com/deepmind/dm_control/blob/f5b83df2df4f0053f0cc4a195d6dd9d94ea1edf1/dm_control/utils/inverse_kinematics.py#L89) is a numpy array. Thus, I cannot index it by joint names as FieldIndex wrapped objects. Any suggestions or solutions?"
EGL initialization error,"Hi,

I've recently come across the following error, on a machine with Nvidia driver version: 440.33.01    CUDA version: 10.2, when trying to use EGL for headless rendering. The same exact code was running properly on a machine with CUDA Version 10.1 and driver version 390.

Any idea how to fix the issue? I've tried reinstalling dm_control with pip.
```
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/suite/acrobot.py"", line 24, in <module>
    from dm_control import mujoco
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control import _render
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/_render/__init__.py"", line 75, in <module>
    Renderer = import_func()
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/_render/__init__.py"", line 36, in _import_egl
    from dm_control._render.pyopengl.egl_renderer import EGLContext
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/_render/pyopengl/egl_renderer.py"", line 66, in <module>
    EGL_DISPLAY = create_initialized_headless_egl_display()
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/_render/pyopengl/egl_renderer.py"", line 49, in create_initialized_headless_egl_display
    for device in EGL.eglQueryDevicesEXT():
  File ""/home/aj/miniconda3/envs/rlpyt/lib/python3.7/site-packages/dm_control/_render/pyopengl/egl_ext.py"", line 65, in eglQueryDevicesEXT
    success = _eglQueryDevicesEXT(max_devices, devices, num_devices)
ctypes.ArgumentError: argument 2: <class 'TypeError'>: expected LP_c_void_p instance instead of EGLDeviceEXT_pointer_Array_10
```

Thanks,
A"
MuJoCo header and bin path override fails,"I tried to install using the following commands but the override does not seem to work. It would be great if there are working examples for these options:

mujoco lib location: `$HOME/.mujoco/mujoco200`

installation script:
```
git clone https://github.com/deepmind/dm_control.git

export MJLIB_PATH=~/.mujoco/mujoco200/bin
cd dm_control
pip install -e . --headers-dir=~/.mujoco/mujoco200/include
```

I have tried the following and non works:
```
python setup.py install --headers-dir=~/.mujoco/mujoco200/include
```

The only hit of the `headers-dir` in the code base are here: [setup.py#L80](https://github.com/deepmind/dm_control/blob/master/setup.py#L80)

But they don't show up in the commands that are available in the `setup.py` file as if we run `python setup.py -h` shows no such options."
Feature/action scale wrapper,"This implements an action scale wrapper than can be used to modify the action bounds.

Happy to take any feedback and comments on this.

Closes https://github.com/deepmind/dm_control/issues/109"
Bump pillow from 5.4.1 to 6.2.0,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 5.4.1 to 6.2.0.
<details>
<summary>Release notes</summary>

*Sourced from [pillow's releases](https://github.com/python-pillow/Pillow/releases).*

> ## 6.2.0
> https://pillow.readthedocs.io/en/stable/releasenotes/6.2.0.html
> 
> ## 6.1.0
> https://pillow.readthedocs.io/en/stable/releasenotes/6.1.0.html
> 
> ## 6.0.0
> No release notes provided.
</details>
<details>
<summary>Changelog</summary>

*Sourced from [pillow's changelog](https://github.com/python-pillow/Pillow/blob/master/CHANGES.rst).*

> 6.2.0 (2019-10-01)
> ------------------
> 
> - Catch buffer overruns [#4104](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4104)
>   [radarhere]
> 
> - Initialize rows_per_strip when RowsPerStrip tag is missing [#4034](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4034)
>   [cgohlke, radarhere]
> 
> - Raise error if TIFF dimension is a string [#4103](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4103)
>   [radarhere]
> 
> - Added decompression bomb checks [#4102](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4102)
>   [radarhere]
> 
> - Fix ImageGrab.grab DPI scaling on Windows 10 version 1607+ [#4000](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4000)
>   [nulano, radarhere]
> 
> - Corrected negative seeks [#4101](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4101)
>   [radarhere]
> 
> - Added argument to capture all screens on Windows [#3950](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3950)
>   [nulano, radarhere]
> 
> - Updated warning to specify when Image.frombuffer defaults will change [#4086](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4086)
>   [radarhere]
> 
> - Changed WindowsViewer format to PNG [#4080](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4080)
>   [radarhere]
> 
> - Use TIFF orientation [#4063](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4063)
>   [radarhere]
> 
> - Raise the same error if a truncated image is loaded a second time [#3965](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3965)
>   [radarhere]
> 
> - Lazily use ImageFileDirectory_v1 values from Exif [#4031](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4031)
>   [radarhere]
> 
> - Improved HSV conversion [#4004](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4004)
>   [radarhere]
> 
> - Added text stroking [#3978](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3978)
>   [radarhere, hugovk]
> 
> - No more deprecated bdist_wininst .exe installers [#4029](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4029)
>   [hugovk]
> 
> - Do not allow floodfill to extend into negative coordinates [#4017](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4017)
>   [radarhere]
></tr></table> ... (truncated)
</details>
<details>
<summary>Commits</summary>

- [`8a30d13`](https://github.com/python-pillow/Pillow/commit/8a30d135378dc6a1c3c08fa4bb9fbc15370feedf) Updated CHANGES.rst [ci skip]
- [`75602d1`](https://github.com/python-pillow/Pillow/commit/75602d12e1b6f2152ab5bd1acfb62a9c8a4a0432) 6.2.0 version bump
- [`4756af9`](https://github.com/python-pillow/Pillow/commit/4756af9c1027ae620eaa9538d6b0dd9b0e844fca) Updated CHANGES.rst [ci skip]
- [`cc16025`](https://github.com/python-pillow/Pillow/commit/cc16025e234b7a7a4dd3a86d2fdc0980698db9cc) Merge pull request [#4104](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4104) from radarhere/overrun
- [`fb84701`](https://github.com/python-pillow/Pillow/commit/fb8470187a45043c33b1c75e7dca48b38d5db7a6) Merge pull request [#4034](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4034) from cgohlke/patch-1
- [`b9693a5`](https://github.com/python-pillow/Pillow/commit/b9693a51c99c260bd66d1affeeab4a226cf7e5a5) Merge pull request [#4103](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4103) from radarhere/dimension
- [`f228d0c`](https://github.com/python-pillow/Pillow/commit/f228d0ccbf6bf9392d7fcd51356ef2cfda80c75a) Merge pull request [#4102](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4102) from radarhere/decompression
- [`aaf2c42`](https://github.com/python-pillow/Pillow/commit/aaf2c421564fcf96bd030487f09b648f7feb7b67) Merge pull request [#4000](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4000) from nulano/dpi_fix
- [`b36c1bc`](https://github.com/python-pillow/Pillow/commit/b36c1bc943d554ba223086c7efb502d080f73905) Merge pull request [#4101](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4101) from radarhere/negative_seek
- [`9a977b9`](https://github.com/python-pillow/Pillow/commit/9a977b975cd871ef9a9128b72414c0de3a292591) Raise error if dimension is a string
- Additional commits viewable in [compare view](https://github.com/python-pillow/Pillow/compare/5.4.1...6.2.0)
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=5.4.1&new-version=6.2.0)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot ignore this [patch|minor|major] version` will close this PR and stop Dependabot creating any more for this minor/major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/deepmind/dm_control/network/alerts).

</details>"
WARNING:absl:Cannot set velocity on Entity with no free joint.,"When I try to generate the random motion for the mujoco soccer environment, it appears"
Configuring dm_control GPU rendering on Different GPUs,"Is there anyway to tell dm_control to render on a specific GPU? When I have many environments in parallel, they all render on GPU 0, and I'd like them to be evenly distributed across every GPU."
" If I can't install libglew2.0, can I use dm_control.viewer?"," If I can't install libglew2.0, can I use dm_control.viewer? (Ubuntu 16.04, python 3.6.1)
"
How to get geom_names from FieldIndexer?,"Hi,
First a big thanks for this amazing python interface to mujoco.

My question is how do I get positions of particular ```geoms``` out of ```geom_xpos```.  So if I do ```physics.named.data.geom_xpos``` it returns a ```FieldIndexer``` to me. It contains positions of all the geoms with respect to world, now I want to get positions of some particular geoms.

Is there a way to iterate over this ```FieldIndexer``` and filter based on ```geom_names```?"
Fix erroneous docstring,
"Pre-allocated contact buffer is full, physics state is invalid.","I encountered several warnings each time I run the dm_control.locomotion example as below:
W0827 .544679 139749952841536 core.py:299] Pre-allocated contact buffer is full. Increase nconmax above 100. Time = 0.0000.
W0827 .545073 139749952841536 core.py:85] Pre-allocated contact buffer is full. Increase nconmax above 100. Time = 0.0000.
W0827 .546310 139749952841536 engine.py:323] Physics state is invalid. Warning(s) raised: mjWARN_CONTACTFULL
And then the episode will terminate with time lasts 0.5s only. Such time is not expected obviously. There were similar problems about this on github. I've read some of them and followed their instructions. However, I failed to follow the variable to find where it was settled or changed, both in code or all .xml files.
So, where can I increase that? Or anyway else can solve this problem?"
Make installation of enum34 and futures dependent on Python version,"These packages should not be installed on newer versions of Python, see https://pypi.org/project/enum34/ and https://pypi.org/project/futures/"
Code typo in tech report,"Page 9, Pixel Observations code.
Argument to pixel Wrapper should be `pixels_only`, not `pixel_only`."
Respect MJCF path processing and XML include specifications,"From the MuJoCo docs:

> The full path to a file is determined as follows. If the strippath attribute described above is ""true"", all path information from the file name is removed. The following checks are then applied in order: (1) if the file name contains an absolute path, it is used without further changes; (2) if this attribute is set and contains an absolute path, the full path is the string given here appended with the file name; (3) the full path is the path to the main MJCF model file, appended with the value of this attribute if specified, appended with the file name.

This is applies to included files, which must be treated as if they were part of the document including them. `dm_control.mjcf`, however, ignores this and treats all paths _relative to the file(s) being included_.

Take the following example:

/root/foo.xml
```xml
<mujoco>
<compiler texturedir=""textures"" />
<include file=""common/skybox.xml"" />
...
</mujoco>
```
/root/common/skybox.xml
```xml
<mujoco>
  <asset>
      <texture name=""skybox"" type=""skybox""
               fileright = ""skyboxes/right.png"" <!-- /root/textures/skyboxes/right.png -->
               ...
      />
  </asset>
</mujoco>
```

This example (were it filled out entirely) compiles successfully using MuJoCo, but fails when using `dm_control.mjcf` which looks for `right.png` in `/root/common/skyboxes/`. It appears the root problem is in `parser.py` which doesn't propagate the the fact that `skybox.xml` was included.

This means the MJCF models in dm_control are incompatible with other MuJoCo-dependent libraries and vice-versa."
"Default to ""file"" if no ""name"" attribute specified for ""mesh"", ""hfield"", and ""texture"" assets","MuJoCo uses the filename for certain assets (with some caveats, see below) if a name is not specified. This saves the user from having redundant elements like:

`<mesh name=""really_long_name"" file=""really_long_name.stl"" />`

From the MuJoCo 2.0 docs:

For asset/texture:
```
name : string, optional
As with all other assets, a texture must have a name in order to be referenced. However if the texture is loaded from a single file with the file attribute, the explicit name can be omitted and the file name (without the path and extension) becomes the texture name. If the name after parsing is empty and the texture type is not ""skybox"", the compiler will generate an error.
```
For asset/mesh:
```
name : string, optional
Name of the mesh, used for referencing. If omitted, the mesh name equals the file name without the path and extension.
```
and asset/hfield:
```
name : string, optional
Name of the height field, used for referencing. If the name is omitted and a file name is specified, the height field name equals the file name without the path and extension.
```

This was a quick hack, so I'm sure you'll want to change this to better suite your codebase, but it appears to be functionally correct. I don't handle the edge case for texture since an error will inevitably be thrown later."
Action scale wrapper,"It would be nice if there was a wrapper that would allow actions to be scaled within a certain interval, similar to what [softlearning](https://github.com/rail-berkeley/softlearning/blob/master/softlearning/environments/gym/wrappers/normalize_action.py) and [gym](https://github.com/openai/gym/pull/1491) has for gym envs."
Mixed scalar and vector observations,"Some of the environments (e.g. `domain_name='quadruped', task_name='run'`) have mixed scalar and vector observations. For example, `env.observation_spec()['torso_upright'].shape == ()` and `env.observation_spec()['torso_velocity'].shape == (3, )`. This is a bit confusing since certain operations like `np.concatenate` require all the inputs to be of the same shape and thus some manual handling needs to happen for scalar fields to reshape then into shape `(1, )`.

Is having scalar observations with shape `()` intentional? Would you accept a PR that converts all the scalar observations to be of shape `(1, )` within the environments? Or maybe a reasonable solution would be to provide a wrapper that reshapes all the desired fields into vectors?"
How to build it on windows64?,
Changing physics.model attributes? ,"I'm wondering if there's an API to change model attributes. For example, take the point mass env - I'd like to change the point mass's color depending on some other variable (e.g. it's position, proximity to target, or reward). Is it possible to do this?

When I try to set `physics.model.{some_attribute} = {some_value}` explicitly I get a `AttributeError: can't set attribute` error. "
add soccer disable contacts option,"From the paper of [""Emergent Coordination through Competition""](https://openreview.net/pdf?id=BkG8sjR5Km). In the section 4.1, it said `We disable contacts between the players, but enable contacts between the players, the pitch and the ball. This makes it impossible for players to foul and avoids the need for a complicated contact rules, and led to more dynamic matches.`. In the file of [https://github.com/deepmind/dm_control/blob/master/dm_control/locomotion/soccer/task.py#L50](https://github.com/deepmind/dm_control/blob/master/dm_control/locomotion/soccer/task.py#L50), I found this option. However, in the environment load function: [https://github.com/deepmind/dm_control/blob/master/dm_control/locomotion/soccer/__init__.py#L83](https://github.com/deepmind/dm_control/blob/master/dm_control/locomotion/soccer/__init__.py#L83), it doesn't include this option and it will cause inconvenient. So, I add `disable_walker_contacts ` to the environment load function to make sure people can set contacts between agents according to their requirements."
ubuntu 18 dm_control.viewer error,"I have installed dm_control in ubuntu 18.04, but I can't use viewer, other parts seem ok
`  File ""/home/adol/anaconda3/lib/python3.6/site-packages/dm_control/viewer/gui/__init__.py"", line 35, in ErrorRenderWindow
    'Cannot create a window because no windowing system could be imported')
ImportError: Cannot create a window because no windowing system could be imported`

I have installed current nvidia driver, and other dependency (sudo apt install libglfw3 libglew2.0 libgl1-mesa-glx libosmesa6)"
Terminal state - Cartpole (two_poles) swing up,"Hi!

I'm trying to do the `cartpole` domain, specifically the `two_poles`- swingup task. As said in the [tech report](https://arxiv.org/pdf/1801.00690.pdf), Control Suite tasks have no terminal states or time limit and are therefore of the infinite-horizon variety; however, I'd like to know when does this task end or, in other words, when does `time_step.last() == True` so that I can know the episode is over?

Thanks!"
Observations in Cartpole: two_poles,"Hi!

According to the [tech report](https://arxiv.org/pdf/1801.00690.pdf), the Cart-k-pole has:
1. dim(S) = 2k+2
2. dim(A) = 1
3. dim(O) = 3k+2
My question is: what does the states and observations physically mean? Because I'm using the `two_pole` non-benchmarking task and I imagine the state corresponds to: position and velocity of the cart and the two poles (we have 6 as dim(S)). However, Why do we have 2 mores observations?

Thanks by the way!"
Why aren't mujoco paths consistent with mujoco-py?,"As said in the title, why are there differences between the two? It makes installation several steps more complicated, especially in the case when both need to be installed as dependencies to a third package. This is what I'm facing now when trying to install https://github.com/rlworkgroup/garage."
Rendering with EGL seems to be non-deterministic,"I'm observing a non-deterministic behavior when using pixels observations. I render with EGL and for two different runs of the same training code (with properly set seeding) I receive different pixels representations for the exactly same environment state.
The difference comes from values of individual pixels, for example in one case the pixels' value is 100, while in another 99. 


"
 Physics state is invalid. Warning(s) raised: mjWARN_BADCTRL,"When i train soccer environment using multiprocessing with 5 environments, this error occurs
```python
File ""/home/duo/hjf/anaconda3/lib/python3.6/site-packages/dm_control/composer/environment.py"", line 362, in step
    self._physics.step()
  File ""/home/duo/hjf/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 142, in step
    mjlib.mj_step1(self.model.ptr, self.data.ptr)
  File ""/home/duo/hjf/anaconda3/lib/python3.6/contextlib.py"", line 88, in __exit__
    next(self.gen)
  File ""/home/duo/hjf/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 262, in check_invalid_state
    _INVALID_PHYSICS_STATE.format(warning_names=', '.join(warning_names)))
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_BADCTRL
```"
MuJoCo Soccer environment simulates too slow,"here is the time cost when i run  soccer environment for one episode with random actions

 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   624000    4.216    0.000    7.479    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/composer/observation/obs_buffer.py:173(drop_unobserved_upcoming_items)
     4000    1.948    0.000   10.160    0.003 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/composer/observation/updater.py:176(prepare_for_next_control_step)
  1321880    1.665    0.000    2.627    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/mjcf/physics.py:223(_synchronize_from_backing_array)
   272408    1.416    0.000    7.544    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/locomotion/walkers/base.py:402(_egocentric)
  1257986    1.410    0.000    1.416    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/mjcf/physics.py:556(bind)
   528792    1.021    0.000    1.021    0.000 {built-in method numpy.core.multiarray.dot}
   624468    0.986    0.000    1.929    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/composer/observation/obs_buffer.py:118(insert)
     4000    0.980    0.000   19.455    0.005 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/composer/observation/updater.py:209(update)
  1087996    0.957    0.000    0.961    0.000 {built-in method numpy.core.multiarray.array}
  1321970    0.938    0.000    3.567    0.000 /home/duo/anaconda3/envs/python36/lib/python3.6/site-packages/dm_control/mjcf/physics.py:355(__getattr__)



it seems that the operation of observation costs the most time,why do this?"
Error importing mjlib when importing suite,"Hi,
I'm currently having trouble importing the suite in python. When I do ""from dm_control import suite"", I get the following error:
```>>> from dm_control import suite
WARNING: Logging before flag parsing goes to stderr.
W0528 10:33:53.116941 140242758797120 __init__.py:36] mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/suite/acrobot.py"", line 24, in <module>
    from dm_control import mujoco
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/cp/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control.mujoco import index
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/mujoco/index.py"", line 92, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 25, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/work/scratch/ey25ocyd/newenv/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 33, in <module>
    from dm_control.mujoco.wrapper.mjbindings import mjlib
ImportError: cannot import name 'mjlib'
 mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
```

Installation via pip worked without errors, I've also set the LD_LIBRARY_PATH. I even tried setting the MJLIB_PATH to libmujoco.so myself but I still get the error. It seems like it finds the file but has problems importing it.

The problem could be related to [this issue](https://github.com/deepmind/dm_control/issues/3) as I haven't installed any rendering backend (GLFW/GLEW/OSMesa/...). As I am using it on a cluster without windowing system and won't use any rendering functionality, this should be no problem, right? I also followed [this hint](https://github.com/deepmind/dm_control/issues/20#issuecomment-360988234), executing
`os.environ['DISABLE_MUJOCO_RENDERING'] = '1'`
before the import but that also doesn't help."
Parallelized training generates many 'C+G' type processes on GPU 0,"I'm parallelizing my implementation of RL algorithms with dm_control (master branch), it seems many `C+G` type processes are generated and put on GPU0, according to what `nvidia-smi` shows. But when I replace dm_control enviroment with OpenAI gym Mujoco environment, it does not have this behavior anymore. So probably the problem is not related to DL framework itself.

Is there a potential reason why it does this ?"
How to use on Ubuntu 18? [Installation fails despite same steps as my Ubuntu 16 system],"I have two different machines, one with Ubuntu 16.04 (and Python 3.5.2) and another with Ubuntu 18.04 (and Python 3.6.7). I can get `dm_control` working on the 16.04 machine but not the 18.04 machine. The README here implies that Ubuntu 16 is the most tested version, so I'm not sure if 18 is supposed to work, but is it _possible_ to get it working? Here are my steps to reproduce, and hopefully the error message will be clear.

# Ubuntu 16.04 machine

MuJoCo 2.0 is installed here with mjkey at the standard location.

```
daniel@takeshi:~ $ ls -lh .mujoco/
total 8.0K
-rw-rw-r-- 1 daniel daniel  965 Mar  8 13:18 mjkey.txt
drwxrwxr-x 7 daniel daniel 4.0K Mar  8 12:17 mujoco200_linux
```

I do `pip install .` (NOT in editable mode) **in a clean Python 3.5.2 virtualenv**, as of master commit 37a17bf3d6800faee8432fd3ce9df8f4c1725e7f and it seems to be working. (It was already installed before this command, I'm just doing it again to confirm.)

```
(mujoco-py3) daniel@takeshi:~/dm_control (master) $ pip install .
Processing /home/daniel/dm_control
Requirement already satisfied: absl-py>=0.7.0 in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (0.7.1)
Requirement already satisfied: enum34 in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (1.1.6)
Requirement already satisfied: future in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (0.17.1)
Requirement already satisfied: futures in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (3.1.1)
Requirement already satisfied: glfw in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (1.7.1)
Requirement already satisfied: lxml in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (4.3.3)
Requirement already satisfied: numpy in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (1.16.3)
Requirement already satisfied: pyopengl in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (3.1.0)
Requirement already satisfied: pyparsing in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (2.4.0)
Requirement already satisfied: setuptools in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (41.0.1)
Requirement already satisfied: six in /home/daniel/Envs/mujoco-py3/lib/python3.5/site-packages (from dm-control==0.0.0) (1.12.0)
Building wheels for collected packages: dm-control
  Building wheel for dm-control (setup.py) ... done
  Stored in directory: /tmp/pip-ephem-wheel-cache-kkd65c2o/wheels/29/a9/b5/bb7d9be35d3d72476e5db2fc741bdc8e8d4ee9f4ca6a96f9f5
Successfully built dm-control
Installing collected packages: dm-control
  Found existing installation: dm-control 0.0.0
    Uninstalling dm-control-0.0.0:
      Successfully uninstalled dm-control-0.0.0
Successfully installed dm-control-0.0.0
```

I decide to run a python script. I go into `dm_control/viewer` and run this command:

```
(mujoco-py3) daniel@takeshi:~/dm_control/dm_control/viewer (master) $ python viewer_test.py
```

and it seems to work!

I don't set any environment variables to do anything MuJoCo related because I installed them according to the defaults of what this repository expects. For example, my LD_LIBRARY_PATH says nothing about MuJoCo, etc.


# Ubuntu 18.04 machine

MuJoCo 2.0 is installed here with the mjkey at the standard location:

```
seita@hermes1-ubuntu18:~ $ ls -lh .mujoco/
total 8.0K
-rw-r--r-- 1 seita seita  965 May 10 14:41 mjkey.txt
drwxrwxr-x 7 seita seita 4.0K Oct  1  2018 mujoco200_linux
```

And furthermore, here's the library files:

```
seita@hermes1-ubuntu18:~ $ ls -lh .mujoco/mujoco200_linux/bin/
total 6.0M
-rwxrwxr-x 1 seita seita  19K Oct  1  2018 basic
-rwxrwxr-x 1 seita seita  14K Oct  1  2018 compile
-rwxrwxr-x 1 seita seita  19K Oct  1  2018 derivative
-rwxrwxr-x 1 seita seita 802K Oct  1  2018 libglewegl.so
-rwxrwxr-x 1 seita seita 746K Oct  1  2018 libglewosmesa.so
-rwxrwxr-x 1 seita seita 792K Oct  1  2018 libglew.so
-rwxrwxr-x 1 seita seita 244K Oct  1  2018 libglfw3.a
-rwxrwxr-x 1 seita seita 160K Oct  1  2018 libglfw.so.3
-rwxrwxr-x 1 seita seita 1.4M Oct  1  2018 libmujoco200nogl.so
-rwxrwxr-x 1 seita seita 1.7M Oct  1  2018 libmujoco200.so
-rw-r--r-- 1 seita seita  965 May 10 14:36 mjkey.txt
-rwxrwxr-x 1 seita seita  19K Oct  1  2018 record
-rwxrwxr-x 1 seita seita  85K Oct  1  2018 simulate
-rwxrwxr-x 1 seita seita  26K Oct  1  2018 testspeed
-rwxrwxr-x 1 seita seita  50K Oct  1  2018 testxml
```

I do `pip install .` (NOT in editable mode) **in a clean Python 3.6.7 virtualenv**, as of master commit 37a17bf3d6800faee8432fd3ce9df8f4c1725e7f and it seems to be working. (It was already installed before this command, I'm just doing it again to confirm.)

```
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control (master) $ pip install .
Processing /home/seita/dm_control
Requirement already satisfied: absl-py>=0.7.0 in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (0.7.1)
Requirement already satisfied: enum34 in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (1.1.6)
Requirement already satisfied: future in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (0.17.1)
Requirement already satisfied: futures in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (3.1.1)
Requirement already satisfied: glfw in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (1.7.1)
Requirement already satisfied: lxml in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (4.3.3)
Requirement already satisfied: numpy in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (1.16.3)
Requirement already satisfied: pyopengl in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (3.1.0)
Requirement already satisfied: pyparsing in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (2.4.0)
Requirement already satisfied: setuptools in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (41.0.1)
Requirement already satisfied: six in /home/seita/Envs/mujoco-py3/lib/python3.6/site-packages (from dm-control==0.0.0) (1.12.0)
Building wheels for collected packages: dm-control
  Building wheel for dm-control (setup.py) ... done
  Stored in directory: /tmp/pip-ephem-wheel-cache-2lsp8xy6/wheels/93/d4/5c/f678c887e3a665d4da0c9424248e959be7f78bd88afa463ba6
Successfully built dm-control
Installing collected packages: dm-control
  Found existing installation: dm-control 0.0.0
    Uninstalling dm-control-0.0.0:
      Successfully uninstalled dm-control-0.0.0
Successfully installed dm-control-0.0.0
```


As with my 16.04 machine, I go to `dm_control/viewer` and run this command:

```
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control/dm_control/viewer (master) $ python viewer_test.py 
WARNING: Logging before flag parsing goes to stderr.
W0510 15:46:09.859044 140415814829888 __init__.py:36] mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
Traceback (most recent call last):
  File ""viewer_test.py"", line 22, in <module>
    from dm_control.mujoco.wrapper.mjbindings import enums
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control.mujoco import index
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/index.py"", line 92, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 25, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 32, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 21, in <module>
    mjlib = util.get_mjlib()
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/util.py"", line 124, in get_mjlib
    raise OSError(""Cannot find MuJoCo library at {}."".format(library_path))
OSError: Cannot find MuJoCo library at libmujoco200.so.
```

**This is the same command as what I ran in my Ubuntu 16 machine**, with the same file directory for my MuJoCo files. Yet, for some reason it cannot find the MuJoCo library?

I then decided to change my environment variables to explicitly point to the MuJoCo library. But still it seems to not find it. First, here are the bashrc changes:

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$HOME/.mujoco/mujoco200_linux/bin
export MJLIB_PATH=${HOME}/.mujoco/mujoco200_linux/bin
export MJKEY_PATH=${HOME}/.mujoco/
```

and the result:

```
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control/dm_control/viewer (master) $ echo $LD_LIBRARY_PATH 
/usr/local/cuda/lib64::/home/seita/.mujoco/mujoco200_linux/bin
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control/dm_control/viewer (master) $ echo $MJKEY_PATH 
/home/seita/.mujoco/
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control/dm_control/viewer (master) $ echo $MJLIB_PATH 
/home/seita/.mujoco/mujoco200_linux/bin
(mujoco-py3) seita@hermes1-ubuntu18:~/dm_control/dm_control/viewer (master) $ python viewer_test.py 
WARNING: Logging before flag parsing goes to stderr.
W0510 15:54:07.450641 140009134028608 __init__.py:36] mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
Traceback (most recent call last):
  File ""viewer_test.py"", line 22, in <module>
    from dm_control.mujoco.wrapper.mjbindings import enums
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 44, in <module>
    from dm_control.mujoco import index
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/index.py"", line 92, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 25, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 32, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 21, in <module>
    mjlib = util.get_mjlib()
  File ""/home/seita/Envs/mujoco-py3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/util.py"", line 124, in get_mjlib
    raise OSError(""Cannot find MuJoCo library at {}."".format(library_path))
OSError: Cannot find MuJoCo library at /home/seita/.mujoco/mujoco200_linux/bin.
```"
Step environments in parallel,"Hi, is there some way to step environments in parallel? Relying on the underlying MjSimPool?

Thanks a lot!"
Access to reward function,"Hi, first of all thanks for a great set of benchmarks!

How could I access the reward function? I'm working on some model-based RL project and I need to compute the reward function of arbitrary transitions. In open ai gym environments it is quite straightforward to figure out the reward, but here it seems more intricate.

Thanks a lot!"
I got such error 'can't pickle weakref objects' when I run  multiprocessing program.,"I want run the soccer environment in multiprocessing program. But I got such error 'can't pickle weakref objects'. I know it is beacause the 'env' I created is weakref, so I got such error when I run multiprocessing program. Are there any methods can be used to tackle it?
Thank you!"
Offscreen framebuffer is not complete,"When run the soccer environment, I got the following error
Offscreen framebuffer is not complete, error 0x8cdd.

Maybe it is something about GPU. "
Make dm_control available on PyPI,It'll be very convenient to support pip installation via PyPI
I would very much like to access the implementation of D4PG,
[Update control.py]: Add `step_limit` property,
Cannot launch the viewer using ssh on macos Mojave,"I tried to run the following code on a remote ubuntu 18.04 server using ssh and the local machine's OS is MacOS Mojave. Btw. xclock and xeyes running correctly using ssh. The server setup is Python 3.5.6 with anaconda env. Also, the following codes can run correctly on the server. I don't know where the problem is and try to search answers for 'How to do X11 Forwarding on a Mac' but can't help. What to do next?
```
from dm_control import viewer
from dm_control import suite
env = suite.load(domain_name=""humanoid"", task_name=""stand"")
viewer.launch(env)
```
```
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/cong/anaconda3/envs/dm_control/lib/python3.5/site-packages/dm_control/viewer/__init__.py"", line 42, in launch
    app = application.Application(title=title, width=width, height=height)
  File ""/home/cong/anaconda3/envs/dm_control/lib/python3.5/site-packages/dm_control/viewer/application.py"", line 191, in __init__
    self._window = gui.RenderWindow(width, height, title)
  File ""/home/cong/anaconda3/envs/dm_control/lib/python3.5/site-packages/dm_control/viewer/gui/__init__.py"", line 35, in ErrorRenderWindow
    'Cannot create a window because no windowing system could be imported')
ImportError: Cannot create a window because no windowing system could be imported`
```"
How to control the randomness ?,"It seems to me the environment is deterministic, e.g.

```python
env = suite.load(domain_name='cheetah', task_name='run')
obs1 = env.reset().observation
obs2 = env.reset().observation
print(obs1)
print(obs2)
```
gives 
```
OrderedDict([('position', array([-0.10657491,  0.03791366, -0.01320079,  0.02708236, -0.05382936,
        0.00701578, -0.07508983, -0.06376804])), ('velocity', array([-0.00637606, -0.00594656,  0.00852484, -0.00541404,  0.00263544,
       -0.01481148, -0.00058044, -0.03207024, -0.03622259]))])
OrderedDict([('position', array([-0.10657491,  0.03791366, -0.01320079,  0.02708236, -0.05382936,
        0.00701578, -0.07508983, -0.06376804])), ('velocity', array([-0.00637606, -0.00594656,  0.00852484, -0.00541404,  0.00263544,
       -0.01481148, -0.00058044, -0.03207024, -0.03622259]))])
```
- Shouldn't we expect each call to `reset` randomly initializes the state ?
- Tuning `env.task.random.seed(99)` does not change the result. "
Projection matrix used in the renderer,Is there a way to easily access the projection matrix for a particular camera in order to convert from world coordinates to screen coordinates?
On-screen rendering,"The EGL functionality that you guys added for GPU rendering has been working out for us great, but I'd like to point out a minor issue that we found when trying to use the dm_control viewer - it is necessary to provide the variable `MUJOCO_GL=glfw` whenever we try to run a script that relies on the viewer. This is pretty minor, but just wanted to point it out in case there's a quick fix. "
Slow simulation speeds for composite,"Using a composite to try and model a piece of cloth is leading to extremely slow simulation speeds. To contextualize this, we would like to see whether we can implement a simple environment with our Sawyer robot from [robosuite](https://github.com/StanfordVL/robosuite) and a piece of cloth on the table. I've posted a script below for testing the functionality - it simply reads the xml (which is taken from our SawyerLift environment), adds in a composite using the composer, then creates an environment from the final model. To run it, you should have [robosuite](https://github.com/StanfordVL/robosuite) installed.

```
from dm_control import mjcf
from dm_control import composer
import numpy as np
import sys
from dm_control import viewer

import robosuite as suite
env = suite.make(
        'SawyerLift',
        has_renderer=False,
        has_offscreen_renderer=False,
        ignore_done=True,
        use_camera_obs=False,
        control_freq=100,
    )
env.reset()
env_xml = env.model.get_xml()

cloth = """"""
<mujoco model=""parent"">
    <worldbody>
        <composite type=""grid"" count=""9 9 1"" spacing=""0.05"" offset=""0.7 0 1.0"">
                <geom size="".02""/>
        </composite>
    </worldbody>
</mujoco>""""""

world = mjcf.from_xml_string(env_xml)
cloth = mjcf.from_xml_string(cloth)

class MyEntity(composer.ModelWrapperEntity):
    def _build(self, mjcf_model):
        self._mjcf_model = mjcf_model
        self._mjcf_root = mjcf_model

cloth_entity = MyEntity(cloth)
world_entity = MyEntity(world)

world_entity.attach(cloth_entity)

task = composer.NullTask(world_entity)
task.control_timestep = 0.02
env = composer.Environment(task)

viewer.launch(env)
```
"
Documentation for composer,"We've been trying out the composer interface. The API design looks fantastic, but we're running into some issues, and it has been difficult for us to try and resolve them without additional documentation for the composer. Is there any detailed documentation available for the composer? "
bugfix - viewer does not work correctly when Physics.reload_from_* functions are called,"When Mujoco data is reloaded by Physics.reload_from_* functions, the viewer is not rendered correctly. It can be resolved by detecting a change in data pointer.  "
mocap_demo error (matplotlib problem?): [GLFWApplication _setup:]: unrecognized selector sent to instance 0x10f0b3ae0,"Currently something in the package is resulting in this error when I run the mocap_demo script. The error seems to be the same as #[deepmind/dm_control#62](https://github.com/deepmind/dm_control/issues/62#issue-379954719), and given that the author of that issue put it down to something involving matplotlib it is possible that this is the root cause.

One of the replies to that issue from @saran-t (https://github.com/deepmind/dm_control/issues/62#issuecomment-438239756_) failed to reproduce the error because, it seems, they ran into the more standard matplotlib on OSX in virtualenvs problem, where a ""ImportError: Python is not installed as a framework."" error is thrown. If @saran-t sets the matplotlib backend to 'TkAgg' following the solution here: https://stackoverflow.com/questions/21784641/installation-issue-with-matplotlib-python then they should be able to reproduce this error?

The minimal script required to trigger the error:
```
import matplotlib.pyplot as plt
from dm_control.suite import humanoid_CMU
env = humanoid_CMU.run()
fig = plt.figure()

```
If instead I call the last 2 lines in the other order I get no error i.e. 
```
import matplotlib.pyplot as plt
from dm_control.suite import humanoid_CMU
fig = plt.figure()
env = humanoid_CMU.run()

```
Output:

```
2019-03-01 15:48:11.586 python3.5[63999:14891108] -[GLFWApplication _setup:]: unrecognized selector sent to instance 0x108141cb0
2019-03-01 15:48:11.588 python3.5[63999:14891108] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GLFWApplication _setup:]: unrecognized selector sent to instance 0x108141cb0'
*** First throw call stack:
(
	0   CoreFoundation                      0x000000010010e2db __exceptionPreprocess + 171
	1   libobjc.A.dylib                     0x0000000100dbfc76 objc_exception_throw + 48
	2   CoreFoundation                      0x00000001001a6db4 -[NSObject(NSObject) doesNotRecognizeSelector:] + 132
	3   CoreFoundation                      0x0000000100084820 ___forwarding___ + 1456
	4   CoreFoundation                      0x00000001000841e8 _CF_forwarding_prep_0 + 120
	5   Tk                                  0x0000000110703318 TkpInit + 467
	6   Tk                                  0x0000000110682252 Tk_Init + 1710
	7   _tkinter.cpython-35m-darwin.so      0x000000011055fdcd Tcl_AppInit + 77
	8   _tkinter.cpython-35m-darwin.so      0x000000011055d7d9 _tkinter_create + 889
	9   Python                              0x00000001007b8f59 PyCFunction_Call + 233
	10  Python                              0x00000001008450e8 PyEval_EvalFrameEx + 36648
	11  Python                              0x0000000100845cf0 _PyEval_EvalCodeWithName + 2368
	12  Python                              0x0000000100845df7 PyEval_EvalCodeEx + 71
	13  Python                              0x0000000100793c7a function_call + 186
	14  Python                              0x0000000100761643 PyObject_Call + 99
	15  Python                              0x000000010077c64c method_call + 140
	16  Python                              0x0000000100761643 PyObject_Call + 99
	17  Python                              0x00000001007d6291 slot_tp_init + 81
	18  Python                              0x00000001007ccf24 type_call + 212
	19  Python                              0x0000000100761643 PyObject_Call + 99
	20  Python                              0x000000010083dfa6 PyEval_EvalFrameEx + 7654
	21  Python                              0x00000001008447a8 PyEval_EvalFrameEx + 34280
	22  Python                              0x0000000100845cf0 _PyEval_EvalCodeWithName + 2368
	23  Python                              0x0000000100845df7 PyEval_EvalCodeEx + 71
	24  Python                              0x0000000100793c7a function_call + 186
	25  Python                              0x0000000100761643 PyObject_Call + 99
	26  Python                              0x000000010084161e PyEval_EvalFrameEx + 21598
	27  Python                              0x0000000100845cf0 _PyEval_EvalCodeWithName + 2368
	28  Python                              0x0000000100844086 PyEval_EvalFrameEx + 32454
	29  Python                              0x0000000100845cf0 _PyEval_EvalCodeWithName + 2368
	30  Python                              0x0000000100845e51 PyEval_EvalCode + 81
	31  Python                              0x000000010087411e PyRun_FileExFlags + 206
	32  Python                              0x00000001008743bf PyRun_SimpleFileExFlags + 447
	33  Python                              0x000000010088d178 Py_Main + 3512
	34  python3.5                           0x0000000100000e32 python3.5 + 3634
	35  python3.5                           0x0000000100000c84 python3.5 + 3204
)
libc++abi.dylib: terminating with uncaught exception of type NSException

Process finished with exit code 134 (interrupted by signal 6: SIGABRT)
```"
RuntimeError: This executor has already been terminated.,"I got the error each time after the program has been terminated, the overall program is runnable, but just when it has been finished, this error raised.
`Exception ignored in: <function _create_finalizer.<locals>.callback at 0x10d7eb510>
Traceback (most recent call last):
  File ""/Users/ruifengma/.virtualenvs/dm/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 266, in callback
  File ""/Users/ruifengma/.virtualenvs/dm/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 749, in finalize_mjr_context
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py"", line 81, in __enter__
  File ""/Users/ruifengma/.virtualenvs/dm/lib/python3.6/site-packages/dm_control/_render/base.py"", line 109, in make_current
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py"", line 81, in __enter__
  File ""/Users/ruifengma/.virtualenvs/dm/lib/python3.6/site-packages/dm_control/_render/executor/render_executor.py"", line 95, in execution_context
  File ""/Users/ruifengma/.virtualenvs/dm/lib/python3.6/site-packages/dm_control/_render/executor/render_executor.py"", line 90, in _check_not_terminated
RuntimeError: This executor has already been terminated.`"
RenderWindow is None / Can't load EGL,"System: Windows 10

While trying to run `explore.py` I encountered this error. It appears that an ImportError is being silently swallowed in dm_control.viewer.gui.\_\_init\_\_.py. The underlying error is that EGL cannot be loaded.

Is there some additional install / config step required to get EGL working? 

Traceback (most recent call last):
  File ""dm_control\suite\explore.py"", line 84, in <module>
    app.run(main)
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\absl\app.py"", line 300, in run
    _run_main(main, args)
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\absl\app.py"", line 251, in _run_main
    sys.exit(main(argv))
  File ""dm_control\suite\explore.py"", line 80, in main
    viewer.launch(loader)
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\__init__.py"", line 42, in launch
    app = application.Application(title=title, width=width, height=height)
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\application.py"", line 191, in __init__
    self._window = gui.RenderWindow(width, height, title)
TypeError: 'NoneType' object is not callable


---------------------------------

The swallowed error is

Traceback (most recent call last):
  File ""dm_control\suite\explore.py"", line 27, in <module>
    from dm_control import viewer
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\__init__.py"", line 22, in <module>
    from dm_control.viewer import application
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\application.py"", line 24, in <module>
    from dm_control.viewer import gui
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\gui\__init__.py"", line 25, in <module>
    from dm_control.viewer.gui import glfw_gui
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\gui\glfw_gui.py"", line 25, in <module>
    from dm_control.viewer.gui import base
  File ""C:\Users\Ian\AppData\Roaming\Python\Python36\site-packages\dm_control\viewer\gui\base.py"", line 28, in <module>
    from OpenGL import GL
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\GL\__init__.py"", line 3, in <module>
    from OpenGL import error as _error
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\error.py"", line 12, in <module>
    from OpenGL import platform, _configflags
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\__init__.py"", line 35, in <module>
    _load()
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\__init__.py"", line 32, in _load
    plugin.install(globals())
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\baseplatform.py"", line 92, in install
    namespace[ name ] = getattr(self,name,None)
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\baseplatform.py"", line 14, in __get__
    value = self.fget( obj )
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\egl.py"", line 93, in GetCurrentContext
    return self.EGL.eglGetCurrentContext
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\baseplatform.py"", line 14, in __get__
    value = self.fget( obj )
  File ""C:\Users\Ian\AppData\Local\Programs\Python\Python36\lib\site-packages\OpenGL\platform\egl.py"", line 73, in EGL
    raise ImportError(""Unable to load EGL library"", *err.args)
ImportError: ('Unable to load EGL library', 22, 'The specified module could not be found', None, 126, None, 'EGL', None)


"
GLEW initalization error: Missing GL version,"When I run the Quickstart (listed on the main page of dm_control/dm_control/mujoco), I get the above error. I tried following the instructions to install the correct version of libglew but those command error as well (Can't find module libglew2.0). Any tips on how to fix it? I made sure that I have 
 `export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGLEW.so` in my /.bashrc. "
[solved] framebuffer error,"Hi, working with distributed RL algorithms I found quite confusing bug in dm suite:
when it comes to spawning a bunch of environments (like 32/64) dm_suite just goes to 
```
core.py Offscreen framebuffer is not complete, error *****
```

This bug occurs every time when `number of envs` > `number of cpus threads`.
Is there any way to solve it?"
Running viewer without an environment,"I'm loading a custom MuJoCo environment and I want to run the viewer without defining a RL environment and task. Below is the way I load the XML file:

```
MODEL_PATH = PATH + '/models/data_collection.xml'

physics = mujoco.Physics.from_xml_path(MODEL_PATH)
pixels = physics.render()
```

Is this possible?"
Seg fault on skin element?,"I don't know if this is from `dm_control` or `MuJoCo`, but rendering with glfw on mac gives my segfault when I try to use `<skin/>`. 

Sample script

```
from dm_control import mjcf
from dm_control import composer
from dm_control import viewer
from dm_control import suite

width = 320
height = 240
mjcf_str = """"""
<mujoco model=""parent"">
    <asset>
    <texture builtin=""checker"" height=""512"" name=""texplane"" rgb1="".2 .3 .4"" rgb2="".1 0.15 0.2"" type=""2d"" width=""512""/>
    <material name=""floorplane"" reflectance=""0.5"" texrepeat=""1 1"" texture=""texplane"" texuniform=""true""/>
    </asset>
    <worldbody>
        <geom type=""box"" pos =""0.5 0 0.3"" size=""0.5 0.02 0.1"" rgba=""0 1 0 1""/>
        <geom condim=""3"" material=""floorplane"" name=""floor"" pos=""0 0 -0.7"" size=""3 3 .125"" type=""plane""/>
        <body>
            <composite type=""grid"" count=""9 9 1"" spacing=""0.05"" offset=""0.5 0 0.5"">
                <skin material=""floorplane""/>
                <geom size="".02""/>
            </composite>
        </body>
    </worldbody>
</mujoco>""""""
world = mjcf.from_xml_string(mjcf_str)
world_entity = composer.ModelWrapperEntity(world)
task = composer.NullTask(world_entity)
task.control_timestep = 0.02
env = composer.Environment(task)
viewer.launch(env)
```"
composer.ModelWrapperEntity doesn't support attach,"Seems that `_mjcf_root` of a `composer. ModelWrapperEntity` is not populated properly.

Sample Script:
```
from dm_control import mjcf
from dm_control import composer
import numpy as np
import sys
from dm_control import viewer
from dm_control import suite

width = 320
height = 240

xml_1 = """"""
<mujoco model=""parent"">
    <worldbody>
        <geom type=""box"" pos =""0.5 0 0.3"" size=""0.5 0.02 0.1"" rgba=""0 1 0 1""/>
    </worldbody>
</mujoco>""""""
xml_2 = """"""
<mujoco model=""parent"">
    <worldbody>
        <geom type=""box"" pos =""0.2 0 0.3"" size=""0.5 0.02 0.1"" rgba=""1 0 0 1""/>
    </worldbody>
</mujoco>""""""

mjcf_1 = mjcf.from_xml_string(xml_1)
mjcf_2 = mjcf.from_xml_string(xml_2)


class MyEntity(composer.ModelWrapperEntity):
    def _build(self, mjcf_model):
        self._mjcf_model = mjcf_model
        self._mjcf_root = mjcf_model

e1_p = MyEntity(mjcf_1)
e2_p = MyEntity(mjcf_2)
e1_p.attach(e2_p)
task = composer.NullTask(e1_p)
task.control_timestep = 0.02
env = composer.Environment(task)

print(""Things work with patched"")

e1 = composer.ModelWrapperEntity(mjcf_1)
e2 = composer.ModelWrapperEntity(mjcf_2)

e1.attach(e2) # Error happens here

task = composer.NullTask(e1_p)
task.control_timestep = 0.02
env = composer.Environment(task)
viewer.launch(env)
```

Output:
```
Things work with patched
Traceback (most recent call last):
  File ""dm-bug-2.py"", line 45, in <module>
    e1.attach(e2)
  File ""/.../dm_control/composer/entity.py"", line 306, in attach
    attach_site = self.attachment_site
  File ""/.../dm_control/composer/entity.py"", line 331, in attachment_site
    return self._mjcf_root
AttributeError: 'ModelWrapperEntity' object has no attribute '_mjcf_root'
```"
mjcf.namespace is None,"I am trying to use the composer API but hitting the issue where `dm_control.mjcf.element.RootElement.spec.namespace` is `None`

Example: 
```python
from dm_control import mjcf
from dm_control import composer


mjcf_str = """"""<mujoco model=""parent"">
  <worldbody>
    <body>
      <geom name=""foo"" type=""box"" pos=""-0.2 0 0.3"" size=""0.5 0.3 0.1""/>
      <site name=""attachment_site"" pos=""1. 2. 3."" quat=""1. 0. 0. 1.""/>
    </body>
  </worldbody>
</mujoco>""""""

mjcf_model = mjcf.from_xml_string(mjcf_str)

print('model.spec.namespace', mjcf_model.spec.namespace)
# >> model.spec.namespace None

entity = composer.ModelWrapperEntity(mjcf_model)

task = composer.NullTask(entity)
env = composer.Environment(task)

binding = env.physics.bind(mjcf_model)

i = 0
while True:
    env.step()
    print(binding.xpos)

    if i % 100 == 0:
        print('step: {}'.format(i))
    i += 1
```

This gives the following error:

```
Traceback (most recent call last):
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mjcf/physics.py"", line 640, in bind
    binding = self._bindings[cache_key]
KeyError: MJCF Element: <mujoco model=""parent"">...</mujoco>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""dm-scratch-composer.py"", line 24, in <module>
    binding = env.physics.bind(mjcf_model)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mjcf/physics.py"", line 643, in bind
    namespace, named_index = names_from_elements(mjcf_elements)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mjcf/physics.py"", line 170, in names_from_elements
    namespace = _get_namespace(mjcf_elements)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mjcf/physics.py"", line 674, in _get_namespace
    namespace = element.spec.namespace.split(constants.NAMESPACE_SEPARATOR)[0]
AttributeError: 'NoneType' object has no attribute 'split'
Exception ignored in: <function _create_finalizer.<locals>.callback at 0x1098736a8>
Traceback (most recent call last):
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mujoco/wrapper/core.py"", line 305, in callback
    free_func(temp_ptr)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/mujoco/wrapper/core.py"", line 788, in finalize_mjr_context
    with gl_context.make_current() as ctx:
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/contextlib.py"", line 59, in __enter__
    return next(self.gen)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/render/base.py"", line 109, in make_current
    with self._render_executor.execution_context() as ctx:
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/contextlib.py"", line 59, in __enter__
    return next(self.gen)
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/render/executor/render_executor.py"", line 95, in execution_context
    self._check_not_terminated()
  File ""/Users/jirenz/anaconda/envs/surreal/lib/python3.5/site-packages/dm_control/render/executor/render_executor.py"", line 90, in _check_not_terminated
    raise RuntimeError(_ALREADY_TERMINATED)
RuntimeError: This executor has already been terminated.
```"
get camera information in viewer?,Is there any way to get the pos and quaternion of the free camera in the viewer? Only the statically defined camera can be seen in physics.model.cam_pos
Segmentation fault when loading suite,"I'm getting segmentation fault as soon as I do `from dm_control import suite`.
The difference between my issue and https://github.com/deepmind/dm_control/issues/2 is that:

1. I'm on Ubuntu 16.04.5 while the other issue is on Ubuntu 14.04
2. I'm already using libstdc++.so.6 
3. I'm using a headless system with EGL (instead of GLFW)
4. The segfault happens immediately when I import suite instead of loading an environment

Some other details: I'm on glibc 2.23 and I'm using Python 3.6.8 in a conda environment

The first few frames of a gdb backtrace:
```
#0  0x00007fffedd3afd7 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-glsi.so.396.37
#1  0x00007fffedffd8f6 in ?? () from /usr/lib/x86_64-linux-gnu/libEGL_nvidia.so.0
#2  0x00007fffedfa0511 in ?? () from /usr/lib/x86_64-linux-gnu/libEGL_nvidia.so.0
#3  0x00007fffedfa165c in ?? () from /usr/lib/x86_64-linux-gnu/libEGL_nvidia.so.0
#4  0x00007fffedfb697a in ?? () from /usr/lib/x86_64-linux-gnu/libEGL_nvidia.so.0
#5  0x00007fffc7dc0ec0 in ffi_call_unix64 () from $HOME/miniconda3/envs/dm_control/lib/python3.6/lib-dynload/../../libffi.so.6
#6  0x00007fffc7dc087d in ffi_call () from $HOME/miniconda3/envs/dm_control/lib/python3.6/lib-dynload/../../libffi.so.6
#7  0x00007fffc7fd6ede in _call_function_pointer (argcount=3, resmem=0x7fffffff5290, restype=<optimized out>, atypes=0x7fffffff5230, avalues=0x7fffffff5260, 
    pProc=0x7ffff3a5a440 <eglInitialize>, flags=4353) from $HOME/miniconda3/envs/dm_control/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so
#8  _ctypes_callproc () at <artificial>:1195
#9  0x00007fffc7fd7915 in PyCFuncPtr_call () from $HOME/miniconda3/envs/dm_control/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so
```
This seems to suggest that it's an issue with libnvidia-glsi.so.396.37 or libEGL_nvidia-so.0

For now, I've reverted to using libosmesa and MUJOCO_GL=osmesa"
Hopper task states and actions?,"The hopper task has 4 dimensional actions and 15 dimensional observations. I'm trying to design a cost function for the task, and I'm wondering what each index of the actions and observations corresponds to? In general, how would I find this out?"
Can you indicate which part of code visualize the perturbed force?,"Can you indicate which part of code that accomplished the visualization of perturbed force?
I was trying the following approach:
1. define a tendon that connects to sites.
2. One site is at perturb location, and the other is to be determined. 
3. I want to determine another site via information provided by force (3x1) and torque (3x1) in mujoco, still trying. 

Did the code use a better approach? Which part does the job? I looked into viewer module, but still have no idea about which specific snippet did. "
Cartpole state dimension,"Hi,

In the DeepMind Control Suite paper, Cart-pole has the dimension of (state_dimension=4, action_dimension=1, obervation_dimension=5). However, when I print the state dimension, I have more than that:
```python
OrderedDict([('orientations', ArraySpec(shape=(14,), dtype=dtype('float64'), name='orientations')), ('height', ArraySpec(shape=(), dtype=dtype('float64'), name='height')), ('velocity', ArraySpec(shape=(9,), dtype=dtype('float64'), name='velocity'))])
OrderedDict([('orientations', array([-0.98755397, -0.15728048, -0.53161767,  0.84698444, -0.8187997 ,
       -0.57407931, -0.2290569 , -0.97341304, -0.30038274,  0.95381875,
       -0.85714334, -0.51507796, -0.88954764, -0.45684242])), ('height', 1.3), ('velocity', array([0., 0., 0., 0., 0., 0., 0., 0., 0.]))])
```
How can I transform this ""big state"" into a one with 4 dimensions only ?

Thanks"
Pre-allocated contact buffer is full.,"
Hi, I am trying to reproduce the experiment from paper ""Learning human behaviors from motion capture by adversarial imitation"". I used the code from https://github.com/huiwenzhang/merel-mocap-gail. Bascially the code uses  the GAIL implementation from OpenAI baselines package. While the environment uses the MuJoCo with the dm_control bindings. When I run the experiment, at beginning, it is fine. But after running about 400 iterations, it throws the following error. The error may come from the your package or may from the GAIL algorithm. So I am not sure I posted the issue in the right place. But according to the error, it seems that I didn't release memory or some reason. If you guys have any idea,  let me know. The errors are pasted below:

```
********** Iteration 413 ************
Optimizing Policy...
sampling
WARNING: Logging before flag parsing goes to stderr.
W1128 18:13:48.737738 140367550666496 core.py:88] Pre-allocated contact buffer is full. Increase nconmax above 100. Time = 0.0000.
Traceback (most recent call last):
  File ""/home/huiwen/paper/learn-from-video/merel-mocap-gail/baselines/baselines/gail/run_mujoco.py"", line 268, in <module>
    main(args)
  File ""/home/huiwen/paper/learn-from-video/merel-mocap-gail/baselines/baselines/gail/run_mujoco.py"", line 125, in main
    args.obs_only
  File ""/home/huiwen/paper/learn-from-video/merel-mocap-gail/baselines/baselines/gail/run_mujoco.py"", line 181, in train
    obs_only=obs_only)
  File ""/home/huiwen/paper/learn-from-video/merel-mocap-gail/baselines/baselines/gail/trpo_mpi.py"", line 316, in learn
    seg = seg_gen.__next__()
  File ""/home/huiwen/paper/learn-from-video/merel-mocap-gail/baselines/baselines/gail/trpo_mpi.py"", line 132, in traj_segment_generator
    env.reset()
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/site-packages/dm_control/rl/control.py"", line 90, in reset
    self._task.initialize_episode(self._physics)
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/site-packages/dm_control/suite/humanoid_CMU.py"", line 140, in initialize_episode
    physics.after_reset()
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 231, in after_reset
    self.forward()
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 241, in forward
    mjlib.mj_forward(self.model.ptr, self.data.ptr)
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/contextlib.py"", line 88, in __exit__
    next(self.gen)
  File ""/home/huiwen/anaconda3/envs/gail/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 253, in check_invalid_state
    _INVALID_PHYSICS_STATE.format(warning_names=', '.join(warning_names)))
dm_control.rl.control.PhysicsError: Physics state is invalid. Warning(s) raised: mjWARN_CONTACTFULL
```
Thanks"
How can I playback trajectories deterministically?,"@yuvaltassa following up on #64 I tried modifying the script to disable the warmstart - you can find it [here](https://www.dropbox.com/s/dbz8qev8mpm79dv/test_dm_playback.py?dl=0). It still fails from time to time - do you have any additional insight on what might be happening?

I completely agree on your point about training with deterministic dynamics - we would just like the capability to collect demonstrations and replay the actions deterministically to recover the original trajectory."
Are dm_control environments deterministic?,"I'm wondering if dm_control environments are deterministic. From running the script [here](https://www.dropbox.com/s/dbz8qev8mpm79dv/test_dm_playback.py?dl=0) it seems as though it is not, but I'm pretty sure MuJoCo is supposed to be deterministic. Note that you might need to wait for up to 100 iterations to see an assertion error. "
Headless GPU Rendering,"I'm wondering whether anyone has gotten headless GPU rendering to work. On our Ubuntu machine with a display, the following [script](https://www.dropbox.com/s/56p9wftglyt4dkw/test_dmcontrol.py?dl=0) is able to use the GPU for rendering images, but when running the script headless (i.e. through ssh) we are unable to get it to work with the GPU. "
Can not use along with matplotlib,"Loading MJCF and visualize with matplotlib will crash (MacOS Mojave 10.14.1). Reproduce with the following code:
```
from matplotlib import pyplot as plt
import numpy as np
from dm_control import mujoco
simple_MJCF = """"""
<mujoco>
<worldbody>
<light name =""top"" pos =""0 0 1.5""/>
<geom name =""floor"" type =""plane"" size =""1 1 .1""/>
<body name =""box"" pos =""0 0 .3"" >
<joint name =""up_down"" type =""slide"" axis =""0 0 1""/>
<geom name =""box"" type =""box"" size ="".2 .2 .2"" rgba =""1 0 0 1""/>
<geom name =""sphere"" pos ="".2 .2 .2"" size ="".1"" rgba =""0 1 0 1""/>
</body>
</worldbody>
</mujoco>
""""""
physics = mujoco.Physics.from_xml_string(simple_MJCF)
pixels = physics.render()
plt.imshow(pixels)
plt.savefig('./test.png')
```

The error message is

> 2018-11-12 16:13:15.266 python[37560:1214767] -[GLFWApplication _setup:]: unrecognized selector sent to instance 0x7f7f80990c00
> 2018-11-12 16:13:15.266 python[37560:1214767] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GLFWApplication _setup:]: unrecognized selector sent to instance 0x7f7f80990c00'
> *** First throw call stack:
> (
> 	0   CoreFoundation                      0x00007fff2ee07e65 __exceptionPreprocess + 256
> 	1   libobjc.A.dylib                     0x00007fff5ae5f720 objc_exception_throw + 48
> 	2   CoreFoundation                      0x00007fff2ee8522d -[NSObject(NSObject) __retain_OA] + 0
> 	3   CoreFoundation                      0x00007fff2eda9820 ___forwarding___ + 1486
> 	4   CoreFoundation                      0x00007fff2eda91c8 _CF_forwarding_prep_0 + 120
> 	5   libtk8.6.dylib                      0x000000011b3e246f TkpInit + 383
> 	6   libtk8.6.dylib                      0x000000011b33b21e Initialize + 2622
> 	7   _tkinter.cpython-36m-darwin.so      0x000000011b161a16 _tkinter_create + 1174
> 	8   python                              0x000000010e167ae8 _PyCFunction_FastCallDict + 200
> 	9   python                              0x000000010e23f3e2 call_function + 146
> 	10  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	11  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	12  python                              0x000000010e23ff83 _PyFunction_FastCallDict + 355
> 	13  python                              0x000000010e0e5b00 _PyObject_FastCallDict + 320
> 	14  python                              0x000000010e10cf68 method_call + 136
> 	15  python                              0x000000010e0ed13e PyObject_Call + 62
> 	16  python                              0x000000010e18f485 slot_tp_init + 117
> 	17  python                              0x000000010e193981 type_call + 241
> 	18  python                              0x000000010e0e5a71 _PyObject_FastCallDict + 177
> 	19  python                              0x000000010e0edca7 _PyObject_FastCallKeywords + 327
> 	20  python                              0x000000010e23f492 call_function + 322
> 	21  python                              0x000000010e23d178 _PyEval_EvalFrameDefault + 47112
> 	22  python                              0x000000010e23f79f fast_function + 191
> 	23  python                              0x000000010e23f42e call_function + 222
> 	24  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	25  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	26  python                              0x000000010e23ff83 _PyFunction_FastCallDict + 355
> 	27  python                              0x000000010e0e5b00 _PyObject_FastCallDict + 320
> 	28  python                              0x000000010e10cf68 method_call + 136
> 	29  python                              0x000000010e0ed13e PyObject_Call + 62
> 	30  python                              0x000000010e23d2be _PyEval_EvalFrameDefault + 47438
> 	31  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	32  python                              0x000000010e23f83c fast_function + 348
> 	33  python                              0x000000010e23f42e call_function + 222
> 	34  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	35  python                              0x000000010e23f79f fast_function + 191
> 	36  python                              0x000000010e23f42e call_function + 222
> 	37  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	38  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	39  python                              0x000000010e23f83c fast_function + 348
> 	40  python                              0x000000010e23f42e call_function + 222
> 	41  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	42  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	43  python                              0x000000010e23f83c fast_function + 348
> 	44  python                              0x000000010e23f42e call_function + 222
> 	45  python                              0x000000010e23d0c8 _PyEval_EvalFrameDefault + 46936
> 	46  python                              0x000000010e23073b _PyEval_EvalCodeWithName + 427
> 	47  python                              0x000000010e289c0c PyRun_FileExFlags + 252
> 	48  python                              0x000000010e2893be PyRun_SimpleFileExFlags + 366
> 	49  python                              0x000000010e2af216 Py_Main + 3718
> 	50  python                              0x000000010e0ddb0d main + 509
> 	51  libdyld.dylib                       0x00007fff5bf2e08d start + 1
> )
> libc++abi.dylib: terminating with uncaught exception of type NSException
> Abort trap: 6

The issue seems very similar to this one: https://github.com/deepmind/pysc2/issues/2"
Runtime error with a simple MJCF example,"Hi, I tried to run the following simple MJCF model from the tech report, inside a new conda environment with python3.6:
```
import numpy as np
from dm_control import mujoco
simple_MJCF = """"""
<mujoco>
<worldbody>
<light name =""top"" pos =""0 0 1.5""/>
<geom name =""floor"" type =""plane"" size =""1 1 .1""/>
<body name =""box"" pos =""0 0 .3"" >
<joint name =""up_down"" type =""slide"" axis =""0 0 1""/>
<geom name =""box"" type =""box"" size ="".2 .2 .2"" rgba =""1 0 0 1""/>
<geom name =""sphere"" pos ="".2 .2 .2"" size ="".1"" rgba =""0 1 0 1""/>
</body>
</worldbody>
</mujoco>
""""""
physics = mujoco.Physics.from_xml_string(simple_MJCF)
pixels = physics.render()
```
The code terminates with the following message:


Exception ignored in: <function _create_finalizer.<locals>.callback at 0x7f087dea4510>
Traceback (most recent call last):
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 305, in callback
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py"", line 788, in finalize_mjr_context
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/contextlib.py"", line 81, in __enter__
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/site-packages/dm_control/render/base.py"", line 109, in make_current
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/contextlib.py"", line 81, in __enter__
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/site-packages/dm_control/render/executor/render_executor.py"", line 95, in execution_context
  File ""/home/xingyu/software/miniconda3/envs/dm_control/lib/python3.6/site-packages/dm_control/render/executor/render_executor.py"", line 90, in _check_not_terminated
RuntimeError: This executor has already been terminated.

Any idea on how to solve this?"
Threading issue with Anaconda,"I am able to run the premade environments properly, however I want to create my own environment as dm_control supports mujoco 2.0 now. Following to tech report, I tried the following code snippet 

```
simple_MJCF = """"""
<mujoco>
<worldbody>
<light name =""top"" pos =""0 0 1.5""/>
<geom name =""floor"" type =""plane"" size =""1 1 .1""/>
<body name =""box"" pos =""0 0 .3"" >
<joint name =""up_down"" type =""slide"" axis =""0 0 1""/>
<geom name =""box"" type =""box"" size ="".2 .2 .2"" rgba =""1 0 0 1""/>
<geom name =""sphere"" pos ="".2 .2 .2"" size ="".1"" rgba =""0 1 0 1""/>
</body>
</worldbody>
</mujoco>
""""""

physics = mujoco.Physics.from_xml_string(simple_MJCF)
``` 
I get the following error, 

> File ""/home/anaconda3/lib/python3.5/threading.py"", line 1069, in _wait_for_tstate_lock
>     assert self._is_stopped
> AssertionError: 
> 

This is strangle because I am able to run benchmark environments without issues. Is there a workaround I should try ? 
 
"
Does this control suite support collision detection and contact force?,"By looking through the mujoco documentation, I found that the mujoco supports collision detection and all the active contacts are stored in the variable mjData.contact, by which man can also calculate the contact force.
Does this control suite have any interface to get the collision and contact information? How can I access the mjData.contact variable at runtime with this suite? 

Thanks in advance."
Segfault when calling from_xml_path with meshes files,"Duplication of #11 but I wanted to open a new issue with my .xml. My setup is Ubuntu 16.04, MuJoCo 2.0 and Python 2.7. The .xml file works fine with `simulate` example of MuJoCo Pro. Currently, I am able to use call from_binary_path but it is not very convenient since everytime I want to change something in the environment I have to `compile` the binary model from xml.

Here is my [.xml file](https://gist.github.com/tkelestemur/25b57cdb5009d7f24ed1ffd3334f122f). I can share my meshes files as well if you want to reproduce."
Can't import viewer on Arch Linux,"Every time I try to `from dm_control import viewer`, Python throws the follow error
```
>>> from dm_control import viewer
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/dm_control/viewer/__init__.py"", line 22, in <module>
    from dm_control.viewer import application
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/dm_control/viewer/application.py"", line 23, in <module>
    from dm_control import render
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/dm_control/render/__init__.py"", line 62, in <module>
    Renderer = import_func()
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/dm_control/render/__init__.py"", line 38, in _import_osmesa
    from dm_control.render.pyopengl.osmesa_renderer import OSMesaContext
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/dm_control/render/pyopengl/osmesa_renderer.py"", line 41, in <module>
    from OpenGL import GL
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/OpenGL/GL/__init__.py"", line 4, in <module>
    from OpenGL.GL.VERSION.GL_1_1 import *
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/OpenGL/GL/VERSION/GL_1_1.py"", line 14, in <module>
    from OpenGL.raw.GL.VERSION.GL_1_1 import *
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/OpenGL/raw/GL/VERSION/GL_1_1.py"", line 7, in <module>
    from OpenGL.raw.GL import _errors
  File ""PYTHON_INSTALLATION/lib/python3.7/site-packages/OpenGL/raw/GL/_errors.py"", line 4, in <module>
    _error_checker = _ErrorChecker( _p, _p.GL.glGetError )
  File ""PYTHON_INSTALLATION/lib/python3.7/ctypes/__init__.py"", line 369, in __getattr__
    func = self.__getitem__(name)
  File ""PYTHON_INSTALLATION/lib/python3.7/ctypes/__init__.py"", line 374, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: /usr/lib/libOSMesa.so.8: undefined symbol: glGetError
```
which seems to be caused by PyOpenGL's incompatibility with mesa-18.2.3-1 on Arch Linux. I've open an issue on PyOpenGL here: https://github.com/mcfletch/pyopengl/issues/18
but I'm wondering if anyone else has run into this issue. If so, how did you get around it? "
Request for acrobot swing up control solution,I'm trying to design a lqr controller along the optimal trajectory of the swing up task for acrobot. But the control solution I got by gradient descending cannot bring the acrobot close enough to the top position for my lqr controller to balance it. I'm wondering if you could provide the control solution for the acrobot swing up task? Thanks a lot!
Can't launch the viewer,"I am getting the following for the `viewer.launch(env)` function. 

```
Traceback (most recent call last):
  File ""/home/tarik/dm_test.py"", line 8, in <module>
    viewer.launch(env)
  File ""/home/tarik/develop/py-envs/rl/local/lib/python2.7/site-packages/dm_control/viewer/__init__.py"", line 42, in launch
    app = application.Application(title=title, width=width, height=height)
  File ""/home/tarik/develop/py-envs/rl/local/lib/python2.7/site-packages/dm_control/viewer/application.py"", line 191, in __init__
    self._window = gui.RenderWindow(width, height, title)
  File ""/home/tarik/develop/py-envs/rl/local/lib/python2.7/site-packages/dm_control/viewer/gui/__init__.py"", line 35, in ErrorRenderWindow
    'Cannot create a window because no windowing system could be imported')
ImportError: Cannot create a window because no windowing system could be imported
Exception RuntimeError: RuntimeError('This executor has already been terminated.',) in <function callback at 0x7f106b5350c8> ignored
```

I belive osmesa is currently being used:
```
In [2]: render.BACKEND
Out[2]: 'osmesa'
```

My setup is Ubuntu 16.04, Python 2.7 with virtualenv. 

PS. MuJoCo by itsel works fine."
How to add new objects in one domain or environment?,"For example, in the domain Point-mass, which is introduced in your thesis ""DeepMind Control Suite"", I want to add a new collision point near the target, which works like a trap, every time when the moving point touches this collision point, it will get a negative reward -1. 

As a result, I can finally train an agent, who can not only reach the desired target but also avoid the possible collisions when planning the path. The idea is like in a factory, there are not only robots but also human workers, and when the robot do some tasks, it shall avoid the collision and hurting humans.

I tried to modify the XML file to add the point, but it appears as only a static point in the GUI and the agent just ignores it, because I do not know how to specify a negative reward for this point. And btw, I want to make this point dynamic, just like a walking human.

I would be really grateful if you can offer some documentation or tutorials about how to create new objects in an existing environment or totally creating a new environment."
New domain and task,"Suppose I would like to write my own domain and task.

I copied humanoid.xml and humanoid.py, renamed to the same name and also in all occurrence in those files. I included __init__.py from suite and added import for the new suit I just copied.

Since there is no proper documentation I assume making this as playground is the best, right? I know I can register Gym environments in __init__.py very easily. Is there any way how to develop my own domain and task? Thank you!"
Request for a few new standard environments,"It would be nice to add a few more standard environments, such as following:

- Maze: spawn robot (Ant/Humanoid/Point mass) and the objective is to reach the goal
- Gather: spawn robot (Ant/Humanoid/Point mass) and the objective is to collect green dots and avoid red dots. 

These also make people life much easier to quickly adapt similar environments. 

![image](https://user-images.githubusercontent.com/18168681/47423684-f670a600-d785-11e8-8364-0a4a2c071e8a.png)
![image](https://user-images.githubusercontent.com/18168681/47423753-20c26380-d786-11e8-9ee4-209b2b21dac2.png)
"
Segmentation fault when the viewer window is closed.,"I run the code about viewing the environment with a policy in ""https://github.com/deepmind/dm_control/tree/master/dm_control/viewer"" and it works very well.

However, when the episode terminated, it will report ""Segmentation fault: 11"" in the command window."
Wrong mujoco1.50 tag,"Tag mujoco1.50 points to commit https://github.com/deepmind/dm_control/commit/44f1adde6e55c9be59b2bd921af765ad168c5445, where theses lines shouldn't be there https://github.com/deepmind/dm_control/blob/44f1adde6e55c9be59b2bd921af765ad168c5445/dm_control/mujoco/wrapper/util.py#L62, https://github.com/deepmind/dm_control/blob/44f1adde6e55c9be59b2bd921af765ad168c5445/dm_control/mujoco/wrapper/util.py#L41"
Support Mujoco 2.0 ?,"The recent upgrade of dm_control is really cool especially allowing easier manipulation with Python bindings. Some days ago, Mujoco 2.0 was released and seems like there are quite some changes. Curious to know if there is a roadmap to adapt to Mujoco 2.0 ?"
"GLEW initalization error ,it comes again","I updated dm_control(with viewer...) today.But when I run sample code in Quickstart, the error comes again.

```python
>>> from dm_control import suite
>>> import numpy as np
>>> 
>>> # Load one task:
... env = suite.load(domain_name=""cartpole"", task_name=""swingup"")
>>> 
>>> # Iterate over a task set:
... for domain_name, task_name in suite.BENCHMARKING:
...   env = suite.load(domain_name, task_name)
... 
WARNING: Logging before flag parsing goes to stderr.
F1012 12:47:55.453529 140583399446272 core.py:93] **GLEW initalization error: Missing GL version**
```

However, it works well when I run sample code in ""Interactive environment viewer"".
I've reinstalled old ""dm_control""package，the Quickstart run well(0 error,0 warning). 
I'm so confused why the error comes again.（Write the issue for the first time, please enlighten me.）
(ubantu 16.04)"
Dexterous manipulation environment,"I would very much like to access the dexterous manipulation environment used in the [D4PG paper](https://openreview.net/pdf?id=SyZipzbCb), and was wondering where that environment may be accessed...

Thanks in advance!"
Add tutorials of how to create new environment,It would be very nice to provide a tutorial about how to create a new environment on dm_control e.g. how to use python wrapper to interact with Mujoco API and XML file. 
OpenGL Visualizer,"Hi.

I was working in a visualizer for controlsuite and thought that it might be useful for some others, as I saw it was requested in #12 . The visualizer is located in [here](https://github.com/wpumacay/dm_control/tree/master/dm_control/glviz) (a folder called glviz) and a brief overview can be found in the corresponding [README](https://github.com/wpumacay/dm_control/blob/master/dm_control/glviz/README.md) in that location.

Just send me an email if there is any issue or something related.

Best regards."
Quadruped environment,This is missing so far but would be very useful.
Scale of observation space,Is there a possibility to get the max and min of observations. This would be very helpful in scaling the observations before feeding to the networks. We can add this to `env.observation_spec()` ? Another possibility would be provide `env.observation_samples()` which provide some sample data points so that the user can fit a scaler object.
Position and velocity in cheetah environment,"Why is the position in cheetah is of dim 8 but the velocity is of dim 9? And what do they denote?
Are they 3d position of joints? Documentation of observation for all the environments would be very helpful in general."
Comparison of benchmarking results,"In the [tech report](https://arxiv.org/pdf/1801.00690.pdf), there are two tables that provide benchmark scores for the different environments, provided by a couple of different algorithms. Whilst this is a good starting point for comparing techniques, it would be useful an online system for comparing results. 

A couple of ideas spring to mind:
1. A results table in the wiki section of this repository. Users would list their scores along with a write up and evidence. This would need clear instructions of the conditions in which to evaluate an agent (episode length, episode repeats, limit on training frames/time etc.).
2. An automated system for evaluating agents - submit some code that takes actions in an environment based on the presented observations. This would allow for consistent reporting and comparison of results, but is more complex than the first option."
Roll out time,"After using Open AI gym environments, I notice that wall clock time of a typical roll out is higher in this suite. Does it have to do something with rendering (though I'm not rendering the environment). This makes training time longer. 

Is there anything we should do to avoid rendering in the background and make it faster? Or env._sub_steps = 1 ?

Your inputs are highly appreciated."
Rendering and Saving,"Is there an easy way of rendering and saving the screens as videos like a wrapper in gym environments? 
`env = SomeWrapper(save_loc=""path"")` and `env.render()`


"
Error when importing suite,"I just installed dm_control and mujoco on windows, and I have the key located both in ~/.mujoco as dm_control requires and in mjpro150/bin as mujoco requires. During installation I got no errors or warnings. However, when I try to import dm_control I get the following error; can someone help me?

I verified that MuJoCo works, the simulations run on my computer just fine.

I am using python 3.5 
```
from dm_control import suite

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-b0d6643feb1d> in <module>()
----> 1 from dm_control import suite

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\suite\__init__.py in <module>()
     26 from dm_control.rl import control
     27 
---> 28 from dm_control.suite import acrobot
     29 from dm_control.suite import ball_in_cup
     30 from dm_control.suite import cartpole

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\suite\acrobot.py in <module>()
     24 # Internal dependencies.
     25 
---> 26 from dm_control import mujoco
     27 from dm_control.rl import control
     28 from dm_control.suite import base

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\__init__.py in <module>()
     16 """"""Mujoco implementations of base classes.""""""
     17 
---> 18 from dm_control.mujoco.engine import action_spec
     19 
     20 from dm_control.mujoco.engine import Camera

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\engine.py in <module>()
     41 
     42 from dm_control import render
---> 43 from dm_control.mujoco import index
     44 
     45 from dm_control.mujoco import wrapper

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\index.py in <module>()
     92 # Internal dependencies.
     93 
---> 94 from dm_control.mujoco.wrapper import util
     95 from dm_control.mujoco.wrapper.mjbindings import sizes
     96 import numpy as np

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\wrapper\__init__.py in <module>()
     21 
     22 
---> 23 from dm_control.mujoco.wrapper import mjbindings
     24 
     25 from dm_control.mujoco.wrapper.core import callback_context

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\wrapper\mjbindings\__init__.py in <module>()
     26 from dm_control.mujoco.wrapper.mjbindings import sizes
     27 from dm_control.mujoco.wrapper.mjbindings import types
---> 28 from dm_control.mujoco.wrapper.mjbindings import wrappers
     29 
     30 # pylint: disable=g-import-not-at-top

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\wrapper\mjbindings\wrappers.py in <module>()
     12 # pylint: disable=undefined-variable
     13 # pylint: disable=wildcard-import
---> 14 from dm_control.mujoco.wrapper import util
     15 from dm_control.mujoco.wrapper.mjbindings.types import *
     16 

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\wrapper\util.py in <module>()
     55 
     56 DEFAULT_MJLIB_PATH = os.path.join(
---> 57     ""~/.mujoco/mjpro150/bin"", _get_shared_library_filename())
     58 DEFAULT_MJKEY_PATH = ""~/.mujoco/mjkey.txt""
     59 

C:\Users\Niels\Anaconda3\envs\tf\lib\site-packages\dm_control\mujoco\wrapper\util.py in _get_shared_library_filename()
     45   try:
     46     libc_path = ctypes.util.find_library(""c"")
---> 47     libc_filename = os.path.split(libc_path)[1]
     48     prefix = ""lib"" if libc_filename.startswith(""lib"") else """"
     49     extension = libc_filename.split(""."")[1]

C:\Users\Niels\Anaconda3\envs\tf\lib\ntpath.py in split(p)
    202 
    203     seps = _get_bothseps(p)
--> 204     d, p = splitdrive(p)
    205     # set i to index beyond p's last slash
    206     i = len(p)

C:\Users\Niels\Anaconda3\envs\tf\lib\ntpath.py in splitdrive(p)
    137 
    138     """"""
--> 139     if len(p) >= 2:
    140         if isinstance(p, bytes):
    141             sep = b'\\'

TypeError: object of type 'NoneType' has no len()
```
solution: Don't use windows"
"what does ""mean return"" mean in the tech report?","Hi, 

Does it mean the reward of every episode? Besides, is it normal that ddpg algorithm can only successfully learn how to stand in the humanoid run environment given different seeds? Thanks."
Reward function returning 'Nonetype',"Hi!
I am running the 'swingup' task under the 'acrobot' model. I am randomly sampling a set of action inputs and evaluating the rewards.  For some action inputs, I am getting a reward output of 'Nonetype'. So when I try to add the total reward I get the following exception
 trew+=time_step.reward

TypeError: unsupported operand type(s) for +=: 'float' and 'NoneType

Has anyone else encountered this issue? Is there a way to resolve this?"
Enabling options such as flat_observation for all envs,Cartpole was the only environment that had the option to pass in **kwargs when loading the environment. This pull request adds that option to all the other environments so that optional arguments such as flat_observation may be used.
Returned observations will be mutated when the environment steps.,"```python
from dm_control import suite
import numpy as np

env = suite.load(domain_name=""cartpole"", task_name=""swingup"")
action_spec = env.action_spec()
action = np.random.uniform(action_spec.minimum,
                             action_spec.maximum,
                             size=action_spec.shape)
time_step = env.step(action)
obs = time_step.observation['velocity']
print('obs', obs)
for i in range(10):
    time_step = env.step(action)
print('obs', obs)
print('obs_new', time_step.observation['velocity'])
```
Gives
```bash
obs [-0.00617124  0.00592542]
obs [0.65594909 0.9535503 ]
obs_new [0.65594909 0.9535503 ]
```
So if I obtain observation from the environment, the array will be mutated when the environment steps. I believe that this behavior can cause a lot of trouble for people.  
It would be great if something like `copy(qvel)` can be added instead."
name 'MJVFS' is not defined,"After installing dm_control I'm trying to import the suite but get the NameError `name 'MJVFS' is not defined`.    
The traceback of the error is the following:
```
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-4-d13180c61340> in <module>()
----> 1 from dm_control import suite

~/anaconda3/lib/python3.6/site-packages/dm_control/suite/__init__.py in <module>()
     26 from dm_control.rl import control
     27 
---> 28 from dm_control.suite import acrobot
     29 from dm_control.suite import ball_in_cup
     30 from dm_control.suite import cartpole

~/anaconda3/lib/python3.6/site-packages/dm_control/suite/acrobot.py in <module>()
     24 # Internal dependencies.
     25 
---> 26 from dm_control import mujoco
     27 from dm_control.rl import control
     28 from dm_control.suite import base

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/__init__.py in <module>()
     16 """"""Mujoco implementations of base classes.""""""
     17 
---> 18 from dm_control.mujoco.engine import action_spec
     19 
     20 from dm_control.mujoco.engine import Camera

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/engine.py in <module>()
     41 
     42 from dm_control import render
---> 43 from dm_control.mujoco import index
     44 
     45 from dm_control.mujoco import wrapper

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/index.py in <module>()
     92 # Internal dependencies.
     93 
---> 94 from dm_control.mujoco.wrapper import util
     95 from dm_control.mujoco.wrapper.mjbindings import sizes
     96 import numpy as np

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/__init__.py in <module>()
     23 from dm_control.mujoco.wrapper import mjbindings
     24 
---> 25 from dm_control.mujoco.wrapper.core import callback_context
     26 
     27 from dm_control.mujoco.wrapper.core import Error

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/core.py in <module>()
     32 from dm_control.mujoco.wrapper.mjbindings import constants
     33 from dm_control.mujoco.wrapper.mjbindings import enums
---> 34 from dm_control.mujoco.wrapper.mjbindings import functions
     35 from dm_control.mujoco.wrapper.mjbindings import mjlib
     36 from dm_control.mujoco.wrapper.mjbindings import types

~/anaconda3/lib/python3.6/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py in <module>()
     85   None
     86 """"""
---> 87 mjlib.mj_defaultVFS.argtypes = [ctypes.POINTER(MJVFS)]
     88 mjlib.mj_defaultVFS.restype = None
     89 

NameError: name 'MJVFS' is not defined
```

MJVFS seems to be missing from `dm_control.mujoco.wrapper.mjbindings.types.py`.    

I downloaded mjpro150 which is placed in `~/.mujoco/ ` as  `~/.mujoco/mjpro150`.    
I also have mjpro131 in the same folder (`~/.mujoco/mjpro131`).    

I have a student license in `~/.mujoco/mjkey.txt`    

I get no errors or warnings when installing dm_control.    

mjpro131 works fine with mujoco-py and openai gym.    

Its getting late over here so I might not be able to answer until tomorrow!

Attaching the file `dm_control/mujoco/wrapper/mjbindings/types.py` as a .txt file:
[types.txt](https://github.com/deepmind/dm_control/files/1916553/types.txt)

"
NoneType' object has no attribute 'destroy_window',"Hi 
I use the code in README.md,  After I install mujoco and dm_control， when I run code ,it remind me th efollowing error:

Exception AttributeError: ""'NoneType' object has no attribute 'destroy_window'"" in <bound method GLFWContext.del of <dm_control.render.glfw_renderer.GLFWContext object at 0x7ffba109c110>> ignored

So I have to ask for your help ,"
Tracking cameras?,"Hi,

Each time that I visualize the hooper-hop or walker-walk domains-tasks, for example, I notice that the agents easily escape the area covered by the camera. Although this is not really an issue if you want to learn from state features, it can be a serious issue if you want to learn from pixels. Is this expected?

Somehow gym circumvents this issue by defining a track camera inside the body. But what I see in the dm control xmls is consistent with the technical document, where you highlight the use of camera 0th. And was wondering if you made other adjustments to the xml to ensure you keep track of the ""agent"". 

Thanks, 
 "
Model used to train the agent,"I'm trying to train a custom agent to learn how to swim in one of the environments provided by this repo using deep Q learning. However, I'm not sure how to get around the fact that the action space is continuous and the observation space is a dictionary of arrays, since all the deep Q models I've looked at initialize their `num_actions` and `num_states` variables as follows:

`num_actions = env.action_space.shape[0]
num_states = env.observation_space.shape[0]`

Is there some other way to train this model using `action_spec()` and `observation_spec()`? If so, are there examples that I can look at?

Thanks!"
How many time steps are needed to see the action achieved?,"For example, in the README example with cartpole and swingup, I do not see the action achieved with 10 time steps. Do you have any documentation on how long different tasks take, or at what time step the results in the Youtube video happened? "
"potentially wrong condim in humanoid xml in the branch ""merel_2017_humanoid""","Hi guys,
Thanks so much for sharing the CMU humanoid used in Merel et al 2017 (and making a new branch accordingly).

But I am not sure why you guys set the condim to be 1 in line 11 in dm_control/suite/humanoid_CMU.xml.
According to mojuco's modeling doc, ""
1 | Frictionless contact.
3 | Regular frictional contact, opposing slip in the tangent plane.
4 | Frictional contact, opposing slip in the tangent plane  and rotation around the contact normal. This is useful for modeling soft  contacts (independent of contact penetration).
6 | Frictional contact, opposing slip in the tangent plane,  rotation around the contact normal and rotation around the two axes of  the tangent plane. The latter frictional effects are useful for  preventing objects from indefinite rolling.
""

I believe condim should always be fixed to 3, otherwise you get something like this: 
https://youtu.be/c0qgCsXuLYo

thanks in advance
best regards"
"TypeError: expected str, bytes or os.PathLike object, not NoneType","I tried to install dm_control by pip install git+git://github.com/deepmind/dm_control.git.
However, I can import dm_control successfully, but when I used 'from dm_control import suite', error came.
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\suite\__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\suite\acrobot.py"", line 26, in <module>
    from dm_control import mujoco
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\engine.py"", line 43, in <module>
    from dm_control.mujoco import index
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\index.py"", line 94, in <module>
    from dm_control.mujoco.wrapper import util
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\wrapper\__init__.py"", line 23, in <module>
    from dm_control.mujoco.wrapper import mjbindings
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\wrapper\mjbindings\__init__.py"", line 28, in <module>
    from dm_control.mujoco.wrapper.mjbindings import wrappers
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\wrapper\mjbindings\wrappers.py"", line 14, in <module>
    from dm_control.mujoco.wrapper import util
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\wrapper\util.py"", line 57, in <module>
    ""~/.mujoco/mjpro150/bin"", _get_shared_library_filename())
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\site-packages\dm_control\mujoco\wrapper\util.py"", line 47, in _get_shared_library_filename
    libc_filename = os.path.split(libc_path)[1]
  File ""C:\Users\bzdli\Anaconda3\envs\drl\lib\ntpath.py"", line 204, in split
    p = os.fspath(p)
TypeError: expected str, bytes or os.PathLike object, not NoneType

I's using windows 10 and python 3.6.  Can someone figure this out?"
"the meaning of ""action""","in the following code:

env = suite.load('humanoid', 'run')
spec = env.action_spec()
env.reset()
for _ in range(1000):
    action = np.random.uniform(spec.minimum, spec.maximum, spec.shape)
    env.step(action)
    pixels = env.physics.render()

""action"" is  a ndarray of float64, i want to know, what's the meaning of the numbers in action, it is the joints' position, orientation, velocity, rotation or something else? If i know the ndarray of action, how can i get the state in next time step?

thank in advance"
ImportError: cannot import name 'constants',"When I run this:
```
from dm_control import suite
```
The error occurs:
```
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-2addf36a480e> in <module>()
----> 1 from dm_control import suite

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/suite/__init__.py in <module>()
     26 from dm_control.rl import control
     27 
---> 28 from dm_control.suite import acrobot
     29 from dm_control.suite import ball_in_cup
     30 from dm_control.suite import cartpole

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/suite/acrobot.py in <module>()
     24 # Internal dependencies.
     25 
---> 26 from dm_control import mujoco
     27 from dm_control.rl import control
     28 from dm_control.suite import base

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/mujoco/__init__.py in <module>()
     16 """"""Mujoco implementations of base classes.""""""
     17 
---> 18 from dm_control.mujoco.engine import action_spec
     19 
     20 from dm_control.mujoco.engine import Camera

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/mujoco/engine.py in <module>()
     41 
     42 from dm_control import render
---> 43 from dm_control.mujoco import index
     44 
     45 from dm_control.mujoco import wrapper

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/mujoco/index.py in <module>()
     92 # Internal dependencies.
     93 
---> 94 from dm_control.mujoco.wrapper import util
     95 from dm_control.mujoco.wrapper.mjbindings import sizes
     96 import numpy as np

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/mujoco/wrapper/__init__.py in <module>()
     21 
     22 
---> 23 from dm_control.mujoco.wrapper import mjbindings
     24 
     25 from dm_control.mujoco.wrapper.core import callback_context

~/ai-ink/Jupyter-zhouxin12/github/dm_control/dm_control/mujoco/wrapper/mjbindings/__init__.py in <module>()
     22 from absl import logging
     23 
---> 24 from dm_control.mujoco.wrapper.mjbindings import constants
     25 from dm_control.mujoco.wrapper.mjbindings import enums
     26 from dm_control.mujoco.wrapper.mjbindings import sizes

ImportError: cannot import name 'constants'
```"
Segmentation fault when importing dm_control before TensorFlow,"Importing TensorFlow and then dm_control works:

```sh
$ python3 -Xfaulthandler -c 'import tensorflow; from dm_control import suite; print(""Done"")'
Done
```

Importing dm_control and then TensorFlow (the alphabetical order) results in a segfault:

```sh
$ python3 -Xfaulthandler -c 'from dm_control import suite; import tensorflow; print(""Done"")'                                                                              
Fatal Python error: Segmentation fault

Current thread 0x00007f0b6fa72700 (most recent call first):
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap_external>"", line 914 in create_module
  File ""<frozen importlib._bootstrap>"", line 577 in module_from_spec
  File ""<frozen importlib._bootstrap>"", line 666 in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 693 in _load
  File ""/usr/lib/python3.5/imp.py"", line 342 in load_dynamic
  File ""/usr/lib/python3.5/imp.py"", line 242 in load_module
  File ""/usr/local/lib/python3.5/dist-packages/tensorflow/python/pywrap_tensorflow_internal.py"", line 24 in swig_import_helper
  File ""/usr/local/lib/python3.5/dist-packages/tensorflow/python/pywrap_tensorflow_internal.py"", line 28 in <module>
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap_external>"", line 673 in exec_module
  File ""<frozen importlib._bootstrap>"", line 673 in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 958 in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 969 in _find_and_load
  File ""/usr/local/lib/python3.5/dist-packages/tensorflow/python/pywrap_tensorflow.py"", line 58 in <module>
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap_external>"", line 673 in exec_module
  File ""<frozen importlib._bootstrap>"", line 673 in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 958 in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 969 in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 1016 in _handle_fromlist
  File ""/usr/local/lib/python3.5/dist-packages/tensorflow/python/__init__.py"", line 49 in <module>
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap_external>"", line 673 in exec_module
  File ""<frozen importlib._bootstrap>"", line 673 in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 958 in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 969 in _find_and_load
  File ""/usr/local/lib/python3.5/dist-packages/tensorflow/__init__.py"", line 24 in <module>
  File ""<frozen importlib._bootstrap>"", line 222 in _call_with_frames_removed
  File ""<frozen importlib._bootstrap_external>"", line 673 in exec_module
  File ""<frozen importlib._bootstrap>"", line 673 in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 958 in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 969 in _find_and_load
  File ""<string>"", line 1 in <module>
zsh: segmentation fault  python3 -Xfaulthandler -c
```

I've replicated this on my Debian 9 machine (Google workstation) with Python versions 2.7, 3.5, 3.6 and TensorFlow versions 1.4.1 and 1.5.0 with GPU support. I'm using the current master branch of the repository."
Reacher observation contains constant element,"```python
import numpy as np
from dm_control import suite

env = suite.load('reacher', 'easy')
action_spec = env.action_spec()
time_step = env.reset()
while not time_step.last():
  print(time_step.observation['to_target'][2])  # Always 0; possibly z coordinate?
  action = np.random.uniform(action_spec.minimum, action_spec.maximum, action_spec.shape)
  time_step = env.step(action)
```"
How reacher environment calculates reward,"Hi, 

I wonder how the reacher environment computes the rewards.
I have found the following codes in `reacher.py`
```
def get_reward(self, physics):
    radii = physics.named.model.geom_size[['target', 'finger'], 0].sum()
    return rewards.tolerance(physics.finger_to_target_dist(), (0, radii))
```
So essentially it is the distance between the target and the finger. 
But when I was running a piece of sample codes.
```
    env = suite.load(domain_name='reacher', task_name='hard')
    action_spec = env.action_spec()
    time_step = env.reset()
    while not time_step.last():
        action = np.random.uniform(action_spec.minimum,
                                   action_spec.maximum,
                                   size=action_spec.shape)
        time_step = env.step(action)
        print(time_step.reward)
```


Thanks in advance!"
Getting `glfw.GLFWError`,"When loading any task, I'm consistently getting 
```
glfw.GLFWError: (65543) b'GLX: Failed to create context: BadValue (integer parameter out of range for operation)'
Exception ignored in: <bound method Renderer.__del__ of <dm_control.render.glfw_renderer.GLFWRenderer object at 0x7f77ae4e8e48>>
Traceback (most recent call last):
  File ""/home/anaconda3/lib/python3.6/site-packages/dm_control/render/base.py"", line 110, in __del__
  File ""/home/anaconda3/lib/python3.6/site-packages/dm_control/render/glfw_renderer.py"", line 64, in free_context
AttributeError: 'GLFWRenderer' object has no attribute '_context'
```

My OS is Ubuntu 16.04, python 3.6. I installed `libglfw` from source as suggested by other users. I also installed `libglew1.13` because `libglew2.0` doesn't exist in apt-get on Ubuntu 16.04"
No OpenGL rendering backend,"I am having the following trouble even though the requirement for installing `dm_control` is met.
```
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/suite/__init__.py"", line 110, in load
    visualize_reward)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/suite/__init__.py"", line 140, in build_environment
    env = domain.SUITE[task_name](**task_kwargs)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/suite/cartpole.py"", line 66, in swingup
    physics = Physics.from_xml_string(*get_model_and_assets())
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 344, in from_xml_string
    return cls.from_model(model)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 327, in from_model
    return cls(data)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 120, in __init__
    self._reload_from_data(data)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 306, in _reload_from_data
    render_context = render.Renderer(_MAX_WIDTH, _MAX_HEIGHT)
  File ""/ais/gobi5/movie4d/conda_install/anaconda2/lib/python2.7/site-packages/dm_control/render/__init__.py"", line 51, in Renderer
    raise ImportError('No OpenGL rendering backend could be imported.')
ImportError: No OpenGL rendering backend could be imported.
```"
ctypes constants.py not generated,"Here is what I did when trying to install the package.
```
git clone <the github link>
# Change the DEFAULT_HEADERS_DIR in setup.py to my local include file (There isn't such option as headers-dir. I would be grateful if someone can point it to me how to use it)
# Set environment variables to MJKEY_PATH=<local path>/mjkey.txt
# Set environment variables to MJLIB_PATH=<local path>/bin
# I verified using echo command and it shows accordingly.
pip install .
```
Then when I try to run the tester code. I encounter the following error.
```
>>> from dm_control import suite
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""dm_control/suite/acrobot.py"", line 26, in <module>
    from dm_control import mujoco
  File ""dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""dm_control/mujoco/engine.py"", line 43, in <module>
    from dm_control.mujoco import index
  File ""dm_control/mujoco/index.py"", line 94, in <module>
    from dm_control.mujoco.wrapper import util
  File ""dm_control/mujoco/wrapper/__init__.py"", line 23, in <module>
    from dm_control.mujoco.wrapper import mjbindings
  File ""dm_control/mujoco/wrapper/mjbindings/__init__.py"", line 24, in <module>
    from dm_control.mujoco.wrapper.mjbindings import constants
ImportError: cannot import name constants
```
I saw somewhere that it means that the mjbindings is not generated. But I use `pip install .` instead of `pip install -e`, so that shouldn't be the issue. 
Can someone please help me here?"
Add initial gitignore,Add initial gitignore to omit the .pyc files
Fix TypeError in mocap_demo.py,"mocap_demo fails with a TypeError:

        ""TypeError: 'float' object cannot be interpreted as an index""

because np.max() operates over arrays, not the argument list.

This CL encloses the arguments to np.max() in an array, fixing the
error."
SegFault on loading an environment,"'''
>>> from dm_control import suite
>>> env = suite.load(domain_name='cartpole', task_name='swingup')
Segmentation fault (core dumped)
'''

I can import a suite but cannot load a testing environment."
Update README.md,The quickstart snipped assumes numpy as already been imported. This CL adds an import to allow the quickstart snippet to work out-of-the-box as a copy/paste demo.
Pixel wrapper not copied. Missing __init__.py?,"I installed dm_control like suggested via pip. Unfortunately the dm_control/suite/wrappers folder was not copied by the setup. I guess the init file is missing.
  "
Batched environments?,"Has there been any plans to support batched environments, where the environment runs parallel simulations or is the idea to just let the user manage manage a set of environments?"
How to test/run OpenGL visualization?,"Hi,

I installed dm_control yesterday on an Ubuntu 16.04LTS system with NVIDIA graphics card. I have already installed --and work with-- mjpro150 and 131 (both mujoco-py and custom C++ interface) so I know those work fine. 

I created the following ""quickstart"" script, using the provided one in the README:
```python
import numpy as np
from dm_control import suite
# Load one task:
env = suite.load(domain_name=""humanoid"", task_name=""stand"", visualize_reward=True)
# Iterate over a task set:
for domain_name, task_name in suite.BENCHMARKING:
    env = suite.load(domain_name, task_name)
# Reset data
action_spec = env.action_spec()
time_step = env.reset()
# Step through an episode and print out reward, discount and observation.
while not time_step.last():
    action = np.random.uniform(action_spec.minimum,
                             action_spec.maximum,
                             size=action_spec.shape)
    time_step = env.step(action)
    pixels = env.physics.render()
    print(time_step.reward, time_step.discount, time_step.observation)
```

It ""seems"" to run since the print() call in the loop does indeed output such as:

```bash
0.9902381173079999 1.0 OrderedDict([('orientations', array([ 0.92190494, -0.38741616,  0.75086908, -0.66045108,  0.34782824,
        0.93755827,  0.01050299,  0.99994484, -0.34440243, -0.93882211,
       -0.02782136, -0.99961291,  0.52972116, -0.84817185])), ('height', 1.2930647420729058), ('velocity', array([ -0.49068857,   0.54707421,   2.52160751,   4.02860209,
        -1.37774209,  -4.43418408,   9.91898924, -14.24762728,
         0.23987449]))])
```

However, the MuJoCo OpenGL visualization never starts.

To get set-up, I created a virtualenv environment from scratch with python 3.5.2 as default (via PyCharm).

Also, I have to report that there is no Ubuntu package for libglew2.0 via apt-get on 16.04LTS. I had to download it from [here](https://launchpad.net/ubuntu/zesty/amd64/libglew2.0/2.0.0-3) and I not sure if this was the proper solution. I would appreciate it if someone who got it to work on Ubuntu 16.04 can report their steps.

Cheers,

Vassilios 
  "
new domain with STL mesh,"how to create a new domain with STL mesh file?
when i tried to add mesh file to the domain xml file, Segmentation fault (core dumped) will come out.
while removing the asset it is normal."
Load shared library properly on windows.,"On windows, the libc doesn't exists and the shared library of mujoco has
the no prefix and has the extension `dll`."
new domain with mesh file result segmentation fault,invalid
Version of MuJoCo Pro,"Can I use Mujoco v1.31 as physics engine?

I am using rllab (https://github.com/rll/rllab) framework to implement my algorithm. It requires Mujoco v1.31 but dm_control uses Mujoco v1.50. "
Extending mjbindings with custom mj extensions?,"Has anyone at DM tried extending mjbindings with their own MuJoCo extensions, since this seems like a very natural place to put them? I tried to add my own header file to the list of headers that setup.py scans from ~/.mujoco/mjpro150/includes. The header contains:

```
#pragma once

// this is a C-API
#if defined(__cplusplus)
extern ""C"" {
#endif

#include ""mujoco.h""

// Test extension.
MJAPI void my_mj_test(const mjModel* m);

#if defined(__cplusplus)
}
#endif

```
 Now I get the following error as expected:
```
>>> from dm_control.mujoco.wrapper.mjbindings import functions
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/engine.py"", line 43, in <module>
    from dm_control.mujoco import index
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/index.py"", line 94, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 23, in <module>
    from dm_control.mujoco.wrapper import mjbindings
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/wrapper/mjbindings/__init__.py"", line 32, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 33, in <module>
    """"""
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/ctypes/__init__.py"", line 361, in __getattr__
    func = self.__getitem__(name)
  File ""/home/efagerho/anaconda3/envs/mjtest/lib/python3.6/ctypes/__init__.py"", line 366, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: /home/efagerho/.mujoco/mjpro150/bin/libmujoco150.so: undefined symbol: my_mj_test
```

I was wondering what would be the easiest way to make the wrapper load my custom shared object if I dump that in the same directory as libmujoco150.so?
  
  "
"import MuJoCo, ImportError: cannot import name 'constants'","Dear all:
   when I import MuJoCo, some error happen:
```
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-7bf9adbdec98> in <module>()
----> 1 import dm_control.mujoco

/Users/codeMan/Documents/py-lab/dm_control/dm_control/mujoco/__init__.py in <module>()
     16 """"""Mujoco implementations of base classes.""""""
     17
---> 18 from dm_control.mujoco.engine import action_spec
     19
     20 from dm_control.mujoco.engine import Camera

/Users/codeMan/Documents/py-lab/dm_control/dm_control/mujoco/engine.py in <module>()
     41
     42 from dm_control import render
---> 43 from dm_control.mujoco import index
     44
     45 from dm_control.mujoco import wrapper

/Users/codeMan/Documents/py-lab/dm_control/dm_control/mujoco/index.py in <module>()
     92 # Internal dependencies.
     93
---> 94 from dm_control.mujoco.wrapper import util
     95 from dm_control.mujoco.wrapper.mjbindings import sizes
     96 import numpy as np

/Users/codeMan/Documents/py-lab/dm_control/dm_control/mujoco/wrapper/__init__.py in <module>()
     21
     22
---> 23 from dm_control.mujoco.wrapper import mjbindings
     24
     25 from dm_control.mujoco.wrapper.core import callback_context

/Users/codeMan/Documents/py-lab/dm_control/dm_control/mujoco/wrapper/mjbindings/__init__.py in <module>()
     22 from absl import logging
     23
---> 24 from dm_control.mujoco.wrapper.mjbindings import constants
     25 from dm_control.mujoco.wrapper.mjbindings import enums
     26 from dm_control.mujoco.wrapper.mjbindings import sizes

ImportError: cannot import name 'constants'
```
My python version is Python 3.5.3, and I use macOs sierra 10.12.6"
Load task failed,"Thanks for sharing this great work to us!

I was able to successfully import suite by running `from dm_control import suite` but  when I run 

`env = suite.load(domain_name=""pendulum"", task_name=""swingup"")`

I got

```
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/suite/__init__.py"", line 110, in load
    visualize_reward)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/suite/__init__.py"", line 140, in build_environment
    env = domain.SUITE[task_name](**task_kwargs)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/suite/pendulum.py"", line 50, in swingup
    physics = Physics.from_xml_string(*get_model_and_assets())
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 344, in from_xml_string
    return cls.from_model(model)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 327, in from_model
    return cls(data)
  File ""/home/luoqi06/.local/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 120, in __init__
    self._reload_from_data(data)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/mujoco/engine.py"", line 306, in _reload_from_data
    render_context = render.Renderer(_MAX_WIDTH, _MAX_HEIGHT)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/render/base.py"", line 44, in __init__
    self._create(max_width, max_height)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/dm_control/render/glfw_renderer.py"", line 44, in _create
    glfw.window_hint(glfw.DOUBLEBUFFER, 0)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/glfw.py"", line 978, in window_hint
    _glfw.glfwWindowHint(target, hint)
  File ""/home/xxxx/.local/lib/python2.7/site-packages/glfw.py"", line 617, in errcheck
    _reraise(exc[1], exc[2])
  File ""/home/xxxx/.local/lib/python2.7/site-packages/glfw.py"", line 39, in _reraise
    raise (exception, None, traceback)
glfw.GLFWError: (65539) Invalid argument for enum parameter

```
  
  "
How to render?,There is a `render` module but I don't know how to use it. Could you please provide some examples of how to render?
"Got ""undefined symbol"" When Importing suite","Hi, there!

I followed the installation instructions and installed the package successfully. But when I did `from dm_control import suite`, I got an error like this:
```python
>>> from dm_control import suite
WARNING: Logging before flag parsing goes to stderr.
W0103 17:33:16.675210 140177339770624 __init__.py:35] mjbindings failed to import mjlib and other functions. libmujoco.so may not be accessible.
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/suite/__init__.py"", line 28, in <module>
    from dm_control.suite import acrobot
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/suite/acrobot.py"", line 26, in <module>
    from dm_control import mujoco
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/__init__.py"", line 18, in <module>
    from dm_control.mujoco.engine import action_spec
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/engine.py"", line 43, in <module>
    from dm_control.mujoco import index
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/index.py"", line 94, in <module>
    from dm_control.mujoco.wrapper import util
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/wrapper/__init__.py"", line 25, in <module>
    from dm_control.mujoco.wrapper.core import callback_context
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/wrapper/core.py"", line 34, in <module>
    from dm_control.mujoco.wrapper.mjbindings import functions
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/wrapper/mjbindings/functions.py"", line 22, in <module>
    mjlib = util.get_mjlib()
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/site-packages/dm_control/mujoco/wrapper/util.py"", line 96, in get_mjlib
    return ctypes.cdll.LoadLibrary(_get_full_path(raw_path))
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/ctypes/__init__.py"", line 429, in LoadLibrary
    return self._dlltype(name)
  File ""/home/zeyu/anaconda3/envs/mujoco/lib/python3.5/ctypes/__init__.py"", line 351, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: /home/zeyu/.mujoco/mjpro150/bin/libmujoco150.so: undefined symbol: __glewBlitFramebuffer
```
I tried to test Mujoco independently by runing `$HOME/.mujoco/mjpro150/bin/simulate` and it worked well.
My OS is Ubuntu 16.04 and I am using Python 3.5.4.
Can anyone help me with this?

Thanks a lot!"
Segmentation Fault on checking mujoco licences,"Hi all, thanks for open-sourcing such a great toolkit!
I would like to share and report a bug or issue in which segmentation fault occurs, which might also be happening for others.

```python
>>> from dm_control import suite
>>> env = suite.load(domain_name=""cartpole"", task_name=""swingup"")
[1]    28081 segmentation fault (core dumped)  python
```

I found that it happens during verifying the mujoco license, say when we call `_maybe_register_license()` (and `mjlib.mj_activate`).

stacktrace on gdb:

```
#0  0x0000000000017946 in ?? ()
#1  0x00007ffff0a84fff in mjl_check () from $HOME/.mujoco/mjpro150/bin/libmujoco150.so
#2  0x00007ffff0a4c013 in mjl_activate () from $HOME/.mujoco/mjpro150/bin/libmujoco150.so
#3  0x00007ffff0a30e4d in mj_activate () from $HOME/mujoco/mjpro150/bin/libmujoco150.so
...
```

So the segfault happens when `mj_activate` from `libmujoco150.so` is invoked. I think it might be a problem of mujoco, not of this package; but maybe something can be wrong with auto-wrapping via ctypes. Plus, the test (`python setup.py test`) also fails with the same segmentation fault.

It happened on a linux 64bit machine (Ubuntu 14.04), with python 3.6 (anaconda) and 2.7.

I verified that `mjkey.txt` exists and the liecense worked well with mujoco C++ samples and OpenAI's `mujoco-py`. 
  
  "
Define xrange() for Python 3,xrange() was removed from Python 3 in favor of range().
example_search_EN_literature.py gets killed during indexing,"When I try to run the holmes extractor using this example, it reaches the end of all the parsing, spawns a lot of (?) worker threads during indexing, and then the program gets killed, presumably because it exceeded system resources.

What's going on, and how to fix?"
PLEASE ADDRESS ANY NEW ISSUES TO https://github.com/explosion/holmes-extractor,
verb taxonomies,"I am using holmes extractor with ontology-based matching and it is working fine for taxonomies of nouns (or instances of these), even for compund nouns.
The same is not working for verbs: if we have a verb like 'move' and a subclass of it like 'walk' in the ontology, then 'walk' is not recognized (if 'move' is used in the search phrase), only synonyms (owl:equivalentClass) are working.
So my questions are: 

- is this the correct function or am I doing something wrong?

- and if the function is missing, are there plans to extend the taxonomy support also for verbs?

Thank you in advance."
Ubuntu Installation problem,"Trying to install this in Ubuntu 22.04, I get these types of errors. Any suggestions on how to fix this? 
`error: command '/usr/bin/x86_64-linux-gnu-gcc' failed with exit code 1
            [end of output]
      
        note: This error originates from a subprocess, and is likely not a problem with pip.
        ERROR: Failed building wheel for blis
        Running setup.py clean for blis
      Failed to build thinc preshed blis
      Installing collected packages: wrapt, wasabi, srsly, plac, murmurhash, cymem, wheel, tqdm, six, setuptools, preshed, numpy, Cython, thinc_gpu_ops, blis, thinc
        Running setup.py install for preshed: started
        Running setup.py install for preshed: finished with status 'error'
        error: subprocess-exited-with-error
      
        × Running setup.py install for preshed did not run successfully.
        │ exit code: 1
        ╰─> [14 lines of output]
            /home/sdspieg/.env/lib/python3.10/site-packages/setuptools/installer.py:27: SetuptoolsDeprecationWarning: setuptools.installer is deprecated. Requirements should be satisfied by a PEP 517 installer.
              warnings.warn(
            running install
            /home/sdspieg/.env/lib/python3.10/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.
              warnings.warn(
            running build
            running build_py
            running build_ext
            building 'preshed.maps' extension
            x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -g -fwrapv -O2 -fPIC -I/usr/include/python3.10 -I/home/sdspieg/.env/include -I/usr/include/python3.10 -c preshed/maps.cpp -o build/temp.linux-x86_64-cpython-310/preshed/maps.o -O3 -Wno-strict-prototypes -Wno-unused-function
            cc1plus: warning: command-line option ‘-Wno-strict-prototypes’ is valid for C/ObjC but not for C++
            cc1plus: fatal error: preshed/maps.cpp: No such file or directory
            compilation terminated.
            error: command '/usr/bin/x86_64-linux-gnu-gcc' failed with exit code 1
            [end of output]
      
        note: This error originates from a subprocess, and is likely not a problem with pip.
      error: legacy-install-failure
      
      × Encountered error while trying to install package.
      ╰─> preshed
      
      note: This is an issue with the package mentioned above, not pip.
      hint: See above for output from the failure.
      [end of output]
  
`"
Error: number_of_workers ,"I am executing example codes from the git page. But I get a type error. 

`holmes_manager = holmes.Manager(model='de_core_news_lg', number_of_workers=1)`

_TypeError: __init__() got an unexpected keyword argument 'number_of_workers'_

If the parameter is removed, I get OSError.

_OSError: [E050] Can't find model 'de_core_news_lg'. It doesn't seem to be a shortcut link, a Python package or a valid path to a data directory._

Am I following it correctly? Has anyone faced similar issues?


"
Language support for Spanish?,"Any plans to add Spanish as a language, or any ideas how I could get this to work for spanish?"
Merge v3.0.0 into master,
word_match.type=='entity',"Hi! Good morning from Singapore! 

Could u kindly give examples from how you'd use the word_match.type=='entity' / 'derivation'? "
[Question] Further references?,"@richardpaulhudson thanks for this precious contribution to the open source community, not only the library itself but the documentation and NLP insights are awesome. I was wondering if you would have any scientific literature suggestion about the following topics:
- searching over large corpora similar to what you do in the holmes demo https://holmes-demo.xt.msg.team/
- using a similar nlp-processing logic to build knowledge graphs from unstructured text

Many thanks again!"
Version 2.2.0,
Chatbot mode register_search_phrase has to be a full sentence?,"Hi, @richardpaulhudson 
I have tested this tool with code
```python
import holmes_extractor as holmes
holmes_manager = holmes.Manager(model='en_core_web_lg')
holmes_manager.register_search_phrase('be all ear')
holmes_manager.start_chatbot_mode_console()
```
I am trying to do ""phrase"" search, and found out that, once the sentence contains a ""be"" verb, this will lead to detection of ""be all ear"".
I suppose this search phrase should be a full sentence, a phrase like stuff is not supported when you saying Ungrammatical expressions.  (Cause I found it a little bit misleading of search phrase and search ""phrase"")"
convert readme to asciidoc to create automatic toc ,"I saw that the original README.md maintained manual section numbers and a manual table of contents. 

The format AsciiDoc and its implementation Asciidoctor https://asciidoctor.org/ support table of contents and section numbering out of the box. It is also supported by GitHub for preview. 

I've taken the liberty to convert the file to AsciiDoc and did a short proof-read. If you find something missing, please let me know.

I hope this will make it easier to maintain."
[Snyk] Security upgrade requests from 2.28.1 to 2.31.0,"<p>This PR was automatically created by Snyk using the credentials of a real user.</p><br /><h3>Snyk has created this PR to fix one or more vulnerable packages in the `pip` dependencies of this project.</h3>



#### Changes included in this PR

- Changes to the following files to upgrade the vulnerable dependencies to a fixed version:
    - requirements.txt


<details>
<summary>⚠️ <b>Warning</b></summary>

```
matplotlib 3.5.2 requires numpy, which is not installed.
imageio 2.21.0 requires numpy, which is not installed.
flake8 5.0.4 has requirement importlib-metadata<4.3,>=1.1.0; python_version < ""3.8"", but you have importlib-metadata 4.12.0.

```
</details>


#### Vulnerabilities that will be fixed





##### By pinning:
Severity                   | Priority Score (*)                   | Issue                   | Upgrade                   | Breaking Change                   | Exploit Maturity
:-------------------------:|-------------------------|:-------------------------|:-------------------------|:-------------------------|:-------------------------
![medium severity](https://res.cloudinary.com/snyk/image/upload/w_20,h_20/v1561977819/icon/m.png ""medium severity"")  |  **591/1000**  <br/> **Why?** Recently disclosed, Has a fix available, CVSS 6.1  | Information Exposure <br/>[SNYK-PYTHON-REQUESTS-5595532](https://snyk.io/vuln/SNYK-PYTHON-REQUESTS-5595532) |  `requests:` <br> `2.28.1 -> 2.31.0` <br>  |  No  | No Known Exploit 

(*) Note that the real score may have changed since the PR was raised.




Some vulnerabilities couldn't be fully fixed and so Snyk will still find them when the project is tested again. This may be because the vulnerability existed within more than one direct dependency, but not all of the affected dependencies could be upgraded.


Check the changes in this PR to ensure they won't cause issues with your project.



------------



**Note:** *You are seeing this because you or someone else with access to this repository has authorized Snyk to open fix PRs.*

For more information:  <img src=""https://api.segment.io/v1/pixel/track?data=eyJ3cml0ZUtleSI6InJyWmxZcEdHY2RyTHZsb0lYd0dUcVg4WkFRTnNCOUEwIiwiYW5vbnltb3VzSWQiOiIxMjM2MzI5Ny1iODlmLTRmMDMtYWVlYi00ZmMwY2VmN2RjOGQiLCJldmVudCI6IlBSIHZpZXdlZCIsInByb3BlcnRpZXMiOnsicHJJZCI6IjEyMzYzMjk3LWI4OWYtNGYwMy1hZWViLTRmYzBjZWY3ZGM4ZCJ9fQ=="" width=""0"" height=""0""/>
🧐 [View latest project report](https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr)

🛠 [Adjust project settings](https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr/settings)

📚 [Read more about Snyk's upgrade and patch logic](https://support.snyk.io/hc/en-us/articles/360003891078-Snyk-patches-to-fix-vulnerabilities)

[//]: # (snyk:metadata:{""prId"":""12363297-b89f-4f03-aeeb-4fc0cef7dc8d"",""prPublicId"":""12363297-b89f-4f03-aeeb-4fc0cef7dc8d"",""dependencies"":[{""name"":""requests"",""from"":""2.28.1"",""to"":""2.31.0""}],""packageManager"":""pip"",""projectPublicId"":""d0ba754f-302e-4629-a5ce-b3df67aaad4a"",""projectUrl"":""https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source=github&utm_medium=referral&page=fix-pr"",""type"":""auto"",""patch"":[],""vulns"":[""SNYK-PYTHON-REQUESTS-5595532""],""upgrade"":[],""isBreakingChange"":false,""env"":""prod"",""prType"":""fix"",""templateVariants"":[""updated-fix-title"",""pr-warning-shown"",""priorityScore""],""priorityScoreList"":[591],""remediationStrategy"":""vuln""})

---

**Learn how to fix vulnerabilities with free interactive lessons:**

 🦉 [Learn about vulnerability in an interactive lesson of Snyk Learn.](https://learn.snyk.io/?loc&#x3D;fix-pr)
"
Evaluating operations outside the `with` block in Jupyter Notebook grows the `graph.operations` dict,"This seem like a bug, and probably related to fact that I am running this in a `jupyter` notebook. Given this example:

```python
import pythonflow as pf

with pf.Graph() as graph:
    a = pf.constant(4, name='a')
    b = pf.constant(38, name='b')
    x = (a + b).set_name('x')
```

looking at the `graph.operations` looks fine initially:

```
{'a': <pf.func_op 'a' target=<function identity at 0x106500310> args=<1 items> kwargs=<0 items>>,
 'b': <pf.func_op 'b' target=<function identity at 0x106500310> args=<1 items> kwargs=<0 items>>,
 'x': <pf.func_op 'x' target=<built-in function add> args=<2 items> kwargs=<0 items>>}
```

However, if I evaluate any of the `Operation` instances in the notebook cell (e.g. `a` or `b` at the end of the cell) the dictionary with `graph.operations` grows with additional items (and continues growing by a dozen new `getattr` operations every time I evaluate any of the operations)

Here a screenshot that is self-explaining:

![image](https://github.com/spotify/pythonflow/assets/15058994/9ddd2bf4-d19b-4c2e-911b-1bf3122dde06)

Is there a way to prevent this behavior?"
[Snyk] Security upgrade pillow from 9.2.0 to 9.4.0,"<h3>Snyk has created this PR to fix one or more vulnerable packages in the `pip` dependencies of this project.</h3>



#### Changes included in this PR

- Changes to the following files to upgrade the vulnerable dependencies to a fixed version:
    - requirements.txt


<details>
<summary>⚠️ <b>Warning</b></summary>

```
matplotlib 3.5.2 requires numpy, which is not installed.
imageio 2.21.0 requires numpy, which is not installed.
flake8 5.0.4 has requirement importlib-metadata<4.3,>=1.1.0; python_version < ""3.8"", but you have importlib-metadata 4.12.0.

```
</details>


#### Vulnerabilities that will be fixed





##### By pinning:
Severity                   | Priority Score (*)                   | Issue                   | Upgrade                   | Breaking Change                   | Exploit Maturity
:-------------------------:|-------------------------|:-------------------------|:-------------------------|:-------------------------|:-------------------------
![medium severity](https://res.cloudinary.com/snyk/image/upload/w_20,h_20/v1561977819/icon/m.png ""medium severity"")  |  **561/1000**  <br/> **Why?** Recently disclosed, Has a fix available, CVSS 5.5  | Denial of Service (DoS) <br/>[SNYK-PYTHON-PILLOW-5489784](https://snyk.io/vuln/SNYK-PYTHON-PILLOW-5489784) |  `pillow:` <br> `9.2.0 -> 9.4.0` <br>  |  No  | No Known Exploit 

(*) Note that the real score may have changed since the PR was raised.




Some vulnerabilities couldn't be fully fixed and so Snyk will still find them when the project is tested again. This may be because the vulnerability existed within more than one direct dependency, but not all of the affected dependencies could be upgraded.


Check the changes in this PR to ensure they won't cause issues with your project.



------------



**Note:** *You are seeing this because you or someone else with access to this repository has authorized Snyk to open fix PRs.*

For more information:  <img src=""https://api.segment.io/v1/pixel/track?data=eyJ3cml0ZUtleSI6InJyWmxZcEdHY2RyTHZsb0lYd0dUcVg4WkFRTnNCOUEwIiwiYW5vbnltb3VzSWQiOiI0NTM4ZDRjMy1mZjM5LTRmNGYtOGM5Ni1jODg2YWY3ZTJiMjgiLCJldmVudCI6IlBSIHZpZXdlZCIsInByb3BlcnRpZXMiOnsicHJJZCI6IjQ1MzhkNGMzLWZmMzktNGY0Zi04Yzk2LWM4ODZhZjdlMmIyOCJ9fQ=="" width=""0"" height=""0""/>
🧐 [View latest project report](https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr)

🛠 [Adjust project settings](https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr/settings)

📚 [Read more about Snyk's upgrade and patch logic](https://support.snyk.io/hc/en-us/articles/360003891078-Snyk-patches-to-fix-vulnerabilities)

[//]: # (snyk:metadata:{""prId"":""4538d4c3-ff39-4f4f-8c96-c886af7e2b28"",""prPublicId"":""4538d4c3-ff39-4f4f-8c96-c886af7e2b28"",""dependencies"":[{""name"":""pillow"",""from"":""9.2.0"",""to"":""9.4.0""}],""packageManager"":""pip"",""projectPublicId"":""d0ba754f-302e-4629-a5ce-b3df67aaad4a"",""projectUrl"":""https://app.snyk.io/org/spotify-foss/project/d0ba754f-302e-4629-a5ce-b3df67aaad4a?utm_source=github&utm_medium=referral&page=fix-pr"",""type"":""auto"",""patch"":[],""vulns"":[""SNYK-PYTHON-PILLOW-5489784""],""upgrade"":[],""isBreakingChange"":false,""env"":""prod"",""prType"":""fix"",""templateVariants"":[""updated-fix-title"",""pr-warning-shown"",""priorityScore""],""priorityScoreList"":[561],""remediationStrategy"":""vuln""})

---

**Learn how to fix vulnerabilities with free interactive lessons:**

 🦉 [Denial of Service (DoS)](https://learn.snyk.io/lessons/redos/javascript/?loc&#x3D;fix-pr)
"
Nondeterministic string hashing in Python(>3.3),"I was running into some weird issues with incorrect caching to file a function applied to a string.

This is because python(>3.3) salts its hashing function. (for strings at least)
Specifically:
```
> python -c ""print(hash('asdf'))""
-8690208562067163084
> python -c ""print(hash('asdf'))""
-4220296486527231708
```

The fix for this is to pass in `PYTHONHASHSEED=1`.
The 'proper' fix would be to substitute the internal hash function for something more suitable, however I couldn't immediately see the right place to inject that.

> PYTHONHASHSEED=1 python -c ""print(hash('asdf'))""
-5132432945605986887
> PYTHONHASHSEED=1 python -c ""print(hash('asdf'))""
-5132432945605986887"
Add python 3.10 tests.,
Update dependencies and use GitHub Actions for tests.,
updated collections imports to comply with 3.10,a small patch to make it work with python 3.10+
Project inactive - any reason? ,"Hi - looks like this project isn't active any longer (even though it accumulated 215 stars in short order ;-) ).

Any reason why?   The ideas behind it look quite powerful.

Best,
Michael"
update: adjust to satisfy deprication,"Python 3.9 will be breaking collections
according to pytest's warnings summary"
Clarify inplace modification of context (fixes #43).,Cf. #43.
Bump pillow from 5.4.1 to 6.2.0,"Bumps [pillow](https://github.com/python-pillow/Pillow) from 5.4.1 to 6.2.0.
<details>
<summary>Release notes</summary>

*Sourced from [pillow's releases](https://github.com/python-pillow/Pillow/releases).*

> ## 6.2.0
> https://pillow.readthedocs.io/en/stable/releasenotes/6.2.0.html
> 
> ## 6.1.0
> https://pillow.readthedocs.io/en/stable/releasenotes/6.1.0.html
> 
> ## 6.0.0
> No release notes provided.
</details>
<details>
<summary>Changelog</summary>

*Sourced from [pillow's changelog](https://github.com/python-pillow/Pillow/blob/master/CHANGES.rst).*

> 6.2.0 (2019-10-01)
> ------------------
> 
> - Catch buffer overruns [#4104](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4104)
>   [radarhere]
> 
> - Initialize rows_per_strip when RowsPerStrip tag is missing [#4034](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4034)
>   [cgohlke, radarhere]
> 
> - Raise error if TIFF dimension is a string [#4103](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4103)
>   [radarhere]
> 
> - Added decompression bomb checks [#4102](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4102)
>   [radarhere]
> 
> - Fix ImageGrab.grab DPI scaling on Windows 10 version 1607+ [#4000](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4000)
>   [nulano, radarhere]
> 
> - Corrected negative seeks [#4101](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4101)
>   [radarhere]
> 
> - Added argument to capture all screens on Windows [#3950](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3950)
>   [nulano, radarhere]
> 
> - Updated warning to specify when Image.frombuffer defaults will change [#4086](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4086)
>   [radarhere]
> 
> - Changed WindowsViewer format to PNG [#4080](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4080)
>   [radarhere]
> 
> - Use TIFF orientation [#4063](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4063)
>   [radarhere]
> 
> - Raise the same error if a truncated image is loaded a second time [#3965](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3965)
>   [radarhere]
> 
> - Lazily use ImageFileDirectory_v1 values from Exif [#4031](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4031)
>   [radarhere]
> 
> - Improved HSV conversion [#4004](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4004)
>   [radarhere]
> 
> - Added text stroking [#3978](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/3978)
>   [radarhere, hugovk]
> 
> - No more deprecated bdist_wininst .exe installers [#4029](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4029)
>   [hugovk]
> 
> - Do not allow floodfill to extend into negative coordinates [#4017](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4017)
>   [radarhere]
></tr></table> ... (truncated)
</details>
<details>
<summary>Commits</summary>

- [`8a30d13`](https://github.com/python-pillow/Pillow/commit/8a30d135378dc6a1c3c08fa4bb9fbc15370feedf) Updated CHANGES.rst [ci skip]
- [`75602d1`](https://github.com/python-pillow/Pillow/commit/75602d12e1b6f2152ab5bd1acfb62a9c8a4a0432) 6.2.0 version bump
- [`4756af9`](https://github.com/python-pillow/Pillow/commit/4756af9c1027ae620eaa9538d6b0dd9b0e844fca) Updated CHANGES.rst [ci skip]
- [`cc16025`](https://github.com/python-pillow/Pillow/commit/cc16025e234b7a7a4dd3a86d2fdc0980698db9cc) Merge pull request [#4104](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4104) from radarhere/overrun
- [`fb84701`](https://github.com/python-pillow/Pillow/commit/fb8470187a45043c33b1c75e7dca48b38d5db7a6) Merge pull request [#4034](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4034) from cgohlke/patch-1
- [`b9693a5`](https://github.com/python-pillow/Pillow/commit/b9693a51c99c260bd66d1affeeab4a226cf7e5a5) Merge pull request [#4103](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4103) from radarhere/dimension
- [`f228d0c`](https://github.com/python-pillow/Pillow/commit/f228d0ccbf6bf9392d7fcd51356ef2cfda80c75a) Merge pull request [#4102](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4102) from radarhere/decompression
- [`aaf2c42`](https://github.com/python-pillow/Pillow/commit/aaf2c421564fcf96bd030487f09b648f7feb7b67) Merge pull request [#4000](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4000) from nulano/dpi_fix
- [`b36c1bc`](https://github.com/python-pillow/Pillow/commit/b36c1bc943d554ba223086c7efb502d080f73905) Merge pull request [#4101](https://github-redirect.dependabot.com/python-pillow/Pillow/issues/4101) from radarhere/negative_seek
- [`9a977b9`](https://github.com/python-pillow/Pillow/commit/9a977b975cd871ef9a9128b72414c0de3a292591) Raise error if dimension is a string
- Additional commits viewable in [compare view](https://github.com/python-pillow/Pillow/compare/5.4.1...6.2.0)
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=pillow&package-manager=pip&previous-version=5.4.1&new-version=6.2.0)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot ignore this [patch|minor|major] version` will close this PR and stop Dependabot creating any more for this minor/major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/spotify/pythonflow/network/alerts).

</details>"
Bump urllib3 from 1.24.1 to 1.24.2,"Bumps [urllib3](https://github.com/urllib3/urllib3) from 1.24.1 to 1.24.2.
<details>
<summary>Changelog</summary>

*Sourced from [urllib3's changelog](https://github.com/urllib3/urllib3/blob/master/CHANGES.rst).*

> 1.24.2 (2019-04-17)
> -------------------
> 
> * Don't load system certificates by default when any other ``ca_certs``, ``ca_certs_dir`` or
>   ``ssl_context`` parameters are specified.
> 
> * Remove Authorization header regardless of case when redirecting to cross-site. (Issue [#1510](https://github-redirect.dependabot.com/urllib3/urllib3/issues/1510))
> 
> * Add support for IPv6 addresses in subjectAltName section of certificates. (Issue [#1269](https://github-redirect.dependabot.com/urllib3/urllib3/issues/1269))
</details>
<details>
<summary>Commits</summary>

- [`1efadf4`](https://github.com/urllib3/urllib3/commit/1efadf43dc63317cd9eaa3e0fdb9e05ab07254b1) Release 1.24.2 ([#1564](https://github-redirect.dependabot.com/urllib3/urllib3/issues/1564))
- See full diff in [compare view](https://github.com/urllib3/urllib3/compare/1.24.1...1.24.2)
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=urllib3&package-manager=pip&previous-version=1.24.1&new-version=1.24.2)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot ignore this [patch|minor|major] version` will close this PR and stop Dependabot creating any more for this minor/major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/spotify/pythonflow/network/alerts).

</details>"
Unexpected(?) behaviour in `Graph.apply`,"I ran into an issue today while attempting repeated evaluations of a graph. My rough usage pattern looks like this:

```python
context = {'a': 1, 'b': 2}
for df in frames:
	out = graph(outputs, context=context, frame=df)
```

Which worked fine for the first call but fails with the following error on the second call:

```python
ValueError: duplicate value for operation '<pf.placeholder 'first_input'>'
```

After some digging, I noticed that the `Graph.normalize_context` method modifies the `context` in-place. It is not mentioned in the documentation, and given the semantics of a `Graph.apply` this does not seem like an expected (or desired?) side-effect.

Is this something that should be updated in the documentation? Should `Graph.normalize_context` be modified to copy the context and not modify it in-place? Or is there a better pattern I should be using if I need to repeatedly call the graph object with some constant context and a handful of varying placeholders? (It probably wouldn't hurt to update the documentation with that pattern if there is one)."
Fixed documentation typo in opmethod function in core.py,"```def opmethod(target=None, **kwargs):
    """"""
    Decorator for creating operations from functions.
    """"""
    # This is called when the decorator is used with arguments
    if target is None:
        return functools.partial(opmethod, **kwargs)

    # This is called when the decorator is used without arguments
    @functools.wraps(target)
    def _wrapper(*args, **kwargs_inner):
        return func_op(target, *args, **kwargs_inner, **kwargs)
    return _wrapper
```

the words 'with' and 'without' is mistakenly interchanged in documentation in above funciton"
Use pip-tools because pipenv is too buggy.,This should also fix the build issues with readthedocs which relies on `requirements.txt` being present.
Make Pythonflow thread-compatible.,"Previously it was impossible to use `pythonflow` in a multithreaded application: with this patch it is possible to use distinct `pythonflow` graphs, one per-thread."
Simplify pfmq and add prefetch argument.,"@adliska, this PR adds the ability to prefetch requests on the worker side to minimise communication overhead."
Use pipenv for dependency management.,
Pin pylint version (ref #36).,Cf https://github.com/PyCQA/pylint/issues/1164#issuecomment-407353685
increment version for updated master,I pip installed `pythonflow` from pypi but found that version 0.2.3 did not contain the lastest changes to the operations.py module... specifically allowing one to input kwargs to pf.placeholder...
Use topics to ensure reliable communication.,
Add kwargs to placeholder.,Placeholders cannot be unpacked at the moment because the `length` argument is not passed to the super class constructor.
re-compute parts of graph that are invalidated by changed placeholders?,"I'm trying to do the following sequence:

- (a) define some context C (by setting values of some placeholders)
- (b) compute some op P in a graph G with context C
- (c) now of course context C contains the state of the graph G, including all intermediate ops
- (d) _update_ some placeholder(s) in C to _new values_
- (e) compute some op Q (could be same as P above, but needn't be) in graph G, in _updated_ context C

Now when computing Q, 

> I want the graph to re-compute any ops that were **invalidated** by the updated placeholders in step (d). 

But this doesn't happen because the context C is fully respected, i.e. all ops whose values are in C are taken as-is, even if they are invalid given the new values of the updated placeholders. Here's a toy example to show this:

```python
import pythonflow as pf
import random
random.seed(1)

gr = pf.Graph()
with gr as graph:
  b = pf.placeholder(name='b')
  uniform = pf.func_op(random.uniform, 0, b, name = 'uniform')  # depends on b
  scaled_uniform = uniform*10

context = dict(b=1.0)
graph(scaled_uniform, context)

context[b] = 2.0     # update b to new value

# below I'd like 'uniform' to be re-calculated since the 'uniform' op  
# depends on ""b"", which has changed

graph(scaled_uniform, context)

# but it does NOT recompute it since ""uniform"" is 
# already in the context, and it uses its value
```
Is there some way to get the behavior I want?
"
Multiple improvements and bug fixes,See commit messages for details.
Limit number of cached results to avoid memory problems.,
Ensure all operators and builtins are available.,
Propagate exceptions from workers; improve testing.,
Clean up,See commit messages.
Cache,"This PR adds caching functionality to the graph.

Depends on #26."
Add try-except-finally operation.,
Typo on paragraph #06,`transfromed`--> `transformed`
Use travis to publish to pypi.,
Replace push/pull communication with LRU load balancing,"* removes the `Consumer` and `Processor` classes which use push/pull sockets
* introduces `Task`, `LoadBalancer` and `Worker` classes which use a variant of the [zmq LRU load-balancing pattern](http://zguide.zeromq.org/py:all#A-Load-Balancing-Message-Broker)

@sebewert, @marcsarfa, @jdonier, this may be of interest to you as it changes the way work is distributed across multiple machines. Examples are in the tests.

## To-do
- [x] Tests
- [x] Update docs"
Support built-in collections,"@marcsarfa, each of these tests fails because of the issues highlighted in #18 and #21. Let's get them to pass. 👍 "
Handling tuple of operations,"This gives the following error: `TypeError: not all arguments converted during string formatting`
```python
def f(z):
    return z, z

with pf.Graph() as g:
    x = pf.placeholder('x')
    y = f(x)
    
g([y], x=1)
```

However this works:
```python
def f(z):
    return z, z

def tuple_op(x, y):
    return x, y

with pf.Graph() as g:
    x = pf.placeholder('x')
    y = pf.func_op(tuple_op, *f(x))
    
g([y], x=1)
```
and it outputs `((1, 1),)`

It seems that pythonflow does not know how to handle properly tuples of operations. It could be useful to compute easily a tuple of operations, for example when one wants to define parts of the graph in an auxiliary function as above.
Adding a `@pf.opmethod()` decorator does not work if there are pythonflow operations in the function. It raises the error `ValueError: 'graph' must be given explicitly or a default graph must be set
` since it encapsulates an operation inside another operation."
Added length parameter in pf conditional,It is now possible to return more than 1 element with pf.conditional by specifying its length
Can you use Pythonflow in OOP?,"Hi there, thanks for open-sourcing this library. I am wondering if PythonFlow can support object based, stateful DAG relationship?

I have seen a similar library before, and had similar question posted here:
https://github.com/manahl/mdf/issues/23

I really think it will be cool for Python to have these kinds of Dataflow toolkit. Would be great to hear the case for PythonFlow."
Bug when indexing with non-trivial slices,"@jdonier, would be great if you could provide examples of the bugs you encountered with complex slicing."
Explicitly demand python3 and make zmq an optional dependency.,
ZeroMQ dependency,"I was wondering whether it would be possible to have ZeroMQ as an optional dependency for distributed processing?

In the industry (vfx and animation) I'm interesting in using pythonflow, ZeroMQ is hard to distribute because of the tools we use.
Further we would probably look at using other processing distribution systems, such as using render manager like [Thinkbox](https://deadline.thinkboxsoftware.com/)."
Pip install: Syntax Error,"**Reproducible**

1. Install pythonflow with pip.
2. Run first example in docs:

```python
import pythonflow as pf

with pf.Graph() as graph:
    a = pf.constant(4)
    b = pf.constant(38)
    x = a + b
```
```python
Traceback (most recent call last):
  File ""C:/Users/admin/Desktop/pythonflow_testing.py"", line 1, in <module>
    import pythonflow as pf
  File ""C:\Users\admin\miniconda\envs\pythonflow\lib\site-packages\pythonflow\__init__.py"", line 18, in <module>
    from .core import *
  File ""C:\Users\admin\miniconda\envs\pythonflow\lib\site-packages\pythonflow\core.py"", line 121
    def __call__(self, fetches, context=None, *, callback=None, **kwargs):
                                               ^
SyntaxError: invalid syntax
```"
Visualizing the dataflow graph,"Hi, this project looks interesting, have you done any work on visualizing the generated data flow graph?

Thanks"
Zmq update,See commit messages.
Update documentation.,"* Extend the documentation on distributed processing and fix some typos. 
* Bump version."
Callbacks and profiler (fixes #10).,This PR adds callbacks for operation evaluation and implements a profiler as a callback.
Provide callback function for evaluation of operations,"Adding callback functionality would allow interaction with the graph at evaluation time. For example, for profiling purposes."
Distributed data preparation using ZMQ.,
Performance improvements,"* Do not normalize the evaluation context for every evaluation of an operation to reduce overhead.
* Allow `set_name` member function for easier construction of graphs.
* Make operations picklable for multiprocessing.
* Use conditional statement to check whether an operation has already been evaluated rather than relying on `try`/`except`.
* Add function to batch iterables."
Add stale bot configuration.,https://github.com/probot/stale
Add lazy_constant.,This PR adds a `lazy_constant` operation that can be used to delay the evaluation of constants in the graph until they are first used.
Version0.1.1,
graph function call error,"hi, I use the example code as follow and got error.
>>> import pythonflow as pf
>>>
>>>
>>> with pf.Graph() as graph:
...     a = pf.constant(4)
...     b = pf.constant(38)
...     x = a + b
...
Traceback (most recent call last):
  File ""<stdin>"", line 4, in <module>
  File ""/Users/leepand/Downloads/BigRLab_APIs/flask_lab/pythonflow/pythonflow/core.py"", line 329, in __add__
    return add(self, other, graph=self.graph)
  File ""/Users/leepand/Downloads/BigRLab_APIs/flask_lab/pythonflow/pythonflow/core.py"", line 480, in _wrapper
    return func_op(target, *args, **kwargs_inner, **kwargs)
  File ""/Users/leepand/Downloads/BigRLab_APIs/flask_lab/pythonflow/pythonflow/core.py"", line 458, in __init__
    super(func_op, self).__init__(*args, **kwargs)
TypeError: __init__() got multiple values for argument 'graph'"
Allow operations to be callable.,This PR allows operations to be directly callable to support more of the standard python syntax.
Add deployment to travis.,
Add Sphinx documentation.,
